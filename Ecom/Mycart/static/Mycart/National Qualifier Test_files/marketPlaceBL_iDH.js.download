var instanceId, orgID, masterform_id, OrgFormId, ProductFormId, UsrFormId,currencyDetails,languageDetails,globalCategories,allInstanceDetails,globalModuleVisibility="",isEmailVerificationReq="",defaultLanguageId="",defaultTimeZone="",defaultCountry="",userColNotReqArr="",orgColNotReqArr="",statedbs="",citydbs="",languageId="",countryId="",countryName="",stateId="",cityId="",orgIdUser="", stateln="",cityln="",defaultCountry="",languageIds="",isJobVisible="",isRichProfile="",isNewLoginSignUp=false,gblCountries={},paymentLinkId="";
var redirectToLx = "redirectToLX";
var redirectToIDP = "redirectToIDP";
var ref="iHUB",sources="iHUB";
function removeDefaultSearchForChrome(){
	var defaultSeacrh = false;
	(function rerunA(){
		if(!defaultSeacrh){
			$('.desktopinpt input').val('');
			setTimeout(function() {
				$('.desktopinpt').removeAttr('style');
				defaultSeacrh = true;
			}, 100);
			setTimeout(rerunA, 1);
		}
	})();
	$('.desktopinpt input').on('click',function(){
		$('.desktopinpt').removeAttr('style');
		defaultSeacrh = true;
	});
}
function instancevalidated(userid,confData,remember){
	removeDefaultSearchForChrome();
	/* putting below check since when microsite loads first bredcrum comes & then goes & then comes again so not hiding it in case of microsite */
	if(!micrositeCheck)
		$('.bredcrum').addClass('hidden');
	eval("callMultiLingualFirstTime()");
	setTimeout(function(){
		if($('#cookieConsentURL').length!=0 && $.trim($('#cookieConsentURL').val())!=""){
			$('.policy_alert').find('a:first').attr('onClick',"window.open('"+$.trim($('#cookieConsentURL').val())+"','_blank')");
		}
		if($.trim(store.get('isOtpRequired'))=="1"){
			$('.isOTPfeature').removeClass('hidden');
			$('.forgotPwdLink').addClass('hidden');
		}
		else
			$('.isOTPfeature').addClass('hidden');
		/* for Wishlist to show before login */	
		setTimeout(function() {
			if ( remember == 'true' ) {
				$('#userid_temp').attr("value", userid);
				$('#confData').attr("value", confData);
			}
			var hash = decodeURIComponent(location.hash);
			var myPage = hash.substr(1,hash.length);
			$('#languageDropDownD span:first').text(store.get('languageName')); /* added by prajna */
			/* if(myPage.indexOf(instanceId+"@IID@Home/Catalogue=")>-1){
				callOnSearch();
				SetBreadCrumbCatalogue();
				$('.diffviews.list-unstyled.clearfix').removeClass('hidden');
				$("#distributorManagement").parent().addClass('hidden');
				$('#IndexContent').addClass('hidden');
			} */ /* commenting since this makes blank page on refresh of catalogue & microsite */
			callPreLoginAtLastAfterAll();
			if($('#app_seq_no_div').length>0){
				$(".preLogin").addClass('hidden');
				$('#languageDropDownD').addClass('hidden');   /* added for lang cr by prajna */
				if(typeof openUserLanguageModal == 'function')
					openUserLanguageModal();     /* added for lang cr by prajna */
			}
			else
				$(".preLogin").removeClass('hidden');
			if(!$('#micrositeContent').length>0){
				cartJSPartPreLogin();
			}
			eval('RedirectTofilteredCatalogue(true)');
			/* var generateIndexPagetemp=generateIndexPage(); */ /* commenting here as it is getting called from controller of index page */ /* added for job CR */
			callAlways();
			if($('#sessChk').val()!="" && $('#sessChk').val()!=null){
				(function rerunMAL1(){
					if(typeof globalMLjson == 'object'){
						//calling here rerun bcoz AL is getting run before multilingual
						(function rerunCPA(){
							if(typeof callPreLoginActivity == 'function'){
								callPreLoginActivity();/* callPostLoginAtLastAfterAll(); */
							}else{
								setTimeout(rerunCPA, 200);
							}
						})();
						if(typeof callPostLoginAtLastAfterAll == 'function')
							callPostLoginAtLastAfterAll();
					}else{
						setTimeout(rerunMAL1, 200);
					}
				})();
				
			}
			(function rerun(){
				if( indexDetailsStatus!= false ){
					indexDetailsStatus=true;
					/* callAlways(); */ /* commenting here & calling it above rerun since for other than index page this rerun will not get called */
					var returnValue = eval('RedirectTofilteredCatalogue(false)');
					log('returnValue of RedirectTofilteredCatalogue..'+returnValue)
					if(returnValue || $.trim($('#orgId').val())=="1193")/*return true only if no cases are valid*/
						navigateMyPage(); /* to be checked */
					/*if($('#sessChk').val()!="" && $('#sessChk').val()!=null){
						(function rerunCPA(){
							if(typeof callPreLoginActivity == 'function'){
								callPreLoginActivity(); callPostLoginAtLastAfterAll(); 
							}else{
								setTimeout(rerunCPA, 200);
							}
						})();
					}*/
					checkForEllipsis();
					hideLoader_iDH();
				}else{
					setTimeout(rerun, 200);
				}
			})();
		}, 300);
	},300);
}
function callPreLoginAtLastAfterAll(){
	if(typeof WOW == 'function'){
		new WOW().init();
	}
	$.fn.menuAim = function(opts) {
		this.each(function() {
			init.call(this, opts);
		});
		return this;
	};
	postHeaderCatalog();
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),
	sURLVariables = sPageURL.split('&'),
	sParameterName,
	i;
	sParameterName = sURLVariables;
	var signup='',name='',email='',referrer='',source='';
	for(var i=0; i<sParameterName.length;i++){
		if (sParameterName[i].split('=')[0] === 'login') {
			if(sParameterName[i].split('=')[1]){
				if(!($('#sessChk').length>0))
					checkMyPage();
			}	
		}
		else if(sParameterName[i].split('=')[0] === 'signup') {
			signup=sParameterName[i].split('=')[1];
		}
		else if(sParameterName[i].split('=')[0] === 'name') {
		   name=sParameterName[i].split('=')[1];
		}
		else if(sParameterName[i].split('=')[0] === 'referrer') {
		   referrer=sParameterName[i].split('=')[1];
		}
		else if(sParameterName[i].split('=')[0] === 'source') {
		   source=sParameterName[i].split('=')[1];
		}		
		else if(sParameterName[i].split('=')[0] === 'email') {
		   email=sParameterName[i].split('=')[1];
		}
	}
	 /* added for setting value of source and referrer in global */
	if(source!=""){
		sources=source;
	}
	else{
		sources="iHUB";
	}
	/* var ref=""; */
	if(referrer!=""){
		ref=referrer;
	}
	else{
		ref="iHUB";
	}
	 /* added for setting value of source and referrer in global */
	if(signup == 'true') {
		userRegistrationWithReferrer(name,email,referrer,source);
	}
	localCartToHiddenfield();
	if(iHUB.isMobileDevice()) {
		$('.selectpicker').selectpicker('mobile');
	}
	setTimeout(function(){
		if (typeof restrictXSSonInput == 'function')  
			restrictXSSonInput();
	},1500);
	return true;
}
function localCartToHiddenfield(){
	if(store.get('krt') != undefined && store.get('krt') != "undefined" && store.get('krt') != "" && store.get('instanceId') != undefined && store.get('instanceId') != "undefined" && store.get('instanceId') != ""){
		if(store.get('instanceId')==instanceId){
			if($.trim($('#sessChk').val())==""){
				myCart=store.get('krt');
				var prelogincartTemp=store.get('prelogincart');
				myCartArray=myCart.split(',');
				/* myCart=arr = myCartArray.filter (function (v, i, a) { return a.indexOf (v) == i }); */
				if($.trim(myCart)!="" && $.trim(prelogincartTemp)!="" && $.trim(myCart).split(',').length==$.trim(prelogincartTemp).split(',').length){
					$('#txtCart').val(myCart);
					$('#myPreLoginCart').val(prelogincartTemp);
				}
				else{
					$('#txtCart').val('');
					$('#myPreLoginCart').val('');
					store.set('krt','')
					store.set('prelogincart','')
				}
				miniCart();
			}
		}
	}
}
/* function validateUser(){
	var checkLogin=false,checkGuest=false,userid="",confData="",guestUserID="",updatedUserId="",updatedGuestUserID="";
	masterform_id=$('#userFormId').val();
	if($.trim(instanceId)==''){
		instanceId=$('#instanceId').val();
	}
	if($('#userid_temp').val()!=undefined)
		userid=$('#userid_temp').val();
	if($('#confData').val()!=undefined)
		confData=$('#confData').val();
	if($('#guestUserID').val()!=undefined)
		guestUserID=$("#guestUserID").val().toUpperCase();
	if($.trim(userid)=="" && $.trim(confData)=="" && $.trim(guestUserID)==""){
		$('#errmsg').text("Please enter Login ID and Password");
		$('#errmsg').show();
		$('#userid_temp').css("border-color","red");
		$('#confData').css("border-color","red");
		checkLogin=false;
		checkGuest=false;
		return false;
	}
	else if($.trim(userid)!="" || ($.trim(userid)=="" && $.trim(confData)!="" && $.trim(guestUserID)=="")){
		$('#guestUserID').val('');
		guestUserID="";
		checkLogin=true;
	}
	else if($.trim(userid)=="" && $.trim(confData)=="" && $.trim(guestUserID)!=""){
		checkGuest=true;
		$("#rememberMe").attr('checked',false);
		$('#userid_temp').val('');userid="";
		$('#confData').val('');confData="";
	}
	if(checkLogin){
		if($("#rememberMe").is(":checked")){
			store.set('userid',userid);
			store.set('confData',confData);
		}
		else{
			store.set('userid',null);
			store.set('confData',null);
		}
		if(userid == ''){
			$('#errmsg').text(iHUB.multilingual.gmv('txt37'));
			$('#errmsg').show();
			$('#userid_temp').css("border-color","red");	
			return false;
		}
		else if(confData == ''){
			$('#errmsg').hide();
			$('#errmsg').text(iHUB.multilingual.gmv('txt2'));
			$('#errmsg').show();
			$('#userid_temp').css("border-color","#dadada");
			$('#confData').css("border-color","red");	
			return false;
		}
		else{
			$("#userid").val(userid+'_'+masterform_id+orgID+'_'+instanceId);
			updatedUserId=userid+'_'+masterform_id+orgID+'_'+instanceId;
			$('#errmsg').hide();
			$('#userid_temp').css("border-color","#dadada");
			$('#confData').css("border-color","#dadada");		
		}
	}
	else if(guestUserID == ''){
		checkGuest=false;
		$('#errmsg').text(iHUB.multilingual.gmv('txt3'));
		$('#errmsg').show();
		$('#guestUserID').css("border-color","red");	
		return false;
	}
	else{
		updatedGuestUserID=guestUserID+'_'+masterform_id+orgID+'_'+instanceId;
	}
	if(checkLogin || checkGuest){	
		showLoader();
		var subAction ="validateUser";
		var param="masterform_id="+masterform_id+"&orgID="+orgID+"&subAction="+subAction+"&userid="+updatedUserId+"&confData="+confData+"&txtInstanceId="+instanceId+"&guestUserID="+updatedGuestUserID;
		var http_request=fnGetXMLHttpObject();
		if(http_request!=null){
			var url=iHUB.url.get();
			http_request.open('POST', url, true);
			http_request.onreadystatechange = function () {
				if (http_request.readyState == 4){
					if (http_request.status == 200) {
						var responseTemp=http_request.responseText;
						var response=responseTemp.split('@~@')[0];
						hideLoader_iDH();
						if(checkLogin){
							if(response.toLowerCase()==updatedUserId.toLowerCase()){
								loginAfterValidate(orgID,masterform_id,updatedUserId,confData);
							}
							else{
								$("#errmsg").hide();
								$("#userid").val("");
								$('#userid_temp').val("");
								$("#confData").val("");
								if(response.toLowerCase()=="on-hold" && responseTemp.split('@~@')[1]=="1"){
									alert("Guardian consent still pending, Link has been sent to Guardian e-mailid. kindly approve the same for login");
								}
								else if(response.toLowerCase()=="on-hold" && responseTemp.split('@~@')[1]=="0"){
									alert("Verification email sent to your e-mailid. Kindly click on the link to verify your account.");
								}
								else if(response.toLowerCase()=="invalid"){
									$("#errmsg").text(iHUB.multilingual.gmv('txt4'));
									$("#errmsg").show();
								}
							}
						}
						else if(checkGuest){
							if(response.toLowerCase()=="valid"){
								$('#userid').val(updatedGuestUserID);
								$("#confData").val(guestUserID);
								loginAfterValidate(orgID,masterform_id,updatedGuestUserID,guestUserID);
							}
							else if(response.toLowerCase()=="invalid"){
								$("#errmsg").hide();
								$("#errmsg").text(iHUB.multilingual.gmv('txt5')); 
								$("#errmsg").show();
							}
						}
					}
				}
			};
			http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			http_request.send(param);
		}
		return true;
	}	
} */
function enableNewLoginSignUp(){
	isNewLoginSignUp = true;
}
function showErrorMsgInLogin(errMsg){
	if(isNewLoginSignUp){
		$('.slide-nav-right:visible').find('#errmsg').text(errMsg);
		$('.slide-nav-right:visible').find('#errmsg').show();
	}
	else{
		$('#errmsg').text(errMsg);
		$('#errmsg').show();
	}
}
function hideErrorMsgInLogin(){
	if(isNewLoginSignUp)
		$('.slide-nav-right:visible').find('#errmsg').hide();
	else
		$('#errmsg').hide();
}
function returnTrueSelector(selector){
	if(isNewLoginSignUp)
		return $('.slide-nav-right:visible').find(selector);
	else
		return $(selector);
}
function validateUser(){
	var checkLogin=false,checkGuest=false,userid="",confData="",guestUserID="",updatedUserId="",updatedGuestUserID="";
	masterform_id=$('#userFormId').val();
	if($.trim(instanceId)==''){
		instanceId=$("#txtInstanceId_div").text()==""?$("#txtInstanceId").val():$("#txtInstanceId_div").text();
	}
	if(returnTrueSelector('#userid_temp').val()!=undefined){
		userid=returnTrueSelector('#userid_temp').val();
	}		
	if(returnTrueSelector('#confData').val()!=undefined){
		confData=returnTrueSelector('#confData').val();
	}
	if($('#guestUserID').val()!=undefined)
		guestUserID=$("#guestUserID").val().toUpperCase();
	if($.trim(userid)=="" && $.trim(confData)=="" && $.trim(guestUserID)==""){
		showErrorMsgInLogin(multilingualKeyValue('145','34'));     /* "Please enter Login ID and Password" */
		returnTrueSelector('#userid_temp').css("border-color","red");
		returnTrueSelector('#confData').css("border-color","red");
		checkLogin=false;
		checkGuest=false;
		return false;
	}
	else if($.trim(userid)!="" || ($.trim(userid)=="" && $.trim(confData)!="" && $.trim(guestUserID)=="")){
		$('#guestUserID').val('');
		guestUserID="";
		checkLogin=true;
	}
	else if($.trim(userid)=="" && $.trim(confData)=="" && $.trim(guestUserID)!=""){
		checkGuest=true;
		returnTrueSelector("#rememberMe").attr('checked',false);
		returnTrueSelector('#userid_temp').val('');userid="";
		returnTrueSelector('#confData').val('');confData="";
	}
	if(checkLogin){
		if($("#rememberMe").is(":checked")){
			store.set('userid',userid);
			store.set('confData',confData);
		}
		else{
			store.set('userid',null);
			store.set('confData',null);
		}
		if(userid == ''){
			showErrorMsgInLogin(multilingualKeyValue('277','34'));/* Please Enter Login ID.txt37 */
			returnTrueSelector('#userid_temp').css("border-color","red");	
			return false;
		}
		else if(confData == ''){
			showErrorMsgInLogin(multilingualKeyValue('285','34'));/*  Please Enter Password.txt2 */
			returnTrueSelector('#userid_temp').css("border-color","#dadada");
			returnTrueSelector('#confData').css("border-color","red");	
			return false;
		}
		else{
			$("#userid").val(userid+'_'+masterform_id+orgID+'_'+instanceId);
			updatedUserId=userid+'_'+masterform_id+orgID+'_'+instanceId;
			hideErrorMsgInLogin();
			returnTrueSelector('#userid_temp').css("border-color","#dadada");
			returnTrueSelector('#confData').css("border-color","#dadada");		
		}
	}
	else if(guestUserID == ''){
		checkGuest=false;
		showErrorMsgInLogin(multilingualKeyValue('310','34'));/*  Please Enter Guest User ID.txt3 */
		$('#guestUserID').css("border-color","red");	
		return false;
	}
	else{
		updatedGuestUserID=guestUserID+'_'+masterform_id+orgID+'_'+instanceId;
	}
	if(checkLogin || checkGuest){	
	//daily password authentication start
		var dailyPassword = "";
		var isLiveInstance = "0";
		var groupID = $.trim(headerUploadPath).indexOf('/per/') > -1 ? $.trim(headerUploadPath).split('/per/')[1].split('/')[0] : "g01";
		var sessionC = $('#app_seq_no_div').length>0 ? "P" : "A";
		showLoader();		
		var currentUrl = "";
		currentUrl = window.location.href;
		currentUrl = getReferrelURL(currentUrl);
		var extraString="";
		if(isPaymentLink)
			extraString="&"+(currentUrl.indexOf('lp') > -1 ? 'lp' : 'pp')+"="+paymentLinkId;
		var subAction ="validateUser";
		var param="masterform_id="+masterform_id+"&orgID="+orgID+"&subAction="+subAction+"&userid="+updatedUserId+"&confData="+confData+"&txtInstanceId="+instanceId+"&guestUserID="+updatedGuestUserID+extraString;		
		var rememberMe = "0";
		if(returnTrueSelector("#rememberMe").is(":checked")){
			rememberMe = "1";
		}
		var http_request=fnGetXMLHttpObject();
		if(http_request!=null){
				var url=iHUB.url.getiDH();
				http_request.open('POST', url, true);
				http_request.onreadystatechange = function () {
					if (http_request.readyState == 4){
						if (http_request.status == 200) {
							var responseTemp=http_request.responseText;
							var response=responseTemp.split('@~@')[0];
							hideLoader_iDH();
							if(checkLogin){
								if(response.toLowerCase()==updatedUserId.toLowerCase()){
									//fnLogin(updatedUserId,confData);
									var form = document.createElement("form");
									form.className = "hidden";
									var element1 = document.createElement("input"); 
									var element2 = document.createElement("input"); 
									var element3 = document.createElement("input"); 
									var element4 = document.createElement("input"); 
									var element5 = document.createElement("input"); 
									var element6 = document.createElement("input"); 
									var element7 = document.createElement("input"); 
									var element8 = document.createElement("input"); 
									var element9 = document.createElement("input"); 
									if(isPaymentLink)
										var element10 = document.createElement("input"); 
									var element11 = document.createElement("input"); 

									form.method = "POST";
									form.action = iHUB.url.iDH();   

									element1.value=orgID;
									element1.name="orgID";
									form.appendChild(element1);  

									element2.value="validateinstancemandatoryandlogin";
									element2.name="subAction";
									form.appendChild(element2);
									
									element3.value=instanceId;
									element3.name="txtInstanceId";
									form.appendChild(element3);
									
									element4.value=updatedUserId;
									element4.name="userid";
									form.appendChild(element4);
									
									element5.value=confData;
									element5.name="confData";
									form.appendChild(element5);
									
									element6.value="iHUB";
									element6.name="loginType";
									form.appendChild(element6);

									element7.value=currentUrl;
									element7.name="refererUrl";
									form.appendChild(element7);
									
									var action = "";
									if(currentUrl.includes("action="+redirectToLx)){
										currentUrl = currentUrl.split("?")[1];
										action = redirectToLx;
									}
									if(currentUrl.includes("action="+redirectToIDP)){
										currentUrl = currentUrl.split("?")[1];
										action = redirectToIDP;
									}
									element8.value=action;
									element8.name="action";
									form.appendChild(element8);
									
									element9.value=rememberMe;
									element9.name="rememberMe";
									form.appendChild(element9);
									
									if(isPaymentLink){
										var eName = currentUrl.indexOf('lp') > -1 ? 'lp' : 'pp';
										element10.value=paymentLinkId;
										element10.name=eName;
										form.appendChild(element8);
									}
									
									element11.value=getPreLoginCartValues();
									element11.name="preLoginCart";
									form.appendChild(element11);
									
									document.body.appendChild(form);

									form.submit();
								}
								else{
									hideErrorMsgInLogin();
									$("#userid").val("");
									returnTrueSelector('#userid_temp:visible:not([disabled])').val("");
									returnTrueSelector("#confData").val("");
									var responseTempSecondValue = $.trim(responseTemp.split('@~@')[1]);
									var responseTempThirdValue = $.trim(responseTemp.split('@~@')[2]);
									if(response.toLowerCase()=="on-hold"){
										var tmsg = "";										
										if(responseTempSecondValue == "1")
											tmsg = multilingualKeyValue('318','34');
										else if(responseTempSecondValue == "0")
											tmsg = multilingualKeyValue('319','34');
										
										if(isNewLoginSignUp && responseTempSecondValue == "0" && responseTempThirdValue!="" && typeof showResendLinkMsg == 'function' && $.trim(allInstanceDetails.isEmailVerificationReq) == "1")
											showResendLinkMsg(responseTempThirdValue);
										else
											alert(tmsg);
									}
									else if(response.toLowerCase()=="invalid"){
										var invalidAuthString = "";
										if(responseTemp.split('@~@').length == 2){
											var tmsg = multilingualKeyValue('320','34');
											invalidAuthString = " "+tmsg;
										}
										showErrorMsgInLogin(multilingualKeyValue('311','34')+invalidAuthString);/*  Invalid Username and Password.txt4 */
									}else if(response.toLowerCase()=="blocked"){
										var tmsg = multilingualKeyValue('321','34');
										showErrorMsgInLogin(tmsg);/*  Account has been blocked */
									}
								}
							}
							else if(checkGuest){
								if(response.toLowerCase()=="valid"){
									$('#userid').val(updatedGuestUserID);
									returnTrueSelector("#confData").val(guestUserID);
									fnLogin(updatedGuestUserID,guestUserID);
								}
								else if(response.toLowerCase()=="invalid"){
									showErrorMsgInLogin(multilingualKeyValue('312','34')); /* Invalid Guest User ID.txt5 */
								}
							}
						}
					}
				};
				http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
				http_request.send(param);
			}
		return true;
	}
}
function getReferrelURL(currentUrl){
	var returnURL = currentUrl;
	var searchParam = $.trim(window.location.search);
	if(searchParam!=''){
		var sPageURL = decodeURIComponent(searchParam.substring(1)),	
		sURLVariables = sPageURL.split('&');
		var action='',id='',ref='';
		for (var i=0; i<sURLVariables.length;i++){
			if(sURLVariables[i].split("=")[0] == 'action'){
				action=sURLVariables[i].split("=")[1];
			}
			if(sURLVariables[i].split("=")[0] == 'id'){
				id=sURLVariables[i].split("=")[1];
			}
			if(sURLVariables[i].split("=")[0] == 'ref'){
				ref=sURLVariables[i].split("=")[1];
			}
		}	
		if($.trim(id)!=''){
			paymentLinkId = id;
			var paramsObject = store.get(id)!='' ? JSON.parse(store.get(id)) : {};
			if(!jQuery.isEmptyObject(paramsObject))
				returnURL = paramsObject.redirectUrl;
		}
		else if(ref!=''){
			returnURL = ref;
			if($.trim(window.location.hash)!='')
				returnURL+=$.trim(window.location.hash);
		}
	}
	return returnURL;
}
function getPreLoginCartValues(){
	var returnString = "";
	var myPreLoginCart = $.trim($('#myPreLoginCart').val());
	var newCartString = [];
	if(myPreLoginCart!=""){
		//store only those product in cart for which there is no Eforms associated		
		var myPreLoginCartTemp = myPreLoginCart.split(',');
		for(var i=0;i<myPreLoginCartTemp.length;i++){
			var productIdC = $.trim(myPreLoginCartTemp[i]).split('~')[0];
			var isPresentInPreLoginActivity = $.trim(store.get('preloginActivity')).split('"').indexOf(productIdC) > -1;
			
			var customFormDataforPreloginCart = store.get('customFormDataforPreloginCart');
			if($.trim(customFormDataforPreloginCart)!=""){
				var tempcustomdata=$.trim(customFormDataforPreloginCart).split(',');
				if(tempcustomdata.indexOf(productIdC)==-1){
					if($.trim(checkForEformsLink(productIdC,'pre'))=="" && !isPresentInPreLoginActivity)
						newCartString.push(myPreLoginCartTemp[i]);
				}
				store.del('customFormDataforPreloginCart');
			}
			else{
				if($.trim(checkForEformsLink(productIdC,'pre'))=="")
					newCartString.push(myPreLoginCartTemp[i]);
			}
		}
	}
	/* what if its open in default distributor mode then it should not update cart - IMPORTANT */
	if(myPreLoginCart!=undefined && myPreLoginCart!="" && $.trim(newCartString)!="")
		returnString = $.trim(newCartString);
	return returnString;
}
function validateUserWebTop(){
	masterform_id=$('#userFormId').val();
	if($.trim(instanceId)==''){
		instanceId=$("#txtInstanceId_div").text()==""?$("#txtInstanceId").val():$("#txtInstanceId_div").text();
	}
	var userid=$.trim($('#userid_temp').val());
	var confData=$.trim($('#confData').val());
	if($.trim(userid)=="" && $.trim(confData)==""){
		$('#errmsg').text(multilingualKeyValue('145','34'));     /* "Please enter Login ID and Password" */
		$('#errmsg').show();
		$('#userid_temp').css("border-color","red");
		$('#confData').css("border-color","red");
		return false;
	}
	if($("#rememberMe").is(":checked")){
		store.set('userid',userid);
		store.set('confData',confData);
	}
	else{
		store.set('userid',null);
		store.set('confData',null);
	}
	if(userid == ''){
		$('#errmsg').text(multilingualKeyValue('277','34'));/* Please Enter Login ID.txt37 */
		$('#errmsg').show();
		$('#userid_temp').css("border-color","red");	
		return false;
	}
	else if(confData == ''){
		$('#errmsg').hide();
		$('#errmsg').text(multilingualKeyValue('285','34'));/*  Please Enter Password.txt2 */
		$('#errmsg').show();
		$('#userid_temp').css("border-color","#dadada");
		$('#confData').css("border-color","red");	
		return false;
	}
	else{
		$('#errmsg').hide();
		$('#userid_temp').css("border-color","#dadada");
		$('#confData').css("border-color","#dadada");		
	}
	
	var form = document.createElement("form");
	form.className = "hidden";
	form.method = "POST";
	form.action = "/SMBPortal/Login?serviceid=1"; 
	form.id = "login_form";
	form.acceptCharset = "UTF-8";

	var element = document.createElement("input"); 
	element.name="commit";
	element.id="login_btn_form";
	element.value="LOGIN";
	element.type="submit";
	form.appendChild(element);

	var element1 = document.createElement("input"); 
	element1.name="utf8";
	element1.value="ÃƒÂ¢Ã…â€œÃ¢â‚¬Å“";
	form.appendChild(element1);

	var element2 = document.createElement("input"); 
	element2.name="authenticity_token";
	element2.value="QwqcjRtoIiOj76oXBLgOC6LfXIlxPxJqCVSPHezK6ak=";
	form.appendChild(element2);

	var element3 = document.createElement("input"); 
	element3.name="channel";
	element3.value="1";
	form.appendChild(element3);

	var element4 = document.createElement("input"); 
	element4.name="appid";
	element4.value="306";
	form.appendChild(element4);

	var element5 = document.createElement("input"); 
	element5.name="loginType";
	element5.value="27";
	form.appendChild(element5);

	var element6 = document.createElement("input"); 
	element6.name="txtInstanceId";
	element6.value=instanceId;
	form.appendChild(element6);

	var element7 = document.createElement("input"); 
	element7.name="accountname";
	element7.value=userid;
	form.appendChild(element7);

	var element8 = document.createElement("input"); 
	element8.name="password";
	element.type="password";
	element8.value=confData;
	form.appendChild(element8);
	
	document.body.appendChild(form);

	form.submit();
	return true;
	
}

function loginAfterValidate(orgID,masterform_id,userId,confData){
	//log(orgID+"..masterform_id.."+masterform_id+"..userId.."+userId+"..confData.."+confData);
	$('<form name="loginForm" method="post" action="/EForms/loginAction.do?subAction=ValidateUser" enctype="multipart/form-data"><input name="userid" value="'+userId+'"><input name="confData" value="'+confData+'"><input name="orgId" value="'+orgID+'"><input name="formId" value="'+masterform_id+'"></form>').appendTo('body').submit();
}

function signupUser(){
	//log("orgID>> "+orgID+" UsrFormId>> "+UsrFormId);
	var txtSignupLink=$("#txtSignupLink_div").text();
	if(txtSignupLink!=="null" && txtSignupLink!==""){
		$('#RegisterUseriframe').attr('src',txtSignupLink);
		$('#RegisterUser').modal();
		$('body').css('overflow','hidden');
	}
	else{
		if(isNewRegistration){
			clearValues();
			$("#isMinorNo").prop("checked",true);
			openNewRegistrationModal();
		}
		else{
			$('#signUpUser').attr('src',window.location.protocol+"//"+window.location.hostname+"/EForms/configuredHtml/"+orgID+"/"+UsrFormId+"/application.html?instanceId="+instanceId);
			$('#Registermodal').modal();
			$('#Registermodal').css('overflow','hidden');
		}
		$('body').css('overflow','hidden');
		/* $('html, body').animate({ scrollTop: 0 }, 'slow'); */
	}
	hitAnalyticsCheck("Signup","User","Clicked");
	setTimeout(function() {
		onSignUp();
	}, 500);
	setTimeout(function() {
		appendPasswordRules();
		changePhoneNumberMaxLength();
	}, 1500);
}
function openloginfromsignupUser(){
	$('.marketplace-wrp').css('padding','0px');
	window.parent.$('#Registermodal').click();
	var txtLoginLink=window.parent.$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!=="")
		document.location.href=txtLoginLink;
	else		
		window.parent.checkMyPage();/* $('#loginmodal').modal(); */
}
function opensignupfromlogin(){
	$('.marketplace-wrp').css('padding','0px');
	/* $('body').css('overflow','hidden'); */
	window.parent.$('#loginmodal').click();
	window.parent.$('#Registermodal').modal();
	$('html, body').animate({ scrollTop: 0 }, 'slow');
}
function signupDistributer(){
	if(isNewOrgRegistration){
		userTypesOrg="Distributor";
		$("#signUpTypes").html("");
		$("#signUpTypes").append(multilingualKeyValue('313','34'));
		clearValues();
		openNewOrgRegistrationModal();
		$('#txtOrganizationWebsiteOrg').parent().removeClass('mandTxt');   /* added for jobs CR */
		$('body').css('overflow','hidden');
		$('#orgRegistration .iaminstitute .selName').css({'width': '79%', 'text-overflow': 'ellipsis', 'overflow': 'hidden', 'white-space': 'nowrap'});
	}
	//log("orgID>> "+orgID+" OrgFormId>> "+OrgFormId);
	else{
		$('#RegisterOrgmodal').removeAttr('style');
		$('#signUpOrg').attr("src",window.location.protocol+"//"+window.location.hostname+"/EForms/configuredHtml/"+orgID+"/"+OrgFormId+"/application.html?instanceId="+instanceId);
		$('#signUpOrg').attr("data-user","Distributor");
		$('#RegisterOrgmodal').modal();
		/* $('body').css('overflow','hidden'); */
		$('.orglabel').text(multilingualKeyValue('313','34'));/* "Sign Up as Distributor" */
		$('#RegisterOrgmodal').css('overflow','hidden');
		/* $('html, body').animate({ scrollTop: 0 }, 'slow');	 */
	}
	if(isNewInstituteFieldRequired){
		$(".instaData").removeClass("hidden");
	}
	else{
		$(".instaData").addClass("hidden");
	}
	setTimeout(function() {
			appendPasswordRules();
			checkCountryOrg(defaultCountry,false);
			changePhoneNumberMaxLength();
	}, 1500);
}
function signupPublisher(){
	if(isNewOrgRegistration){
		userTypesOrg="Publisher";
		$("#signUpTypes").html("");
		$("#signUpTypes").append(multilingualKeyValue('314','34'));
		clearValues();
		$('#txtOrganizationWebsiteOrg').parent().removeClass('mandTxt');   /* added for jobs CR */
		openNewOrgRegistrationModal();
		$('body').css('overflow','hidden');
	}
	else{
		$('#RegisterOrgmodal').removeAttr('style');
		$('#signUpOrg').attr("src",window.location.protocol+"//"+window.location.hostname+"/EForms/configuredHtml/"+orgID+"/"+OrgFormId+"/application.html?instanceId="+instanceId);
		$('#signUpOrg').attr("data-user","Publisher");
		$('#RegisterOrgmodal').modal();
		/* $('body').css('overflow','hidden'); */
		$('.orglabel').text(multilingualKeyValue('314','34'));/* iHUB.multilingual.gmv('txt7') "Sign Up as Publisher"*/
		$('#RegisterOrgmodal').css('overflow','hidden');
		/* $('html, body').animate({ scrollTop: 0 }, 'slow'); */
	}	
	setTimeout(function() {
		appendPasswordRules();
		changePhoneNumberMaxLength();
		checkCountryOrg(defaultCountry,true);
	}, 1500);
}
function checkMyPage(showMsg){
	var url=iHUB.url.get();
	$('#errmsg').hide();		
	$('#userid_temp').css("border-color","#dadada");		
	$('#confData').css("border-color","#dadada");
	store.del('txtUsrRole');
	store.del('disPubDetails');
	store.del('txtProductIDs');
	store.del('distributorProductDiscountQtyDetails');
	setMyPreLoginParameter();
	userDetails=getCookieValue('session');
	if(userDetails!=undefined){
		var vals=userDetails.split('@~@');
		$.ajax({ 
			type: "POST",
			url: url,
			data: {
				oID:vals[0],
				fID:vals[1],
				a:"logout",
				UID:vals[2]
			}
		});
	}
	store.set('isRefreshed','false');
	store.set('isLearnerFirstTime','true');
	store.set('externalLoginsFirstTime','true');
	store.set('showConsentOnLoginFirstTime','true');
	var txtLoginLink=$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!==""){
		document.location.href=txtLoginLink;
	}
	else{
		/* $('body').css('overflow','hidden'); */
		$('#loginmodal').find('.firstSucMessage').remove();
		if(showMsg!=undefined){
			if(showMsg){
				$('#loginmodal').find('.firstSucMessage').remove();
				$('#loginmodal').find('.modal-body').before('<div class="firstSucMessage"><h3 class="greencolor msgdisp align-center semibold margin0px" data-a"322" data-b="You have successfully signed up. Login to continue">'+multilingualKeyValue('322','34')+'</h3></div>');
			}
		}
		$('#loginmodal').find('#showPreMessage').addClass('hidden');
		if(isNewLoginSignUp)
			openNewLoginSlide();
		else
			$('#loginmodal').modal();	
	}
}
jQuery(window).on('load',function(){
	setTimeout(function(){
		loginpopup();
	},1000);
}); 	
function loginpopup(){
	var query = window.location.search.substring(1);
	queryNew=query.split("&");
	for(var i=0;i<queryNew.length;i++){
		if(queryNew[i].split("=")[0]=='Check'){
			setMyPreLoginParameter();
			var txtLoginLink=$("#txtLoginLink_div").text();
			if(txtLoginLink!=="null" && txtLoginLink!=="")
				document.location.href=txtLoginLink;
			else		
				checkMyPage();/* $('#loginmodal').modal(); */	
		}
	}
}
/* function externalLogin(authType){
	var instanceID="";
	if(instanceId=="" || masterform_id=="" || orgID=="" || orgID==undefined || masterform_id==undefined){
		var sPageURL = decodeURIComponent(window.location.search.substring(1)),
		sURLVariables = sPageURL.split('&'),
		sParameterName,
		i;
		sParameterName = sURLVariables;
		for(var i=0; i<sParameterName.length;i++){
			if (sParameterName[i].split('=')[0] === 'instanceId') {
				instanceID=sParameterName[i].split('=')[1];
			}
		}
		masterform_id=$('#formId').val();
		orgID=$('#orgId').val();
	}
	else
		instanceID=instanceId;
	window.open(window.location.protocol+"//"+window.location.hostname+"/EForms/EFormsAuthentications?authType="+authType+"&formId="+masterform_id+"&orgId="+orgID+"&txtInstanceId="+instanceID,"_self");
} */
/* function ionLogin(){
	var instanceID="";
	if(instanceId=="" || masterform_id=="" || orgID=="" || orgID==undefined || masterform_id==undefined){
		var sPageURL = decodeURIComponent(window.location.search.substring(1)),
		sURLVariables = sPageURL.split('&'),
		sParameterName,
		i;
		sParameterName = sURLVariables;
		for(var i=0; i<sParameterName.length;i++){
			if (sParameterName[i].split('=')[0] === 'instanceId') {
				instanceID=sParameterName[i].split('=')[1];
			}
		}
		masterform_id=$('#formId').val();
		orgID=$('#orgId').val();
	}
	else
		instanceID=instanceId;
	window.open(window.location.protocol+"//"+window.location.hostname+"/EForms/jsp/SMBAuthentication.jsp?formId="+masterform_id+"&orgId="+orgID+"&txtInstanceId="+instanceID,"_self");
} */
function externalLogin(authType){
	var url = "/iDH/ExternalLogin";
	var currentUrl = $.trim(window.location.href).split("#")[0];
	var action = "";
	if(currentUrl.includes("action="+redirectToLx)){
		currentUrl = currentUrl.split("?")[1];
		action = redirectToLx;
	}
	if(currentUrl.includes("action="+redirectToIDP)){
		currentUrl = currentUrl.split("?")[1];
		action = redirectToIDP;
	}
	var rememberMe = "0";
	if(returnTrueSelector("#rememberMeN").is(":checked")){
		rememberMe = "1";
	}
	$.ajax({
		type: "POST",
		url: url,
		data: {
			subAction:'externallogin',
			orgID:orgID,
			txtInstanceId:instanceId,
			masterform_id:masterform_id,
			authType:authType,
			refererUrl:currentUrl,
			rememberMe:rememberMe,
			action : action,
			preLoginCart : getPreLoginCartValues()
		},
		dataType: "json",
		success: function(result){
			var res = JSON.stringify(result);
			var obj = JSON.parse(res);
			if(obj.msg == 'success' && $.trim(obj.url) != ""){
				window.location = obj.url;
			}else{
				alert(multilingualKeyValue('323','34'));
			}
		},error: function(x, e){
			if(e=="parsererror" && x.responseText=="session is not avaliable"){
				$('#toaster').html('');
				iHUB.toaster.redMessageToaster(multilingualKeyValue('1','34'));
				createLoginLoader();
				fnLogoutICMP('1');
				return false;
			}
		}
	});
}

 function ionLogin(){
	var url = "/iDH/ExternalLogin";
	var currentUrl = $.trim(window.location.href).split("#")[0];
	var dailyPassword = "";
	var action = "";
	if(currentUrl.includes("action="+redirectToLx)){
		currentUrl = currentUrl.split("?")[1];
		action = redirectToLx;
	}
	if(currentUrl.includes("action="+redirectToIDP)){
		currentUrl = currentUrl.split("?")[1];
		action = redirectToIDP;
	}
	var rememberMe = "0";
	if(returnTrueSelector("#rememberMeN").is(":checked")){
		rememberMe = "1";
	}
	$.ajax({
		type: "POST",
		url: url,
		data: {
			subAction:'externallogin',
			orgID:orgID,
			txtInstanceId:instanceId,
			masterform_id:masterform_id,
			authType:'ionLogin',
			refererUrl:currentUrl,
			rememberMe:rememberMe,
			action:action,
			preLoginCart : getPreLoginCartValues()
		},
		dataType: "json",
		success: function(result){
			var res = JSON.stringify(result);
			var obj = JSON.parse(res);
			if(obj.msg == 'success' && $.trim(obj.url) != ""){
				window.location = obj.url;
			}else{
				alert(multilingualKeyValue('323','34'));
			}
		},
		error: function(x, e){
			if(e=="parsererror" && x.responseText=="session is not avaliable"){
				$('#toaster').html('');
				iHUB.toaster.redMessageToaster(multilingualKeyValue('1','34'));
				createLoginLoader();
				fnLogoutICMP('1');
				return false;
			}
		}
	});
	
}
function addtoCartEventHandler(productId,productName,productPrice,slotId,isStep2,isMultiSlot,customFormId){
	if($.trim(customFormId)!=""){
		/* var productformdata=productId+"@@"+productName+"@@"+productPrice+"@@"+customFormId; */
		var data=$.trim(store.get('customFormDataforPreloginCart'))!=""?$.trim(store.set('customFormDataforCart'))+","+productId:productId;
		store.set('customFormDataforPreloginCart',data);
	}
	var message="";
	if($('#txtCart').val()==""){
		$('#txtCart').val(productId);
		$('#myPreLoginCart').val(productId+"~"+"1"+"~"+productPrice+"~"+productPrice+"~"+"cur");
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		miniCart();
		$('#toaster').html('');
		iHUB.toaster.blackMessageToaster(productName+" "+multilingualKeyValue('227','34'));
		if($('#myRequestMicrosite').length>0){	
			document.getElementById('myRequestMicrosite').contentWindow.postMessage("addToCartForMicrositeResponse@~@"+productId+"@~@"+message+"@~@"+$('#productsInCart').val(),"*");
		}
		else
			return "addToCartForMicrositeResponse@~@"+productId+"@~@"+message+"@~@"+$('#productsInCart').val();
	}
	else{
		var checkcart=$('#txtCart').val().split(',');
		chk=0;
		for(var i=0;i<checkcart.length;i++){
			if(checkcart[i].split('~')[0]==productId){
				chk=1;
			}
		}
		if(chk==0){
			$('#txtCart').val($('#txtCart').val()+","+productId);
			$('#myPreLoginCart').val($('#myPreLoginCart').val()+","+productId+"~"+"1"+"~"+productPrice+"~"+productPrice+"~"+"cur");
			store.set('krt',$('#txtCart').val());
			store.set('prelogincart',$('#myPreLoginCart').val());
			miniCart();
			$('#toaster').html('');
			iHUB.toaster.blackMessageToaster(productName+" "+multilingualKeyValue('227','34'));
			if($('#myRequestMicrosite').length>0){
				document.getElementById('myRequestMicrosite').contentWindow.postMessage("addToCartForMicrositeResponse@~@"+productId+"@~@"+message+"@~@"+$('#productsInCart').val(),"*");
			}
			else if($('#micrositeContent').length>0 && (!$('#micrositeContent').hasClass('hidden'))){
				if(productId!="" && message!="" && $.trim($('#productsInCart').val())!=""){
					$('#productsInCart').val($.trim($('#productsInCart').val()));
					if (typeof createCustomAddToCartResponseHandler == 'function'){ 
						createCustomAddToCartResponseHandler(productId, message);
					}else{
						createAddToCartResponseHandler(productId, message);
					}
				}
			}
		}
		else{
			$('#toaster').html('');
			iHUB.toaster.blackMessageToaster(productName+" "+multilingualKeyValue('213','34'));
		}
	}
	hideLoader_iDH();
	miniCart();
	hitAnalyticsCheck("Purchase","Add to cart",productId+" - "+productName);
}
function buyNowEventHandler(productId,productName,productPrice,slotId,isStep2,isMultiSlot,customFormId){
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables.length;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}	
	}// check for customFormId and then add cart			
	if($.trim(customFormId)==""){
		var checkcart=$('#txtCart').val().split(',');		
		var chk=0;		
		for(var i=0;i<checkcart.length;i++){		
			if(checkcart[i].split('~')[0]==productId){		
				chk=1;		
			}
		}
		if(chk==0){
			if($('#txtCart').val()=="" || $('#txtCart').val()==undefined ){
				$('#txtCart').val($('#txtCart').val()+","+productId/*+"~"+"1"+"~"+productPrice+"~"+productPrice+"~"+"cur"*/);
				$('#myPreLoginCart').val(productId+"~1~"+productPrice+"~"+productPrice+"~cur");
			}
			else{
				$('#txtCart').val($('#txtCart').val()+","+productId/*+"~"+"1"+"~"+productPrice+"~"+productPrice+"~"+"cur"*/);
				$('#myPreLoginCart').val($('#myPreLoginCart').val()+","+productId+"~1~"+productPrice+"~"+productPrice+"~cur");
			}
		}
	}
	/* if product present in cart then also buyNow event should call after login (10/02/2020)*/
	/* store.set('preloginActivity','purchaseActivity("buyNow","'+productId+'","1","","'+productPrice+'","'+productName+'")'); */
	store.set('preloginActivity','buyNowEventHandler("'+productId+'","'+productName+'","'+productPrice+'","",false,"'+isMultiSlot+'","'+customFormId+'")');
	store.set('krt',$('#txtCart').val());
	setMyPreLoginParameter();
	var txtLoginLink=$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!=="")
		document.location.href=txtLoginLink;
	else		
		checkMyPage();/* $('#loginmodal').modal(); */
	hideLoader_iDH();
	hitAnalyticsCheck("Purchase","Buy now",productId+" - "+productName);
}
function changeQuantityEventHandler(productId,productName,productQuantity,unitPrice){
	var cartProducts=$('#myPreLoginCart').val().split(",");
	/* $('#txtCart').val(''); */
	$('#myPreLoginCart').val('');
	var price1=unitPrice*productQuantity;
	$(".productSubTotalPrice").text(price1);
	for(var i=0;i<cartProducts.length;i++){
		if(cartProducts[i].split("~")[0]==productId){
			cartProducts[i]=cartProducts[i].split("~")[0]+"~"+productQuantity+"~"+cartProducts[i].split("~")[2]+"~"+Number(cartProducts[i].split("~")[2]*productQuantity)+"~"+cartProducts[i].split("~")[4];
			if($('#myPreLoginCart').val()==""){
				$('#myPreLoginCart').val(cartProducts[i]);
			}
			else{
				$('#myPreLoginCart').val($('#myPreLoginCart').val()+","+cartProducts[i]);
			}
		}
		else{
			if($('#myPreLoginCart').val()==""){
				$('#myPreLoginCart').val(cartProducts[i]);
			}
			else{
				$('#myPreLoginCart').val($('#myPreLoginCart').val()+","+cartProducts[i]);
			}
		}				
	}
	store.set('krt',$('#txtCart').val());
	store.set('prelogincart',$('#myPreLoginCart').val());
	$('#myPreLoginCart').val($('#myPreLoginCart').val());
	if (typeof organizeCartOffline == 'function')
		organizeCartOffline();
	$('#toaster').html('');
	/* Quantity changed. : mkpc85 */
	iHUB.toaster.blackMessageToaster(multilingualKeyValue('166','34'));
	hitAnalyticsCheck("Purchase","Change quantity",productId+" - "+productName);
}
function proceedToPayEventHandler(){
	var message="";
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}
	}
	if($('#txtCart').val()!=""){
		$('#myPreLoginCart').val($('#myPreLoginCart').val());
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	else{
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	hitAnalyticsCheck("Purchase","Proceed to pay","-");	
}
function proceedToPayPostBuyNowEventHandler(productId,productName,productPrice,quantity){
	var message="";
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables.length;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}	
	}
	$('#myPreLoginCart').val($('#myPreLoginCart').val());
	/* window.localStorage.krt=$('#txtCart').val()+","+productId; */
	store.set('krt',$('#txtCart').val()+","+productId);
	setMyPreLoginParameter();
	var txtLoginLink=$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!=="")
		document.location.href=txtLoginLink;
	else		
		checkMyPage();/* $('#loginmodal').modal(); */
	hitAnalyticsCheck("Purchase","Proceed to pay post buy now",productId+" - "+productName);
}
function subscribeInitiateEventHandler(productId,productName,isStep2,customFormId){
	store.set('preloginActivity','subscribeInitiateEventHandler("'+productId+'","'+productName+'",false,"'+customFormId+'")');
	store.set('krt',$('#txtCart').val());
	store.set('prelogincart',$('#myPreLoginCart').val());
	setMyPreLoginParameter();
	var txtLoginLink=$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!=="")
		document.location.href=txtLoginLink;
	else		
		checkMyPage();/* $('#loginmodal').modal(); */	
	
	tooltipHoverFocus();
	hitAnalyticsCheck("Purchase","Initiate Subscription",productId+" - "+productName);	
}
function subscribeEventHandler(productId,productName){
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}
	}
	if($('#txtCart').val()!=""){
		$('#myPreLoginCart').val($('#myPreLoginCart').val());
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	else{
		$('#myPreLoginCart').val("");
		store.del('krt');
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	hideLoader_iDH();
	hitAnalyticsCheck("Purchase","Subscribe",productId+" - "+productName);
}
function activateLicenseInitiateEventHandler(productId,productName,productPrice,productCurrency,publisherId,publisherName,isStep2,customFormId){
	store.set('preloginActivity','activateLicenseInitiateEventHandler("'+productId+'","'+productName+'","'+productPrice+'","'+productCurrency+'","'+publisherId+'","'+publisherName+'",false,"'+customFormId+'")');
	store.set('krt',$('#txtCart').val());
	store.set('prelogincart',$('#myPreLoginCart').val());
	setMyPreLoginParameter();
	var txtLoginLink=$("#txtLoginLink_div").text();
	if(txtLoginLink!=="null" && txtLoginLink!=="")
		document.location.href=txtLoginLink;
	else		
		checkMyPage();/* $('#loginmodal').modal(); */
	hitAnalyticsCheck("Purchase","Initiate license activation",productId+" - "+productName);
}
function activateLicenseEventHandler(productId,productName,licenceCode){
	var message="";
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}
	}
	if($('#txtCart').val()!=""){
		$('#myPreLoginCart').val($('#myPreLoginCart').val());
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	else{
		$('#myPreLoginCart').val("");
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */
	}
	hideLoader_iDH();
	$('#activemodal').click();
	hitAnalyticsCheck("Purchase","Activate license",productId+" - "+productName);
}
function openActivateProductModal(){
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
	sURLVariables = sPageURL.split('&'),
	sParameterName;
	for (var i=0; i<sURLVariables;i++){
		if(sURLVariables[i].split("=")[0] == 'instanceId'){
			instanceId=sURLVariables[i].split("=")[1];
		}
	}
	if($('#txtCart').val()!=""){
		$('#myPreLoginCart').val($('#myPreLoginCart').val());
		store.set('krt',$('#txtCart').val());
		store.set('prelogincart',$('#myPreLoginCart').val());
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */	
	}
	else{
		$('#myPreLoginCart').val("");
		setMyPreLoginParameter();
		var txtLoginLink=$("#txtLoginLink_div").text();
		if(txtLoginLink!=="null" && txtLoginLink!=="")
			document.location.href=txtLoginLink;
		else		
			checkMyPage();/* $('#loginmodal').modal(); */
	}
	store.set('preloginActivity','openActivateProductModal()');
}
function activateProductModalPre(licenceCode){
	$('.activeProductInfoWrong').addClass('hidden');
	$('.activeProductInfo').addClass('hidden');
	$('#activateProductModal').find('.modal-footer').addClass('hidden');
	$('#activateProductModal').find('.modal-footer a.hubBTn').attr('onclick','');
	var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH*/
	if($.trim(licenceCode)!="" && licenceCode!=undefined && licenceCode!="undefined" && licenceCode!=null && licenceCode!="null"){
		var sPageURL = decodeURIComponent(window.location.search.substring(1)),	
		sURLVariables = sPageURL.split('&'),
		sParameterName;
		for (var i=0; i<sURLVariables;i++){
			if(sURLVariables[i].split("=")[0] == 'instanceId'){
				instanceId=sURLVariables[i].split("=")[1];
			}
		}
		if($('#txtCart').val()!=""){
			$('#myPreLoginCart').val($('#myPreLoginCart').val());
			store.set('krt',$('#txtCart').val());
			store.set('prelogincart',$('#myPreLoginCart').val());
			setMyPreLoginParameter();
			var txtLoginLink=$("#txtLoginLink_div").text();
			if(txtLoginLink!=="null" && txtLoginLink!=="")
				document.location.href=txtLoginLink;
			else		
				checkMyPage();/* $('#loginmodal').modal(); */	
		}
		else{
			$('#myPreLoginCart').val("");
			setMyPreLoginParameter();
			var txtLoginLink=$("#txtLoginLink_div").text();
			if(txtLoginLink!=="null" && txtLoginLink!=="")
				document.location.href=txtLoginLink;
			else		
				checkMyPage();/* $('#loginmodal').modal(); */
		}
	}
	else{
		$('.activeProductInfoWrongTxt span:nth-child(1)').text(multilingualKeyValue('41','34')+'.');
		$('.activeProductInfoWrongTxt span:nth-child(2)').text('');
		$('.activeProductInfoWrong').removeClass('hidden');
		$('#activateProductModal').find('.modal-footer').addClass('hidden');
	}
}
function getCurrencyDetails(){
	return currencyDetails;
}
function getGlobalCategories(){
	return globalCategories;
}
function getAllInstanceDetails(){
	return allInstanceDetails;
}
function getLanguageDetails(){
	return languageDetails;
}
function preLoginAction(obj){
	if($.trim(obj.instanceDetails.defaultLanguageId)!="")
		languageId=$.trim(obj.instanceDetails.defaultLanguageId);
	else
		languageId="1";
	if(!jQuery.isEmptyObject(obj.languageDetails)){		
		languageDetails=obj.languageDetails;
	}
	if(!jQuery.isEmptyObject(obj.instanceDetails)){
		allInstanceDetails=obj.instanceDetails;
		defaultLanguageId=allInstanceDetails.defaultLanguageId;
		defaultTimeZone=allInstanceDetails.defaultTimeZone;
		loadPrimaryInstanceDetails(obj.instanceDetails);
	}
	if(!jQuery.isEmptyObject(obj.levels)){
		var levels=obj.levels[languageId]["subLevels"];
		$('#product_catlog').data('levelDetails',levels);
		/* getCategoryDetails(levels); */	
		var categoryLevelDetails=$('#product_catlog').data('levelDetails');
		if($('.staticMenu').length > 0){		
			$('#product_catlog').on('mouseenter',function(){
				if($.trim($('.courseMenu_drop').html())=="" || $.trim($('#openCategory .list-group').html())==""){
					getCategoryDetails(categoryLevelDetails);
				}
			});
			buildMmenu();
			if(jQuery.isEmptyObject(levels)){
				$("ul[id='mobUi']").remove();
			}
		}
		else
			getCategoryDetails(categoryLevelDetails);
	}
	if(!jQuery.isEmptyObject(obj.organizationDetails)){
		getPublishers(obj.organizationDetails);
	}
	if(!jQuery.isEmptyObject(obj.categories)){
		getProductTypeDetails(obj.categories[languageId]);
	}
	if(!jQuery.isEmptyObject(obj.currencyDetails)){
		currencyDetails=obj.currencyDetails;
	}
}
function loadPrimaryInstanceDetails(objPre){
	var cookieConsentReqd=$.trim(objPre.cookieConsentReqd);
	var isOtpRequired=$.trim(objPre.isOtpRequired);
	store.set('isOtpRequired',isOtpRequired);
	$('.policy_alert').hide();
	if($.trim(cookieConsentReqd)!="" && $.trim(cookieConsentReqd)=="1"){
		var policy=$.trim(store.get('cookiePolicy_'+orgID+'_'+instanceId));
		if($.trim(policy)!="" && $.trim(policy)=="1")
			$('.policy_alert').hide();
		else
			$('.policy_alert').show();
	}
	globalModuleVisibility=objPre.moduleVisibility;
	isEmailVerificationReq=objPre.isEmailVerificationReq;
	store.set('isEmailVerificationReq',isEmailVerificationReq);
	/* added for job CR */
	isJobVisible=objPre.isJobVisible;
	store.set('isJobVisible',isJobVisible);
	isRichProfile=objPre.isRichProfile;
	store.set('isRichProfile',isRichProfile);
	/* added for job CR */
	UsrFormId=$('#userFormId').val();
	masterform_id=UsrFormId;
	OrgFormId=$('#orgFormId').val();
	ProductFormId=$('#productFormId').val();
	OrderFormId=$('#orderFormId').val();
	$('#FooterContent,#IndexContent').removeClass('hidden');
	if($.trim(objPre.tabVisibility)!="")
		gblTabVisibility=objPre.tabVisibility;
	if($.trim(objPre.userRegistrationEditLink)!="")
		userRegistrationEditLink=objPre.userRegistrationEditLink;
	if($.trim(objPre.postLoginScreen)!="")
		globalPostLoginScreen=objPre.postLoginScreen;	
	if(objPre.portalTitle!=null && objPre.portalTitle!=undefined){
		if($.trim(document.title)=="")
			document.title=objPre.portalTitle;
	}
	if(objPre.portalIcon!=null && objPre.portalIcon!=undefined)
		$('#favicon').attr('href',objPre.portalIcon);
	languageIds=$.trim(objPre.languageIds);
	if(store.get('languageId')==null || store.get('languageId')==''){
		store.set('languageId','1');
		languageId='1';
		if($.trim(languageIds)!=""){
			if(!isNaN($.trim($.trim(languageIds).split(",")[0]))){
				languageId=$.trim($.trim(languageIds).split(",")[0]);
				languageName=languageDetails[languageId]["lanname"];
				store.set('languageId',languageId);
				store.set('languageName',languageName);
			}
		}
	}
	else
		languageId=store.get('languageId');
	if($('#languageId_div').length==0)			
		$('body').append('<div id="languageId_div" class="hidden"></div>');		
	$('#languageId_div').text(languageId);	
	$('#languageId').val(languageId);
	var txtwishlist=$.trim($('#txtUserWishlist').val());
	store.set('myWishlistProducts',txtwishlist);
	txtLoginLink=$.trim(objPre.txtLoginLink);
	txtSignupLink=$.trim(objPre.txtSignupLink);
	logoutURL=$.trim(objPre.logoutURL);
	googleAnalyticsId=$.trim(objPre.googleAnalyticsId);
	if($.trim(googleAnalyticsId)=="" && $('#googleAnalyticsId_div').length!=0 && $.trim($('#googleAnalyticsId_div').val())!="")		
		googleAnalyticsId=$.trim($('#googleAnalyticsId_div').val());
	
	if(objPre.platformPublisherId!=undefined && objPre.platformPublisherId!=""){	
		var platformPublisherId=objPre.platformPublisherId;
		$('#platformPublisherId_div').val('');
		$('#platformPublisherId_div').val(platformPublisherId);
	}
	if(objPre.newPaymentApproach!=undefined && objPre.newPaymentApproach!=""){
		store.set('newPaymentApproach',objPre.newPaymentApproach);
		newPaymentApproach=$.trim(window.store.get('newPaymentApproach'));
	}
	if(objPre.orderCalculationPath!=undefined && objPre.orderCalculationPath!=""){			
		store.set('orderCalculationPath',objPre.orderCalculationPath);
		orderCalculationPath=$.trim(window.store.get('orderCalculationPath'));
	}
	if(objPre.giftToFriendRequired!=undefined && objPre.giftToFriendRequired!=""){			
		store.set('giftToFriendRequired',objPre.giftToFriendRequired);
		giftToFriendRequired=$.trim(window.store.get('giftToFriendRequired'));
	}
	if(objPre.digitalContractRequired!=undefined && objPre.digitalContractRequired!=""){			
		store.set('digitalContractRequired',objPre.digitalContractRequired);
		digitalContractRequired=$.trim(window.store.get('digitalContractRequired'));
	}
	if(objPre.isPostPaidLicenseGenerationAllowed!=undefined && objPre.isPostPaidLicenseGenerationAllowed!=""){			
		store.set('isPostPaidLicenseGenerationAllowed',objPre.isPostPaidLicenseGenerationAllowed);
		isPostPaidLicenseGenerationAllowed=$.trim(window.store.get('isPostPaidLicenseGenerationAllowed'));
	}
	if(objPre.isSelfGenerationAllowed!=undefined && objPre.isSelfGenerationAllowed!=""){			
		store.set('isSelfGenerationAllowed',objPre.isSelfGenerationAllowed);
		isSelfGenerationAllowed=$.trim(window.store.get('isSelfGenerationAllowed'));
	}		
	if(objPre.typeOfHub!=undefined && objPre.typeOfHub!=""){			
		store.set('typeOfHub',objPre.typeOfHub);
		typeOfHub=$.trim(window.store.get('typeOfHub'));
		log("typeOfHub:"+typeOfHub);
	} 
	if(objPre.newCartRequired!=undefined && objPre.newCartRequired!=""){			
		store.set('newCartRequired',objPre.newCartRequired);
		newCartRequired=$.trim(window.store.get('newCartRequired'));
	}
	if(objPre.isNewOrgRegistration!=undefined && objPre.isNewOrgRegistration!=""){
		if(objPre.isNewOrgRegistration==1){
			isNewOrgRegistration=true;
		}
		log("isNewOrgRegistration:"+isNewOrgRegistration);
	}
	if(objPre.isNewInstituteFieldRequired!=undefined && objPre.isNewInstituteFieldRequired!=""){
		if(objPre.isNewInstituteFieldRequired==1){
			isNewInstituteFieldRequired=true;
		}
		log("isNewInstituteFieldRequired:"+isNewInstituteFieldRequired);
	}
	if(objPre.publisherPurchaseAllowed!=undefined && objPre.publisherPurchaseAllowed!=""){			
		store.set('publisherPurchaseAllowed',objPre.publisherPurchaseAllowed);
		publisherPurchaseAllowed=$.trim(window.store.get('publisherPurchaseAllowed'));
	}
	if(objPre.offlineOrderInvoiceGeneration!=undefined && objPre.offlineOrderInvoiceGeneration!=""){			
		store.set('offlineOrderInvoiceGeneration',objPre.offlineOrderInvoiceGeneration);
		offlineOrderInvoiceGeneration=$.trim(window.store.get('offlineOrderInvoiceGeneration'));
	}
	//added for TNCPOPUP
	if(objPre.platformTnC!=undefined && objPre.platformTnC!=""){			
		store.set('platformTnC',objPre.platformTnC);
		platformTnC=$.trim(window.store.get('platformTnC'));
	}
	$('.marketplace-wrp').removeClass('eform-wrp');
	$("#txtInstanceId").val(instanceId); /* yet to set */
	$("#txtLoginLink_div").text(txtLoginLink);
	$("#txtSignupLink_div").text(txtSignupLink);
	
	/* HEADER */
	$('#activities').on("click",function(){
		if($('#activities').hasClass('open'))
			$('#activities').removeClass('open');
		else
			$('#activities').addClass('open');
	});
	buildLanguageDropDowns();
	addLanguageDeatails();
	/* HEADER */
	checkForCustomLoginModal();
	/* CATALOGUE */
	var date_regex = /^(0[1-9]|1\d|2\d|3[01])\/(0[1-9]|1[0-2])\/(19|20)\d{2}$/;					
	$('#txtItemScheduledStartDate').on("change.dp",function (e) {
		if ((date_regex.test($('#txtItemScheduledStartDate').val()))) {
			checkDateConditionAndFilterSearch();
		}
	});
	$('#txtItemScheduledEndDate').on("change.dp",function (e) {
		if ((date_regex.test($('#txtItemScheduledEndDate').val()))) {
			checkDateConditionAndFilterSearch();
		}
	});						
	function checkDateConditionAndFilterSearch() {
		var startDate = "";
		var endDate = "";
		var a = $('#txtItemScheduledStartDate').val();
		if (a != null && a != "") {
			var dateS = a.slice(0, 2);
			var monthS = a.slice(3, 5);
			var yearS = a.slice(6, 10);
			startDate = new Date(yearS, monthS - 1, dateS);
			endDate = startDate;
		}
		var b = $('#txtItemScheduledEndDate').val();
		if (b != null && b != "") {
			var dateE = b.slice(0, 2);
			var monthE = b.slice(3, 5);
			var yearE = b.slice(6, 10);
			endDate = new Date(yearE, monthE - 1, dateE);
			if (a == null || a == ""){
				startDate = endDate;
			}
		}
		if (startDate != "" && startDate != null && endDate != "" && endDate != null) {
			if (startDate > endDate) {
				$('#toaster').html('');
				/* Please enter appropriate date : mkpc125 */
				iHUB.toaster.redMessageToaster(multilingualKeyValue('315','34'));
				if ($('span[data-filtered="txtItemScheduledEndDate"]').text() != "") {
					$('span[data-filtered="txtItemScheduledEndDate"]').children('i').click();
				}
				$('#txtItemScheduledEndDate').val('');
			} else {
				filterSearch();
			}
		}
	}
	$('.tabLi li').on("click",function() {
		$(this).addClass('active').siblings().removeClass('active');
	});
	$('.sortBy').on('click', function() {
		$('.sortBy').parent().removeClass('active');
		var sortBy = $(this).attr('data-search');
		$('.sortBy').each(function() {
			if ($(this).attr('data-search') == sortBy) {
				$(this).parent().addClass('active');
			}
		});
		$('input:radio[id="txtorderby"]').each(function() {
			if ($(this).attr('data-id') == sortBy)
				$(this).prop('checked', true);
			else
				$(this).prop('checked', false);
		});
		var searchType = "";
		var searchText = "";
		$('.yourSearch span').each(function() {
			if ($(this).attr('data-filtered') == "txtSearchText") {
				searchType = "search";
				searchText = $.trim($(this).text());
			} else {
				searchType = "filter";
			}
		});
		if (searchType == "filter") {
			filterSearch();
		} else {
			$('input:radio[id="txtorderby"]:checked').each(function() {
				filterSearch();
			});
		}
	});
	/* if($('#micrositeContent').length>0)
		instanceForMicrosite(userid,confData,remember);
	else */
		instancevalidated(userid,confData,remember);
	/* added for job CR */	
	try {
		if(typeof $('.dateTime_txt').datetimepicker == 'function'){
			$('.dateTime_txt').datetimepicker({
				format: 'DD/MM/YYYY',
				maxDate: new Date(),
				ignoreReadonly:true
				/* format: 'dd/mm/yyyy',
				startView:2,
				minView:2,
				autoclose:true */		
			});
		}
	}
	catch (e){
		log(e);
	}
	/* added for job CR */
	if($('#goToCatalogue').val() != undefined && $('#goToCatalogue').val() != "")
		goToCatalogueText=$('#goToCatalogue').val();
	else
		goToCatalogueText="Buy More";
	/* CATALOGUE */
}
function getCategoryDetails(categoryLevelDetails){
	/* var count=0;
	$.each(obj.subLevels, function(ik, iv) {
		count++;
	}); */
	if(!jQuery.isEmptyObject(categoryLevelDetails)){
		$('.courseMenu_drop').html("");
		$('.dropdown-menu-right').html("");
		$('#course_list .list-group').html("");
		level1ArrayN=[],level2ArrayN=[],level3ArrayN=[],level4ArrayN=[],level1ArrayV=[],level2ArrayV=[],level3ArrayV=[],level4ArrayV=[];
		var l1=0,l2=0,l3=0,l4=0;
		var val = categoryLevelDetails;
		var strMob4="";
		var strSearch="";
		if($('#createMobCatalog').siblings().attr('href')=="#mobUi"){
			$("ul[id='mobUi']").remove();
		}
		else{
			$("ul[id='mobUi']").remove();
			$('#createMobCatalog').after("<ul id=\"mobUi\"></ul>");
		}
		var countofLevel1=0;
		for (label in val) {
			var L = val[label];
			var levelName1=$.trim(L.levelName);
			var levelId1=$.trim(L.levelId);
			if(levelName1!="" && levelId1!=""){
				level1ArrayN.push(levelName1);
				level1ArrayV.push(levelId1);
				l1++;
			}
			var strLevel1="";
			if(countofLevel1==10){			
				strLevel1+="<li><a id=\"showMoreLevels\" style=\"text-align: center;\" class=\"noValue\" data-a='mkpc82' data-b='View More'><span class='lnkTrance' style='color:#13afeb;'>"+multilingualKeyValue('195','34')+"</span></a></li>";
			}
			if(countofLevel1 > 9){
				strLevel1+="<li data-submenu-id=\"submenu1-1Level"+levelId1+"\" class=\"hidden\">";
			}
			else{
				strLevel1+="<li data-submenu-id=\"submenu1-1Level"+levelId1+"\">";
			}			
			strLevel1+="<a style=\"white-space:normal\" data-level=\"txtLevel1\" class=\"categorySearch\" value=\""+levelId1+"\" onclick=\"lnk(this);\">"+levelName1+"</a>";
			strLevel1+="<div id=\"submenu1-1Level"+levelId1+"\" data-id=\""+levelName1+"\" data-catname=\""+levelName1+"\" class=\"popover\">";
			strLevel1+="<ul class=\"popover-content dropdown-menu mega-dropdown-menu row rel_amazon checksubmenu\" style=\"overflow-y:auto\">";
			strLevel1+="<li class=\"col-sm-4 firstColumn\"><ul></ul></li>";
			strLevel1+="<li class=\"col-sm-4 secondColumn\"><ul></ul></li>";
			strLevel1+="<li class=\"col-sm-4 thirdColumn\"><ul></ul></li>";
			strLevel1+="</ul></div></li>";			
			$('.courseMenu_drop').append(strLevel1);
			strSearch+="<li><a class=\"categorySearch\" value=\""+levelId1+"\" data-level=\"txtLevel1\" id=\"1Level"+levelId1+"\">"+levelName1+"<span class='selctdIcon hidden'></span></a></li>";
			var strFilterL1="<div class=\"checkbox nextLevel1\"><div class=\"checkbox panel-heading course_head 1Level"+levelId1+"\" style=\"padding:2px 10px !important;margin-bottom:6px;\"><label style=\"font-size: 13px !important;color:#666;width:86%;\"><input type=\"checkbox\" onclick=\"filterSearch();\" data-id=\"txtLevels\" data-level=\"txtLevel1\" value=\""+levelId1+"\"><span class=\"addCentre\" style='padding-top:0px;'>"+levelName1+"</span></label>";
			strFilterL1+="<i style=\"position: absolute;right: 13px;cursor:pointer;top:6px;\" class=\"fa fa-plus openNextLevel \"></i>";
			strFilterL1+="</div></div>";
			strFilterL1+="<div class=\"checkbox hidden\"><ul style=\"padding-left:10px\">";
			var strMob1="";
			strMob1+="<li class='mmenu_Bordr'> <a class=\"categorySearch\" href=\"#\" value=\""+levelId1+"\" onclick=\"lnk(this);\" data-level=\"txtLevel1\" >"+levelName1+"</a><ul id=\"submenuMobL1-1Level"+levelId1+"\"></ul></li>";
			$('ul#mobUi').append(strMob1);
			for (label in L) {
				if (label == "subLevels"){
					var L1 = L["subLevels"];
					var i=0;
					var count=0;
					for (label in L1){
						var L2 = L1[label];
						var levelName2=$.trim(L2.levelName);
						var levelId2=$.trim(L2.levelId);
						if(levelName2!="" && levelId2!=""){
							level2ArrayN.push(levelName2);
							level2ArrayV.push(levelId2);
							l2++;
						}
						var strLevel2="";
						strLevel2+="<li class=\"dropdown-header\" onclick=\"lnk(this);\" value=\""+levelId2+"\" style=\"cursor:pointer;\" data-level=\"txtLevel2\" id=\"submenu2-2Level"+levelId2+"\">"+levelName2+"</li>";/* strLevel2+="<li>&nbsp;</li>"; */			
						if(count%3==0){
							$('#submenu1-1Level'+levelId1).find('.firstColumn').find('ul').append(strLevel2);
						}
						else if(count%3==1){
							$('#submenu1-1Level'+levelId1).find('.secondColumn').find('ul').append(strLevel2);
						}
						else if(count%3==2){
							$('#submenu1-1Level'+levelId1).find('.thirdColumn').find('ul').append(strLevel2);
						}
						count++;
						strFilterL1+="<li class=\"\"><div><label style=\"margin-right: 26px;width:86%;\" class=\"darkgreyText\"><input type=\"checkbox\" onclick=\"filterSearch();\" class=\"2Level"+levelId2+" \" data-id=\"txtLevels\" data-level=\"txtLevel2\" value=\""+levelId2+"\"><span class=\"addCentre\">"+levelName2+"</span></label><i class=\"fa openNextLevel fa-plus \" style=\"position: absolute;right: 13px;padding-top: 4px;cursor:pointer;\"></i></div></li>";
						strFilterL1+="<li class=\"checkbox hidden\" style=\" margin-bottom: 5px;margin-top: 5px\"><ul style=\"padding-left:18px\">";
						var strMob2="";
						strMob2+="<li class='mmenu_Bordr'><a data-level=\"txtLevel2\" href=\"#\" value=\""+levelId2+"\" style=\"cursor:pointer;\" onclick=\"lnk(this);goBackButton();\" class=\"categorySearch\">"+levelName2+"</a><ul id=\"submenuMobL2-2Level"+levelId2+"\"></ul></li>";
						$('ul#submenuMobL1-1Level'+levelId1).append(strMob2);
						for (label in L2){
							if (label == "subLevels") {
								var L3 = L2["subLevels"];
								for (label in L3) {
									var L4 = L3[label];
									var levelName3=$.trim(L4.levelName);
									var levelId3=$.trim(L4.levelId);
									if(levelName3!="" && levelId3!=""){
										level3ArrayN.push(levelName3);
										level3ArrayV.push(levelId3);
										l3++;
									}
									var strLevel3="<li><a class=\"categorySearch\" value=\""+levelId3+"\" onclick=\"lnk(this);\" data-level=\"txtLevel3\" id=\"submenu3-3Level"+levelId3+"\">"+levelName3+"</a></li>";
									$('#submenu1-1Level'+levelId1).find('#submenu2-2Level'+levelId2).after(strLevel3);
									strFilterL1+="<li class=\"\"><div><label style=\"margin-right: 26px;width:86%;\" class=\"darkgreyText\"><input type=\"checkbox\"  onclick=\"filterSearch();\" class=\"3Level"+levelId3+" \" data-id=\"txtLevels\" data-level=\"txtLevel3\" value=\""+levelId3+"\"><span class=\"addCentre\">"+levelName3+"</span></label><i class=\"fa openNextLevel fa-plus \" style=\"position: absolute;right: 13px;padding-top: 2px;cursor:pointer;\"></i></div></li>";
									strFilterL1+="<li class=\"checkbox hidden\" style=\" margin-bottom: 5px;margin-top: 5px\"><ul style=\"padding-left:18px\">";
									var strMob3="";
									strMob3+="<li class='mmenu_Bordr'><a data-level=\"txtLevel3\" href=\"#\" value=\""+levelId3+"\" onclick=\"lnk(this);goBackButton();\" class=\"categorySearch\">"+levelName3+"</a><ul id=\"submenuMobL3-3Level"+levelId3+"\"></ul></li>";
									$('ul#submenuMobL1-1Level'+levelId1).find('ul#submenuMobL2-2Level'+levelId2).append(strMob3);
									for (label in L4){
										if (label == "subLevels") {
											var L5 = L4["subLevels"];
											for (label in L5) {
												var L6 = L5[label];
												var levelName4=$.trim(L6.levelName);
												var levelId4=$.trim(L6.levelId);
												if(levelName4!="" && levelId4!=""){
													level4ArrayN.push(levelName4);
													level4ArrayV.push(levelId4);
													l4++;
												}
												var strLevel4="<li class=\"sub_list\"><a class=\"categorySearch\"onclick=\"lnk(this);\" value=\""+levelId4+"\" data-level=\"txtLevel4\" id=\"4Level"+levelId4+"\">"+levelName4+"</a></li>";
												$('#submenu1-1Level'+levelId1).find('#submenu2-2Level'+levelId2).find('#submenu3-3Level'+levelId3).parent().after(strLevel4);
												strFilterL1+="<li><div><label style=\"width:86%;\"><input type=\"checkbox\" onclick=\"filterSearch();\" class=\"4Level"+levelId4+"\" data-id=\"txtLevels\" data-level=\"txtLevel4\" value=\""+levelId4+"\"><span class=\"addCentre\">"+levelName4+"</span></label></div></li>";
												var strMob4="";
												strMob4+="<li class='mmenu_Bordr'><a data-level=\"txtLevel4\" value=\""+levelId4+"\" href=\"#\" onclick=\"lnk(this);goBackButton();\" class=\"categorySearch\">"+levelName4+"</a></li>";
												$('ul#submenuMobL1-1Level'+levelId1).find('ul#submenuMobL2-2Level'+levelId2).find('ul#submenuMobL3-3Level'+levelId3).append(strMob4);
											}
										}
									}
									strFilterL1+="</ul></li>";
								}
							}
						}
						strFilterL1+="</ul></li>";
						i++;
					}
				}
			}
			strFilterL1+="</ul></div>";
			$('#course_list .list-group').append(strFilterL1);
			countofLevel1++;
		}
		$('.dropdown-menu-right.searchdropdown').append(strSearch);
		$('.dropdown-menu-right.searchdropdown li a').on('click',function(){
			$(this).addClass('currSelected');
			if($(this).children('.selctdIcon').hasClass('hidden')){
				$(this).children('.selctdIcon').removeClass('hidden');
			}
			else{
				$(this).children('.selctdIcon').addClass('hidden');
			}
		});
		
		$('#txtLevel1N').val('');
		$('#txtLevel2N').val('');
		$('#txtLevel3N').val('');
		$('#txtLevel4N').val('');
		$('#txtLevel1V').val('');
		$('#txtLevel2V').val('');
		$('#txtLevel3V').val('');
		$('#txtLevel4V').val('');
		$('#txtLevel1N').val(level1ArrayN);
		$('#txtLevel2N').val(level2ArrayN);
		$('#txtLevel3N').val(level3ArrayN);
		$('#txtLevel4N').val(level4ArrayN);
		$('#txtLevel1V').val(level1ArrayV);
		$('#txtLevel2V').val(level2ArrayV);
		$('#txtLevel3V').val(level3ArrayV);
		$('#txtLevel4V').val(level4ArrayV);		
		$('.categorySearch').each(function(){
			if($(this).siblings('ul').html()==""){			
				$(this).siblings().remove();
			}	
		});
		$('input:checkbox[data-id="txtLevels"]').on('click',function(){
			checkForExpandAndCollapse($(this));
			if($(this).parent().siblings().hasClass('fa-plus') && $(this).prop('checked')==true)
				$(this).parent().siblings().click();
		});
		$('.openNextLevel').on('click',function(){
			if($(this).parent().parent().next().hasClass('hidden')){
				$(this).parent().parent().next().removeClass('hidden');
			}
			else
				$(this).parent().parent().next().addClass('hidden');
			if($(this).hasClass('fa-plus')){
				$(this).removeClass('fa-plus');
				$(this).addClass('fa-minus');
				$(this).parents('.nextLevel1').children('.checkbox.course_head').css('background','#c9eafc');
			}
			else if($(this).hasClass('fa-minus')){
				$(this).addClass('fa-plus');
				$(this).removeClass('fa-minus');
				$(this).parents('.nextLevel1').children('.checkbox.course_head').css('background','#f3f3f3');
			}
			if($(this).hasClass('fa-angle-down')){
				$(this).removeClass('fa-angle-down');
				$(this).addClass('fa-angle-up');
			}
			else if($(this).hasClass('fa-angle-up')){
				$(this).addClass('fa-angle-down');
				$(this).removeClass('fa-angle-up');
			}
			checkForCollapseAll();
		});
		$('.collapseAllLink').on('click',function(){
			$('.nextLevel1').next().addClass('hidden');
			$('.openNextLevel').each(function(){
				if($(this).hasClass('fa-minus')){
					$(this).removeClass('fa-minus');
					$(this).addClass('fa-plus');
					$(this).parents('.nextLevel1').children('.checkbox.course_head').css('background','#f3f3f3');
				}
				if($(this).hasClass('fa-angle-up')){
					$(this).removeClass('fa-angle-up');
					$(this).addClass('fa-angle-down');
				}
			});
			checkForCollapseAll();
		});
		$('.collapseAllLink').click();
		$('#course_list .list-group').find('ul').each(function(){
			if($(this).html()==""){
				$(this).parent().prev().children().find('.fa-plus').remove();
				if($(this).parent().prev().hasClass('nextLevel1')){
					$(this).parent().prev().removeClass('nextLevel1');
				}
				$(this).parent().remove();
			}
			else{
				$(this).parent().prev().addClass('nextLevel1');
			}
		});
		$('.checksubmenu').each(function(){
			if($(this).find('ul').html()=="")
				$(this).parent().remove();
		});
		setTimeout(function() {
			buildMmenu();
		}, 1000);
		setTimeout(function() {
			postHeaderCatalog();
		}, 800);
		$('#showMoreLevels').on('click',function(){
			$('ul.courseMenu_drop').children('li').removeClass('hidden');
			$(this).addClass('hidden');
			setHeightofDropDown();		
		});
		$("#catlog>a").on("mouseenter",function(){
			if($('#showMoreLevels').length>0){
				$('#showMoreLevels').removeClass('hidden');
				$('#showMoreLevels').parent().nextAll().addClass('hidden');
				setHeightofDropDown();	
			} 	
		});
		$('a[data-level="txtLevel1"]').each(function(){
		  if($(this).siblings('div').html()==undefined){
				$(this).addClass('noValue');
			}
		});
		$('.collapseAllLink').addClass('hidden');
	}
	else{
		$("ul[id='mobUi']").remove();
		buildMmenu();
	}
}
function getProductTypeDetails(categories){
	var defaultYesOrNo=true;
	if(categories!=undefined){
		globalCategories=categories;
		$('.productType-group').html('');
		var strCategoryTabs="";
		var categoryMob="";
		for(var i=0;i<5;i++){
			strCategoryTabs+="<ul class=\"TabsInnrTxt categoryTabs"+i+"\"><li><a data-level=\"txtProductCreationType\" class=\"categorySearch greenTooltip checkForEllipsis wrapCat\" onclick=\"lnk(this);\"  ></a></li><li><a data-level=\"txtProductCreationType\" class=\"categorySearch greenTooltip checkForEllipsis wrapCat\" onclick=\"lnk(this);\" ></a></li></ul>";
		}
		if(defaultYesOrNo){
			$('.cBoxT1 .clearfix').append(strCategoryTabs);
		}
		var i=1;x=0;y=0;
		var productPurchaseStr="";
		for(label in categories){
			var ca1=categories[label];
			var txtProductCount=$.trim(ca1.txtProductCount);
			var txtProductType=$.trim(ca1.txtProductType);
			var languageId=$.trim(ca1.languageId);
			var typeId=$.trim(ca1.typeId);
			if(txtProductCount!="null" && txtProductCount!="0" && !isNaN(txtProductCount)){
				if(i>5){
					x=i-6;
					y=2;
					if(defaultYesOrNo){
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+') a:nth-child(1)').html(txtProductType);
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+')').append("<a class=\"removeTextDecoration wrapCatV\"> ("+txtProductCount+")</a>");
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+')').addClass('appended');
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+') a:nth-child(1)').attr({'data-placement':'bottom','data-tooltip':'tooltip','data-typeId':typeId,'title':txtProductType});
					}						
					/* productPurchaseStr+="<div class=\"checkbox\"><label><input type=\"checkbox\" value=\"\" data-level=\"txtProductCreationType\" onclick=\"filterSearch();\" data-id=\"txtProductCreationType\"><span class=\"addCentre\">"+txtProductType+"</span></label></div>"; */
					productPurchaseStr+='<div class="products type'+typeId+'-color clearfix"><input type="checkbox" data-id="txtProductCreationType" onclick="" data-typeId="'+typeId+'" data-level="txtProductCreationType" value="" id="'+txtProductType+'"><label class="checkmark_box" for="'+txtProductType+'"><i class="fa fa-check"></i></label><span class="marginleftrht5">'+txtProductType+'</span></div>';
				}
				else{
					x=i-1;
					y=1;
					if(defaultYesOrNo){
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+') a:nth-child(1)').html(txtProductType);
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+')').append("<a class=\"removeTextDecoration wrapCatV\"> ("+txtProductCount+")</a>");
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+')').addClass('appended');
						$('.cBoxT1 .clearfix .categoryTabs'+x+' li:nth-child('+y+') a:nth-child(1)').attr({'data-placement':'bottom','data-tooltip':'tooltip','data-typeId':typeId,'title':txtProductType});
					}						
					/* productPurchaseStr+="<div class=\"checkbox\"><label><input type=\"checkbox\" value=\"\" data-level=\"txtProductCreationType\" onclick=\"filterSearch();\" data-id=\"txtProductCreationType\"><span class=\"addCentre\">"+txtProductType+"</span></label></div>"; */
					productPurchaseStr+='<div class="products type'+typeId+'-color clearfix"><input type="checkbox" data-id="txtProductCreationType" onclick="" data-typeId="'+typeId+'" data-level="txtProductCreationType" value="" id="'+txtProductType+'"><label class="checkmark_box" for="'+txtProductType+'"><i class="fa fa-check"></i></label><span class="marginleftrht5">'+txtProductType+'</span></div>';
				}
				if(i<=6){
					categoryMob+="<div class=\"col-lg-4 col-md-4 col-sm-4 col-xs-4\"><ul class=\"list-unstyled\"><li><a data-placement=\"bottom\" data-tooltip=\"tooltip\" title=\""+txtProductType+"\" data-level=\"txtProductCreationType\" data-typeId=\""+typeId+"\" class=\"categorySearch greenTooltip checkForEllipsis wrapCat\" onclick=\"lnk(this);\" >"+txtProductType+"</a><a class=\"removeTextDecoration wrapCatV\">("+txtProductCount+")</a></li></ul></div>";
				}
				i++;		
			}							
		}
		$('.productType-group').append(productPurchaseStr);
		if(defaultYesOrNo){
			/* $('.cBoxT1').find('.TabsInnrTxt:nth-child(5)').addClass('lastRow'); */
			$('#categoryMob').append(categoryMob);
		}
	}
}
function getPublishers(publishers){
	if(publishers!=undefined){
		publisherDetails=publishers;
		instancePubNameId=[];
		$('.publisher-group').html('');
		var i=0;
		var publisherStr="";
		for(label in publishers){
			var p1=publishers[label];
			var txtOrganizationName=$.trim(p1.txtOrganizationName);
			var txtOrganizationAddress=$.trim(p1.txtOrganizationAddress);
			var Islicencecoderequestallowed=$.trim(p1.Islicencecoderequestallowed)==""?"1":$.trim(p1.Islicencecoderequestallowed);
			var Publisher=$.trim(p1.txtOrgType);
			var orgID1=$.trim(p1.txtOrgId)=="" ? $.trim(p1.app_seq_no) : $.trim(p1.txtOrgId);
			var orgMicrosite=$.trim(p1.orgMicrosite);
			var orgLogo=$.trim(p1.orgLogo);
			instancePubNameId.push(txtOrganizationName+"~"+orgID1);
			if(Publisher.toUpperCase()=="PUBLISHER"){
				var appendClass="";
				if(i>9)
					appendClass="searchPublisherDefault hidden";
				/* if(i==10){
					publisherStr+="<a style=\"text-align: center;color: #1A0DAB\" id='searchPublisherDefault' onclick=\"openViewMore('searchPublisher',this.id)\" class='cousorPointer checkbox searchPublisherViewMore' data-a='mkpc82' data-b='View More'>"+iHUB.multilingual.gmv('mkpc82')+"</a>";
				} */
				publisherStr+="<div class=\"checkbox\"><label><input type=\"checkbox\" onclick=\"filterSearch();\" data-value=\""+orgID1+"\" data-txtOrgId=\""+orgID1+"\" data-orgLogo=\""+orgLogo+"\" data-orgMicrosite=\""+orgMicrosite+"\" data-txtOrganizationAddress=\""+txtOrganizationAddress+"\" data-Islicencecoderequestallowed=\""+Islicencecoderequestallowed+"\" data-id=\"txtOrgId\"><span class=\"addCentre\">"+txtOrganizationName+"</span></label></div>";
				i++;
			}
		}
		$('#instancePubNameId').remove();
		$('#txtLevel4V').after("<input id=\"instancePubNameId\" type=\"hidden\" name=\"instancePubNameId\" value=\""+instancePubNameId+"\">");
		if(i>0){
			$('.publisher-group').append("<div id=\"searchPublisherDemo\" class=\"jQuerySearch\" data-searchClass=\"searchPublisher\" data-style=\"marginbottom10\" data-selector=\"$('.publisherclass').find('#course_list').find('.publisher-group').find('.checkbox')\"  data-VMappendClass=\"publisher-group\" data-viewmore=\"true\" data-maxcount=\"6\"></div>");
			$('.publisher-group').append(publisherStr);
			iHUB.search.createjQuerySearchFromId("searchPublisherDemo");
			$('.publisherclass').removeClass('hidden');
		}
		else
			$('.publisherclass').addClass('hidden');
	}
}
function onSignUp(){
	moduleVisibilityColumnsUser(allInstanceDetails);
	$('#txtOrgCountry').attr("data-style","btn-default disabled");
	$('#txtOrgCountry').attr("disabled","disabled");
	$('#txtOrgCountry').selectpicker('refresh');
	stateCodeUpdate();
	stateCodeOnLoginUpdate();
	setTimeout(function() {
		if(iHUB.isMobileDevice()) {
			$('.selectpicker').selectpicker('mobile');
		}
		else{
			$('.selectpicker').selectpicker();
		}
	}, 500);
}
function validateEFormsFWIonCaptchaForForgotPWDNew(button_id){
    var key=$('#captchaService_imageKey').val();
    var answer=$('#captchaService_answer').val();
   var formId=masterform_id;
   var orgId=orgID;
   if($.trim(orgId)=="")
	   orgId=orgID;
    var parameter="captchaService_imageKey="+key+"&captchaService_answer="+answer+"&appId=30";
    if (answer == '') {
		alert(multilingualKeyValue('295','34'));                      /* Please enter the Captcha.alrt9 */
		return false;
    }else{
    	var http_request=fnGetXMLHttpObject();
    	if(http_request!=null){
           var pValidationServlet = "";
           	pValidationServlet = "/EForms/IonCaptchaValidation"; 
			http_request.open('POST',pValidationServlet,true);  
			http_request.onreadystatechange = function() {  handleEFormsFWResponseForIonCaptchaForgotPWDNew(http_request,button_id,formId,orgId,key); }; 	 	                    
			http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");               
			http_request.send(parameter);
		}
    }    
	forgetPasswordData();
}
function validateUserColumns(val){
	if(userColNotReqArr.indexOf(val)>-1)
		return false;
	else
		return true;
}
function validateUserDetails(){
	 if(eval(validateUserColumns("txtSalutation")) && $('#txtSalutation:visible').length==1){ 
		if($('#txtSalutation').val()=="" || $('#txtSalutation').val()=="Salutation"){
					/* Please select Salutation.txt13 */
			iHUB.validation.errorMessage("txtSalutation",multilingualKeyValue('283','34'),0);
			validate=false;
			return false;
		}
		else if($('#txtSalutation').val()!=""){
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }	
	if(eval(validateUserColumns("txtFirstName")) && $('#txtFirstName:visible').length==1){ 
		if($('#txtFirstName').val()==""){
			/* Please Enter your First Name.txt14 */
			iHUB.validation.errorMessage("txtFirstName",multilingualKeyValue('282','34'),0);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	if(eval(validateUserColumns("txtLastName")) && $('#txtLastName:visible').length==1){ 
		if($('#txtLastName').val()==""){
			/*Please Enter your Last Name.txt15 */
			iHUB.validation.errorMessage("txtLastName",multilingualKeyValue('281','34'),50);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }	
	if(eval(validateUserColumns("txtGender")) && $('#txtGender:visible').length==1){ 
		if($(".gender-container .btn-group .active").length<1){
			/* Please select Gender.txt16 */
			iHUB.validation.errorMessage("txtGender",multilingualKeyValue('280','34'),100);
			validate=false;
			return false;
		}
		else{ /* if($('#txtGender').val()!="") */
			
			/* $("#txtGender").val($(".gender-container .btn-group .active").val()); */
			var str = $(".gender-container .btn-group .active").val();
			str = str.toLowerCase().replace(/\b[a-z]/g, function(letter) {
				return letter.toUpperCase();
			});
			$("#txtGender").val(str);
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }	
	if(eval(validateUserColumns("txtDisplayName")) && $('#txtDisplayName:visible').length==1){ 
		if($('#txtDisplayName').val()==""){
			/*  Please Enter Display Name.txt17 */
			iHUB.validation.errorMessage("txtDisplayName",multilingualKeyValue('279','34'),100);
			validate=false;
			return false;
		}
		else{	
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if(eval(validateUserColumns("txtAppName")) && $('#txtAppName:visible').length==1){ 
		var appName = $.trim($('#txtAppName').val());
		var appNameArray = appName.split(' ').filter(function(v){return v!==''});
		if(appName==""){
			iHUB.validation.errorMessage("txtAppName",multilingualKeyValue('308','34'),0);
			validate=false;
			return false;
		}
		else if(appNameArray.length==1){
			iHUB.validation.errorMessage("txtAppName",multilingualKeyValue('309','34'),0);
			validate=false;
			return false;
		}
		else{	
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	if(eval(validateUserColumns("txtEmail"))){ 
		if($('#txtEmail').val()==""){
				   /*  Please Enter your Email Id.txt18 */
			iHUB.validation.errorMessage("txtEmail",multilingualKeyValue('278','34'),100);
			validate=false;
			return false;
		}
		if(!iHUB.validateEmail.validateEmailId($('#txtEmail').val(),false)){
			/* The Email ID format is invalid,the valid Email Id format is name@org.com or name@org.co.in.txt19 */
			iHUB.validation.errorMessage("txtEmail",multilingualKeyValue('306','34'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	if(eval(validateUserColumns("txtLoginId"))){ 
		if($('#txtLoginId_temp').val()==""){
						 /*  Please Enter Login ID.txt37 */	
			iHUB.validation.errorMessage("txtLoginId_temp",multilingualKeyValue('277','34'),100);
			validate=false;
			return false;
		}
		else{
			var	instanceId;
			iHUB.validation.resetValidationColourText();
			var sPageURL = decodeURIComponent(window.location.search.substring(1)),
			sURLVariables = sPageURL.split('&'),
			sParameterName,
			i;
			sParameterName = sURLVariables;
			for(var i=0; i<sParameterName.length;i++){
				if (sParameterName[i].split('=')[0] === 'instanceId') {
					instanceId=sParameterName[i].split('=')[1];
				}
			}
			$('#txtLoginId').val($('#txtLoginId_temp').val()+"_"+masterform_id+orgID+"_"+instanceId);
			$('#txtLoginIdForDisplay').val($('#txtLoginId_temp').val());
			validate=true;
			if(instanceId==""||instanceId==0||instanceId==null||instanceId==undefined){
				var	instanceId;
				iHUB.validation.resetValidationColourText();
				instanceId=$('#instanceId').val();
				$('#txtLoginId').val($('#txtLoginId_temp').val()+"_"+masterform_id+orgID+"_"+instanceId);
				$('#txtLoginIdForDisplay').val($('#txtLoginId_temp').val());
				validate=true;
			}
		}
		
	}	
	if(eval(validateUserColumns("txtPassword"))){ 
		if($('#txtPassword').val()==""){
			 /*  Please Enter your Password.txt20 */	
			iHUB.validation.errorMessage("txtPassword",multilingualKeyValue('276','34'),100);
			validate=false;
			return false;
		}
		else{
			var val=eval('validatePWD($("#txtPassword").val(),"txtPassword")');
			if(val){	
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
			else{
				validate=false;
				return false;
			}
		}
	 }
	if(eval(validateUserColumns("txtPassword"))){ 
		if($('.ConfirmPasswOrd').val()==""){
					  /* Please Enter your Password to Confirm.txt21 */	
			iHUB.validation.errorMessage("ConfirmPasswOrd",multilingualKeyValue('275','34'),200);
			validate=false;
			return false;
		}
		if($('#txtPassword').val()!=$('.ConfirmPasswOrd').val()){
			/*  The confirmed password entered does not match with your new password.txt22 */	
			iHUB.validation.errorMessage("ConfirmPasswOrd",multilingualKeyValue('274','34'),200);
			validate=false;
			return false;
		}
		else{	
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if(eval(validateUserColumns("txtPhoneNumber")) && $('#txtPhoneNumber:visible').length==1 && $('#txtPhoneNumber').parents('.form-group').hasClass('mandTxt')){		
		if(isNaN($('#txtPhoneNumber').val())){
            /* Please enter Numeric Value as Mobile number.txt23 */	
		 	iHUB.validation.errorMessage("txtPhoneNumber",multilingualKeyValue('288','34'),300);
			validate=false;
			return false;
		}
		if(Number($('#txtPhoneNumber').val())==0){
			/* Please Enter a Correct Mobile Number.txt24 */	
		 	iHUB.validation.errorMessage("txtPhoneNumber",multilingualKeyValue('287','34'),300);
			validate=false;
			return false;
		}
		var phoneNo=$('#txtPhoneNumber').val();
		var getLength=getPhoneNumberLength().split("@~@");
		if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
			/* Please Enter a Correct Mobile Number.txt24 */	
			iHUB.validation.errorMessage("txtPhoneNumber",multilingualKeyValue('287','34'),300);
 			validate=false;
			return false;
		}else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if(eval(validateUserColumns("txtCountry")) && $('[data-id="txtCountry"]:visible').length==1){ 
		if(($('#txtCountry').val()=="") ||($('#txtCountry').val()=="Country")){
			iHUB.validation.errorMessage("txtCountry",multilingualKeyValue('273','34'),300);
				validate=false;
				return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}	
	if(eval(validateUserColumns("txtState")) && $('[data-id="txtState"]:visible').length==1){ 
		if(($('#txtCountry').val()=="India")){
			if($('#txtState').val()=="" || $('#txtState').val()=="State"){
				iHUB.validation.errorMessage("txtState",multilingualKeyValue('307','34'),100); /* Please select State.mesg66 */
				validate=false;
				return false;
			}
			else if($('#txtState').val()!=""){
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
		}
	} 	

	if(eval(validateUserColumns("isMailReqd")) && $('#isMailReqd:visible').length==1){
		if($('#mailCheck').length < 0){
			iHUB.validation.errorMessage("isMailReqd",multilingualKeyValue('271','34'),100);/* "Please select whether mail is required or not." */
			validate=false;
			return false;
		}
		else{
			if($("#mailCheck").attr('checked')){
			$('#isMailReqd').val("1");
			}
			else{
				$('#isMailReqd').val("0");
			}
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}	
	if(eval(validateUserColumns("isMinor")) && $('#isMinorYes:visible').length==1){
		var isMinorCheck = document.getElementsByName('isMinor');
		var isminorchecked_method = false;
		for (var i = 0; i < isMinorCheck.length; i++) {
			if (isMinorCheck[i].checked) {
				isminorchecked_method = true;
				break;
			}
		}
		if (!isminorchecked_method) {
			iHUB.validation.errorMessage("isMinor",multilingualKeyValue('270','34'),150); /* "Please Select if the Minor User or Not." */
			validate = false;
			return false;
		} else {
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
		if (document.getElementById('isMinorYes').checked) {
			if(eval(validateUserColumns("parentName")) && $('#parentName:visible').length==1){
				if ($('#parentName').val() == "") {
					iHUB.validation.errorMessage("parentName",multilingualKeyValue('269','34') ,220);   /* "Please Enter Guardian Name." */
					validate = false;
					return false;
				} else {
					iHUB.validation.resetValidationColourText();
					validate = true;
				}
			}	
			if(eval(validateUserColumns("parentMobileNo")) && $('#parentMobileNo:visible').length==1){
				if ($('#parentMobileNo').val() == "") {
					iHUB.validation.errorMessage("parentMobileNo",multilingualKeyValue('268','34'),220);/* "Please Enter your Guardian Mobile Number." */
					validate = false;
					return false;
				} else {
					iHUB.validation.resetValidationColourText();
					validate = true;
				}
			}	
			if(eval(validateUserColumns("parentEmailId")) && $('#parentEmailId:visible').length==1){
				if($('#parentEmailId').val()==""){	
					iHUB.validation.errorMessage("parentEmailId",multilingualKeyValue('267','34'),100);          /* "Please Enter your Guardian Email ID." */
					validate=false;
					return false;
				}
				if (!iHUB.validateEmail.validateEmailId($('#parentEmailId').val(), false)) {
						//document.forms[0].emailId.focus();
					iHUB.validation.errorMessage("parentEmailId",multilingualKeyValue('306','34')+'name@org.com or name@org.co.in ',370);  /*The Email ID format is invalid,the valid Email Id format is */
					validate = false;
					return false;
				}
				else if($.trim($('#parentEmailId').val().toLowerCase())==$.trim($('#txtEmail').val().toLowerCase())){
					iHUB.validation.errorMessage("parentEmailId",multilingualKeyValue('305','34'),100);          /* "Your Email Id & Guardian Email Id can't be same." */
					validate=false;
					return false;
				}
				else {
						//$('.abc6').hide(); 
					iHUB.validation.resetValidationColourText();
					validate = true;
				}
			}	
		}
		else if (document.getElementById('isMinorNo').checked) {
			
				iHUB.validation.resetValidationColourText();
				validate = true;
		}
	} 	
		return true;
	 
}
$(document).on('click','#txtFirstName',function(){
	var fname= $('#txtFirstName').val();
	$('#txtDisplayName').val(fname);
	if(fname.length==0){
		$('#txtDisplayName').parents(".form-group").find(".selName").removeClass("in");
	}
	else{
		$('#txtDisplayName').parents(".form-group").find(".selName").addClass("in");
	}
});
$(document).on('click','#txtEmail',function(){
	var fname= $('#txtEmail').val();
	$('#txtLoginId_temp').val(fname);
	if(fname.length==0){
		$('#txtLoginId_temp').parents(".form-group").find(".selName").removeClass("in");
	}
	else{
		$('#txtLoginId_temp').parents(".form-group").find(".selName").addClass("in");
	}
});
/* added for job CR */
$(document).on('keyup','#txtFirstNameOrg',function(){
	var fname= $('#txtFirstNameOrg').val();
	$('#txtDisplayNameOrg').val(fname);
	if(fname.length==0){
		$('#txtDisplayNameOrg').parents(".form-group").find(".selName").removeClass("in");
	}
	else{
		$('#txtDisplayNameOrg').parents(".form-group").find(".selName").addClass("in");
	}
});
$(document).on('keyup','#txtEmailOrg',function(){
	var fname= $('#txtEmailOrg').val();
	$('#txtLoginId_tempOrg').val(fname);
	if(fname.length==0){
		$('#txtLoginId_tempOrg').parents(".form-group").find(".selName").removeClass("in");
	}
	else{
		$('#txtLoginId_tempOrg').parents(".form-group").find(".selName").addClass("in");
	}
});
/* added for job CR */
function saveData(){
	var userDetailsValidate=eval('validateUserDetails()');
	if(userDetailsValidate){
		if($.trim(instanceId)==""){
			var sPageURL = decodeURIComponent(window.location.search.substring(1)),
			sURLVariables = sPageURL.split('&'),
			sParameterName,
			i;
			sParameterName = sURLVariables;
			for(var i=0; i<sParameterName.length;i++){
				if (sParameterName[i].split('=')[0] === 'instanceId'){
					instanceId=sParameterName[i].split('=')[1];
				}
			}
		}
		$('#txtInstanceId').val(instanceId);
		$('#languageId').val(defaultLanguageId);
		$('#timezoneId').val(defaultTimeZone);
		if($('#orgId').length=="0"){
			$('body').append('<input type="hidden" name="orgId" id="orgId" value="'+$('[name="orgId"]').val()+'">');
		}
		if($('#formId').length=="0"){
			$('body').append('<input type="hidden" name="formId" id="formId" value="'+$('[name="userFormId"]').val()+'">');
		}
		var checkLoginId=eval('checkDuplicate()');
		if(checkLoginId){
			$('#txtLoginId-H').addClass('hidden');
			var goAhead=false;
			if($('#agreeConditionUser').length > 0 && !$('#agreeConditionUser').parent().parent().hasClass('hidden')){
				if($('#agreeConditionUser:checked').length==0){
					alert(multilingualKeyValue('265','34'));                     /*  Please accept iON Digital Hub\'s Terms of Use:alrt11 */
				}
				else{
					goAhead=true;
				}
			}
			else{
				goAhead=true;
			}				
			if(goAhead){
				var isUserMinor="0";
				if($('#isMinorYes').is(':checked')){
					isUserMinor="1";
				}
				else if($('#isMinorNo').is(':checked')){
					isUserMinor="0";
				}
				else if($('#isMinor').val()==""){
					isUserMinor="0";
				}
				window.parent.$('#isUserMinor').val(isUserMinor);
				$('#isMinor').val(isUserMinor);
				$('#countryOnLogin').removeAttr('disabled', 'disabled');
				$('#countryOnLogin').selectpicker('refresh');
				$('#txtCountry').removeAttr('disabled', 'disabled');
				$('#txtCountry').selectpicker('refresh');
				$('#txtOrgCountry').removeAttr("disabled","disabled");
				$('#txtOrgCountry').selectpicker('refresh');
				/* added for saving value of source and referrer during signup */
				var sPageURL = decodeURIComponent(window.location.search.substring(1)),
				sURLVariables = sPageURL.split('&'),
				sParameterName,
				i;
				sParameterName = sURLVariables;
				for(var i=0; i<sParameterName.length;i++){
					if(sParameterName[i].split('=')[0] === 'referrer') {
					   ref=sParameterName[i].split('=')[1];
					}
					else if(sParameterName[i].split('=')[0] === 'source') {
					   sources=sParameterName[i].split('=')[1];
					}		
				}
				/* added for saving value of source and referrer during signup */
				/* modified by Sunita */
					$('#referrer').val(ref);
					$('#source').val(sources);
					/* modified by Sunita */
				if (window.parent.isNewRegistration && typeof allowUserSignUp == 'function'){ 
					allowUserSignUp();
				}
				else{
					eval(validateIonCaptcha("saveFormData","Submit"));
				}
			}
		}
		else{
			 if(eval(validateUserColumns("txtLoginId_temp")) && $('#txtLoginId_temp:visible').length==1){ 
				iHUB.validation.errorMessage("txtLoginId_temp",multilingualKeyValue('304','34'),220);
			}
			else{
				iHUB.validation.errorMessage("txtEmail",multilingualKeyValue('93','34'),100);/* "Email Id already used. Please use another one for Registration." */
			}
			//iHUB.validation.errorMessage("txtLoginId_temp",iHUB.multilingual.gmv('txt51'),220);
		}
	}
}
function callForiOS(){
	var wrapper = jQuery('.url-wrapper');
	if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){
		wrapper.addClass('ios');
		var scrolling = 'no';
	}else{
		var scrolling = 'yes';
	}
}
$(function () {
	$('input[id$=txtFirstName]').on('keyup',function () {
		var txtClone = $(this).val();
		$('input[id$=txtDisplayName]').val(txtClone);
		if(txtClone.length==0){
			$('#txtDisplayName').parents(".form-group").find(".selName").removeClass("in");
		}
		else{
			$('#txtDisplayName').parents(".form-group").find(".selName").addClass("in");
		}
	});
	$('input[id$=txtEmail]').on('keyup',function () {
		var txtClone = $(this).val();
		$('input[id$=txtLoginId_temp]').val(txtClone);
		if(txtClone.length==0){
			$('#txtLoginId_temp').parents(".form-group").find(".selName").removeClass("in");
		}
		else{
			$('#txtLoginId_temp').parents(".form-group").find(".selName").addClass("in");
		}
	});
});

var stateNames=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jammu and Kashmir","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar","Chandigarh","Dadra and Nagar Haveli","Daman and Diu","Delhi","Lakshadweep","Puducherry"]; 	
var stateCodes=["AP","AR","AS","BH","CT","GA","GJ","HR","HP","JK","JH","KA","KL","MP","MH","MN","ME","MI","NL","OR","PB","RJ","SK","TN","TS","TR","UP","UT","WB","AN","CH","DN","DD","DL","LD","PY"];
var stateCodesNumber=["37","12","18","10","22","30","24","06","02","01","20","29","32","23","27","14","17","15","13","21","03","08","11","33","36","16","09","05","19","35","04","26","25","07","31","34"];
function orgStateCodeUpdate(){
	$('#txtOrganizationState').on('change',function(){	
		var stateName=$(this).val();	
		var stateCode = stateCodes[stateNames.indexOf(stateName)];	
		$('#stateCode').val(stateCode);
	});
}
function stateCodeOnLoginUpdate(){
	$('#stateOnLogin').on('change',function(){	
		var stateName=$(this).val();	
		var stateCode = stateCodes[stateNames.indexOf(stateName)];	
		$('#stateCode').val(stateCode);
	});
}
function stateCodeUpdate(){
	$('#txtState').on('change',function(){	
		var stateName=$(this).val();	
		var stateCode = stateCodes[stateNames.indexOf(stateName)];	
		$('#stateCode').val(stateCode);
	});
}
function giveMeStateCode(stateName){
	var stateCode = stateCodes[stateNames.indexOf(stateName)];	
	$('#stateCode').val(stateCode);
	return stateCode;
}
function moduleVisibilityColumnsUser(obj){
	if(obj.defaultCountry!=undefined && obj.defaultCountry!=""){
		defaultCountry=obj.defaultCountry;
	}
	if(obj.defaultLanguageId!=undefined && obj.defaultLanguageId!=""){
		defaultLanguageId=obj.defaultLanguageId;
	}
	if(obj.defaultTimeZone!=undefined && obj.defaultTimeZone!=""){
		defaultTimeZone=obj.defaultTimeZone;
	}
	var tempArray=[];
	if(obj.userColNotReq!=undefined && obj.userColNotReq!=""){
		tempArray.push(obj.userColNotReq);
	}
	if(obj.orgColNotReq!=undefined && obj.orgColNotReq!=""){
		tempArray.push(obj.orgColNotReq);
	}
	if(obj.languageIds!=undefined && obj.languageIds!=""){
		languageIds=obj.languageIds;
	}
	if(obj.userSignupMandatoryColumnList!=undefined){
		openAllMandatoryColumnForUserSignUp(obj.userSignupMandatoryColumnList);
	}
	userColNotReqArr=tempArray.filter(function(v){return v!==''}).toString();
	orgColNotReqArr=userColNotReqArr;
	showInstanceColumns(userColNotReqArr);
	if($('#app_seq_no_div').length>0){
		if(obj.instanceDetails.typeOfProductsForDistributor!=undefined){
			store.set('typeOfProductsForDistributor',obj.instanceDetails.typeOfProductsForDistributor);
		}
		if(obj.instanceDetails.distributorCatalogue!=undefined){
			store.set('distributorCatalogue',obj.instanceDetails.distributorCatalogue);
		}
	}
	setTimeout(function() {
		showCountryStateCityDetails(defaultCountry,"yes");
		checkCountryOrg(defaultCountry,"");
		wrapWithRow();
	}, 50);
}
function checkCountryOrg(countryName,isDisabled){
	if($('#txtOrgCountryOrg').val()!=undefined){
		log("inside txtOrgCountry checkCountryOrg for each loop starts.. "+countryName);
		$('#txtOrgCountryOrg').find('option').each(function() {
			var $this = $(this);
			if ($this.text() == countryName){
				$this.attr("selected", "selected");
				log("add selected to txtOrgCountry >> "+countryName);
			}
		});
		setTimeout(function(){ 
			$('#txtOrgCountryOrg').selectpicker('refresh');
			log("refresh txtOrgCountry >> ");
		}, 200);
	}
	if($('#txtCountryOrg').val()!=undefined){
		log("inside txtCountry checkCountryOrg for each loop starts.. "+countryName);
		$('#txtCountryOrg').find('option').each(function() {
			var $this = $(this);
			if ($this.text() == countryName){
				$this.attr("selected", "selected");
				log("add selected to txtCountry >> "+countryName);
			}
		});
		setTimeout(function(){
			if(isDisabled){
				$('[data-id="txtOrgCountryOrg"]').removeClass('disabled');
				$('#txtOrgCountryOrg').removeAttr('disabled', 'disabled'); 
				$('#txtOrgCountryOrg').selectpicker('refresh');
				log("refresh txtOrgCountry >> ");
			}
			else{
				$('[data-id="txtOrgCountryOrg"]').addClass('disabled');
				$('#txtOrgCountryOrg').attr('disabled', 'disabled'); 
				$('#txtOrgCountryOrg').selectpicker('refresh');
				log("refresh txtOrgCountry  else>> ");
			}
			$('[data-id="txtCountryOrg"]').addClass('disabled');
			$('#txtCountryOrg').attr('disabled', 'disabled'); 
			$('#txtCountryOrg').selectpicker('refresh');
			log("refresh txtCountry >> ");
		}, 200);
	}
	setTimeout(function(){
		showState();
	}, 500);
}
function showState(){
	$('#txtUserStateOrg,#txtCityOrg').parents('.form-group').addClass('hidden');
	$('#txtOrganizationStateOrg').parents('.txtState').addClass('hidden');
	var count=$('#testing11 select[name="txtCountryOrg"] option:selected').attr('data-count');
	if($.trim(count)!="" && $.trim(count)=="1"){
		$('#txtUserStateOrg').parents('.form-group').removeClass('hidden');
		$('#txtOrganizationStateOrg').parents('.txtState').removeClass('hidden');
		if($('#txtUserStateOrg option').length<=2)
			getStates($.trim(count),"txtOrganizationStateOrg@~@txtUserStateOrg",statedbs,"txtCityOrg",citydbs);
			//getStates(countryId,appendIdsState,defaultState,appendIdsCity,defaultCity);
	}
	else{
		$('#txtUserStateOrg,#txtCityOrg').parents('.form-group').addClass('hidden');
	}
	var count1=$('#testingOrg select[name="txtOrgCountryOrg"] option:selected').attr('data-count');
	if($.trim(count1)!="" && $.trim(count1)=="1"){
		$('#txtOrganizationStateOrg').parents('.txtState').removeClass('hidden');
		if($('#txtOrganizationStateOrg option').length<=2)
			getStates($.trim(count),"txtOrganizationStateOrg@~@txtUserStateOrg",statedbs,"txtCityOrg",citydbs);
	}
	else{
		$('#txtOrganizationStateOrg').parents('.txtState').addClass('hidden');
	}
}
function showInstanceColumns(val){
	var colArray=val.split(',');
	for(i=0;i<colArray.length;i++){
		$('[name="'+$.trim(colArray[i])+'"]').parents('.form-group').hide();
		$("[id$='OnLogin']").map(function(){ if($(this).attr('id').replace(/OnLogin/g,'').toLowerCase()==colArray[i].replace(/txt/g,'').toLowerCase()) return $(this).parents('.form-group').hide()});
		if(colArray.indexOf("txtSalutation")>-1){
			$('#selSalutationonLogin').parents('.form-group').hide();
		}
	}
}
function countryDetails(appendIdsCountry,defaultCountry,appendIdsState,defaultState,appendIdsCity,defaultCity,isDisabled){
	var countryId="";
	if($.trim(appendIdsCountry)!=""){
		if(typeof gblCountries == 'object' && !$.isEmptyObject(gblCountries)){
			appendCountryDetails(appendIdsCountry,defaultCountry,appendIdsState,defaultState,appendIdsCity,defaultCity,isDisabled);
		}
		else{
			$.getJSON( globalUrl+"gblData.json", function( data ) {
				var result=data.instanceDetails;
				var newResponse=JSON.stringify(result);
				var obj1 = JSON.parse(newResponse);
				gblCountries = obj1.gblCountries;
				appendCountryDetails(appendIdsCountry,defaultCountry,appendIdsState,defaultState,appendIdsCity,defaultCity,isDisabled);
			});
		}
	}
}
function appendCountryDetails(appendIdsCountry,defaultCountry,appendIdsState,defaultState,appendIdsCity,defaultCity,isDisabled){
	var options="";
	options+="<option value='' data-a='324' data-b='Country'>"+multilingualKeyValue('324','34')+"</option>";
	if(typeof gblCountries == 'object' && !$.isEmptyObject(gblCountries)){
		var obj = gblCountries;
		for(label in obj){
			var val=obj[label];
			if(defaultCountry!=undefined && $.trim(defaultCountry)!=''){
				if(val.cntname.toLowerCase()==defaultCountry.toLowerCase()){
					options+="<option value='"+val.cntname+"' data-count='"+val.cntid+"' selected='selected'>"+val.cntname+"</option>";
					countryId=val.cntid;
				}
				else{
					options+="<option value='"+val.cntname+"' data-count='"+val.cntid+"'>"+val.cntname+"</option>";
				}
			}
			else{
				options+="<option value='"+val.cntname+"' data-count='"+val.cntid+"'>"+val.cntname+"</option>";
			}
		}
		var splitAppendIds=appendIdsCountry.split('@~@');
		if(splitAppendIds.length > 0){
			$.each(splitAppendIds, function(k, v) {
				if($.trim(v)!=""){
					if($('#'+v).length > 0){
						if(isDisabled!=undefined && isDisabled!="undefined"){
							if(isDisabled=="yes"){
								$('[id="'+v+'"]').attr('disabled','disabled');
							}
						}
						$('[id="'+v+'"]').html(options);								
						$('[id="'+v+'"]').selectpicker('refresh');
					}
				}
			});
		}
		setTimeout(function() {
			if(countryId!="" && countryId=="1" && $.trim(appendIdsState)!=""){
				$('#cityOnLogin,#stateOnLogin').parents('.form-group').removeClass('hidden');
				$('.txtState').removeClass('hidden');
				getStates(countryId,appendIdsState,defaultState,appendIdsCity,defaultCity);
			}
			else{
				$('#cityOnLogin,#stateOnLogin').parents('.form-group').addClass('hidden');
				$('.txtState,.txtCity').addClass('hidden');
			}
		}, 50);
	}
	
}
function getStates(countryId,appendIdsState,defaultState,appendIdsCity,defaultCity){
	if(countryId!="" && countryId!="1"){
		$('#cityOnLogin,#stateOnLogin').parents('.form-group').addClass('hidden');
		$('.txtState,.txtCity').addClass('hidden');
	}
	else{
		var defaultStateCode="";
		$('#cityOnLogin,#stateOnLogin').parents('.form-group').removeClass('hidden');
		$('.txtState').removeClass('hidden');
		var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH */
		$.ajax({
			type: "POST",
			url: url,
			data: {
				orgID:orgID,
				gblCountryId:countryId,
				subAction:"gblstates"
			},
			dataType: "json",
			success: function(result){
				var newResponse=JSON.stringify(result);
				var obj1 = JSON.parse(newResponse);
				var obj =obj1.gblstates;
				if($.isEmptyObject(obj)){
					var splitAppendIds1=appendIdsState.split('@~@');
					if(splitAppendIds1.length > 0){
						$.each(splitAppendIds1, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									$('[id="'+v+'"]').parents('.txtState').addClass('hidden');
								}
							}
						});
					}
					var splitAppendIds2=appendIdsCity.split('@~@');
					if(splitAppendIds2.length > 0){
						$.each(splitAppendIds2, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									$('[id="'+v+'"]').parents('.form-group').addClass('hidden');
								}
							}
						});
					}				
				}
				else{
					var splitAppendIds2=appendIdsCity.split('@~@');
					if(splitAppendIds2.length > 0){
						$.each(splitAppendIds2, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									/* $('[id="'+v+'"]').parents('.form-group').addClass('mandTxt'); */
									$('[id="'+v+'"]').parents('.form-group').removeClass('hidden');
								}
							}
						});
					}
					var options="";
					options+="<option value='' data-a='325' data-b='State'>"+multilingualKeyValue('325','34')+"</option>";
					for(label in obj){
						var val=obj[label];
						if(defaultState!=undefined && $.trim(defaultState)!=''){
							if(val.staname.toLowerCase()==defaultState.toLowerCase()){
								options+="<option value='"+val.staname+"' data-count='"+val.staid+"' selected='selected'>"+val.staname+"</option>";
								defaultStateCode=val.staid;
							}
							else{
								options+="<option value='"+val.staname+"' data-count='"+val.staid+"'>"+val.staname+"</option>";
							}
						}
						else{
							options+="<option value='"+val.staname+"' data-count='"+val.staid+"'>"+val.staname+"</option>";
						}
					}
					var splitAppendIds=appendIdsState.split('@~@');
					if(splitAppendIds.length > 0){
						$.each(splitAppendIds, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									$('[id="'+v+'"]').html(options);
									$('[id="'+v+'"]').parents('.txtState').addClass('mandTxt');
									$('[id="'+v+'"]').parents('.txtState').removeClass('hidden');								
									$('[id="'+v+'"]').selectpicker('refresh');
								}
							}
						});
					}
				}
			},
			error: function(x, e){
				if(e=="parsererror" && x.responseText=="session is not avaliable"){
					$('#toaster').html('');
					iHUB.toaster.redMessageToaster(multilingualKeyValue('1','34'));
					return false;
				}
			} ,
			complete:function(){
				/* $(".txtState").find('select[name="txtState"]').selectpicker('refresh'); */
				setTimeout(function() {
					if(defaultStateCode!="" && $.trim(appendIdsCity)!=""){
						getCities(countryId,defaultStateCode,appendIdsCity,defaultCity);
					}
					else{
						$('.txtCity').addClass('hidden');
					}
				},50);
			} 
		});
	}
}
function getCities(countryId,StateId,appendIdsCity,defaultCity){
	if(countryId!="" && countryId!="1"){
		$('.txtCity').addClass('hidden');
	}
	else{
		$('.txtCity').removeClass('hidden');
		var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH */
		$.ajax({
			type: "POST",
			url: url,
			data: {
				orgID:orgID,
				gblCountryId:countryId,
				gblStateId:StateId,
				subAction:"gblcities"
			},
			dataType: "json",
			success: function(result){
				var newResponse=JSON.stringify(result);
				var obj1 = JSON.parse(newResponse);
				var obj=obj1.gblcities;
				if($.isEmptyObject(obj)){
					var splitAppendIds=appendIdsCity.split('@~@');
					if(splitAppendIds.length > 0){
						$.each(splitAppendIds, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									$('[id="'+v+'"]').parents('.form-group').addClass('hidden');
								}
							}
						});
					}
					$('#txtCity').parents('.form-group').addClass('hidden');
				}
				else{
					var options="";
					if(defaultCity==undefined || $.trim(defaultCity)=='' || defaultCity=="undefined" ||defaultCity==null ||defaultCity=="null"){
						options+="<option value='' data-a='326' data-b='City'>"+multilingualKeyValue('326','34')+"</option>";
					}
					for(label in obj){
						var val=obj[label];
						if(defaultCity!=undefined && $.trim(defaultCity)!=''){
							if(val.citname.toLowerCase()==defaultCity.toLowerCase()){
								options+="<option value='"+val.citname+"' data-count='"+val.citid+"' selected='selected'>"+val.citname+"</option>";
							}
							else{
								options+="<option value='"+val.citname+"' data-count='"+val.citid+"'>"+val.citname+"</option>";
							}
						}
						else{
							options+="<option value='"+val.citname+"' data-count='"+val.citid+"'>"+val.citname+"</option>";
						}
					}
					var splitAppendIds=appendIdsCity.split('@~@');
					if(splitAppendIds.length > 0){
						$.each(splitAppendIds, function(k, v) {
							if($.trim(v)!=""){
								if($('#'+v).length > 0){
									$('[id="'+v+'"]').html(options);
									$('[id="'+v+'"]').parents('.form-group').removeClass('hidden');								
									$('[id="'+v+'"]').selectpicker('refresh');
								}
							}
						});
					}
				}			
			},
			error: function(x, e){
				if(e=="parsererror" && x.responseText=="session is not avaliable"){
					$('#toaster').html('');
					iHUB.toaster.redMessageToaster(multilingualKeyValue('1','34'));
					return false;
				}
			},
			complete:function(){
			}
		});
	}
}
function showCountryStateCityDetails(defaultCountry,isDisabled){
	var stateDB,cityDB;
	var State=$('#txtState_div').html();
	var City=$('#txtCity_div').html();
	if(State==""||State==undefined||State=="undefined"||State=="null"||State==null){
		stateDB='';
		statedbs=stateDB;
	}
	else{
		stateDB=State;
		statedbs=stateDB;
	}
	if(City==""||City==undefined||City=="undefined"||City=="null"||City==null){
		cityDB='';
		citydbs=cityDB;
	}
	else{
		cityDB=City;
		citydbs=cityDB;
	}
	if($.trim(defaultCountry)==''){
		defaultCountry=$('#txtCountry_div').html();
		isDisabled="false";
	}
	setTimeout(function() {
		countryDetails("txtCountry@~@countryOnLogin@~@txtCountryOrg@~@txtOrgCountryOrg",defaultCountry,"txtState@~@stateOnLogin@~@txtOrganizationStateOrg@~@txtUserStateOrg",stateDB,"txtCity@~@cityOnLogin@~@txtCityOrg",cityDB,isDisabled);
	}, 50);
}
function onCountryChange(countyName,stateName){
	var count=$('select[name="'+countyName+'"] option:selected').attr('data-count');
	if(stateName=="stateOnLogin"){
		$('#stateOnLogin option').remove();
		$('#cityOnLogin option').remove();
		$('.selectpicker').selectpicker('refresh');
	}
	if(count!="" && count=="1"){
		getStates(count,stateName,"","","");
		$('#txtState,#txtCity,#cityOnLogin,#stateOnLogin,#txtOrganizationStateOrg,#txtUserStateOrg,#txtCountryOrg,#txtOrgCountryOrg').parents('.form-group').removeClass('hidden');
	}
	else{
		$('#txtState,#txtCity,#cityOnLogin,#stateOnLogin,#txtOrganizationStateOrg,#txtUserStateOrg,#txtCountryOrg').parents('.form-group').addClass('hidden');
	}
}	
function onStateChange(countyName,stateName,cityName){
	var count1=$('select[name="'+countyName+'"] option:selected').attr('data-count');
	var count2=$('select[name="'+stateName+'"] option:selected').attr('data-count');
	getCities(count1,count2,cityName,"");
}
function validPassword(temp){
	var id=temp.target.id;
	if(temp.keyCode!=8 && temp.target.value.length>=10 && temp.keyCode!=32){
		iHUB.validation.errorMessage(id,multilingualKeyValue('327','34'),"");
		return false;
	}
	else if(temp.keyCode==32){
		iHUB.validation.errorMessage(id,multilingualKeyValue('328','34'),"");
		return false;
	}
	iHUB.validation.resetValidationColourText();
	return true;
}
function setDisplayName(DisplayName){
	var externalId=$.trim($("#externalId").val());
	if(externalId!=""){
		DisplayName = externalId;
	}
	if($.trim(DisplayName)==""){
		DisplayName = $.trim($('#txtDisplayName_div').html())!="" ? $.trim($('#txtDisplayName_div').html()) : $.trim($('#txtDisplayName').val());
	}
	$('.displayName .disWrap').text(""+DisplayName+" ");
	$('.userNameMob').text(""+DisplayName+" ");
	$('.displayName').attr('title',""+DisplayName+" ");
	/* added new */
	$('.userDetails .nameNew').text(DisplayName);
	$('.userNdesk .fullname').text(DisplayName);
	var spaceIndex = DisplayName.indexOf(' ');
	var shortname = DisplayName.split('')[0]+""+((spaceIndex > -1) ? DisplayName.split('')[spaceIndex+1] : "");
	$('.userNdesk + .shortname').text(shortname.toUpperCase());
	if($.trim(shortname).length==1){
		$('.userProfile .dp_txt').addClass('singleText');
	}
	else{
		$('.userProfile .dp_txt').addClass('doubleText');
	}
	$('.userProfile .dp_txt').text(shortname.toUpperCase());
}
function cscConnect() {
	var orgId=$.trim($('[name="orgId"]').val());
	if($.trim(orgId)=="")
		orgId=orgID;
	var formId=$.trim($('[name="formId"]').val())!="" ? $.trim($('[name="formId"]').val()) : $.trim($('#userFormId').val());
	var instanceID=new URL(document.URL).searchParams.get("instanceId");
	instanceID = $.trim(instanceID)!="" ? $.trim(instanceID) : $.trim($('#txtInstanceId').val());
	var additionalParams = '{ "instanceId": "'+instanceID+'", "param1": "p1value", "formId": "'+formId+'", "param3": "p3value" }';
	var form = document.createElement("form");
	form.setAttribute("method", "post");
	form.setAttribute("action", "/EForms/jsp/CSCConnect.jsp");

	var hiddenField1 = document.createElement("input"); 
	hiddenField1.setAttribute("type", "hidden");
	hiddenField1.setAttribute("name", "org_id");
	hiddenField1.setAttribute("value", orgId);
	
	var hiddenField2 = document.createElement("input"); 
	hiddenField2.setAttribute("type", "hidden");
	hiddenField2.setAttribute("name", "order_form_id");
	hiddenField2.setAttribute("value", formId);
	
	var hiddenField3 = document.createElement("input"); 
	hiddenField3.setAttribute("type", "hidden");
	hiddenField3.setAttribute("name", "paymentGatewayType");
	hiddenField3.setAttribute("value", "online");
	
	if(additionalParams!=undefined) {
		var hiddenField4 = document.createElement("input"); 
		hiddenField4.setAttribute("type", "hidden");
		hiddenField4.setAttribute("name", "additionalParams");
		hiddenField4.setAttribute("value", additionalParams);		
		form.appendChild(hiddenField4);
	}
	
	form.appendChild(hiddenField1);
	form.appendChild(hiddenField2);
	form.appendChild(hiddenField3);
	
	document.body.appendChild(form);

	window.open('', '_self');

	form.submit();
}
function minorUser(){
	if(($('#isMinorYes').is(':checked'))){
		$('.iamminor').removeClass('hidden');
		$('#agreeConditionUser').parent().parent().addClass('hidden');
		$('#agreeConditionUser').attr('disabled','disabled');
		$('#agreeConditionUser').attr('checked',false);
		if($('#userRegistration:visible').length==1){
			$('#agreeConditionUser').attr("onclick","openCMmodalFromParent('');");
			$('#agreeConditionUser').siblings('span').attr("onclick","openCMmodalFromParent('');");
			$('a.termsCondition').attr("onclick","openCMmodalFromParent('');");
		}
		else{
			$('#agreeConditionUser').attr("onclick","openCMmodal('');");
			$('#agreeConditionUser').siblings('span').attr("onclick","openCMmodal('');");
			$('a.termsCondition').attr("onclick","openCMmodal('');");
		}
	}
	else{
		$('.iamminor').addClass('hidden');
		$('#agreeConditionUser').parent().parent().removeClass('hidden');
		$('#agreeConditionUser').attr('disabled','disabled');
		$('#agreeConditionUser').attr('checked',false);
		if($('#userRegistration:visible').length==1){
			$('#agreeConditionUser').attr("onclick","openCMmodalFromParent('User');");
			$('#agreeConditionUser').siblings('span').attr("onclick","openCMmodalFromParent('User');");
			$('a.termsCondition').attr("onclick","openCMmodalFromParent('User');");
		}
		else{
			$('#agreeConditionUser').attr("onclick","openCMmodal('User');");
			$('#agreeConditionUser').siblings('span').attr("onclick","openCMmodal('User');");
			$('a.termsCondition').attr("onclick","openCMmodal('User');");
		}
	}
}
function openCMmodalFromParent(type){
	if (typeof openConsentManagementModal == 'function')  
		openConsentManagementModal(type);
}
function openCMmodal(type){
	if (typeof window.parent.openConsentManagementModal == 'function')  
		window.parent.openConsentManagementModal(type);
}
function openAgreeCondition(policyObj,type){
	$('#consentData'+type).val(JSON.stringify(policyObj));
	$('#agreeCondition'+type).removeAttr('disabled');
	$('#agreeCondition'+type).attr('checked',true);
	document.getElementById('agreeCondition'+type).checked = true;
	$('#agreeCondition'+type).removeAttr('onclick');
	$('#agreeCondition'+type).parent('label').removeAttr('onclick');
	$('#agreeCondition'+type).siblings('span').removeAttr('onclick');
	$('#spanAgreeCondition'+type).attr("onclick","return false;");
	$("#controlIndicator"+type).attr("onclick","$(\'#spanAgreeCondition"+type+"\').click(function() {return false;});");
	if (typeof closeConsentManagementModal == 'function')  
		closeConsentManagementModal();
}
function closeAgreeCondition(policyObj,type){
	$('#consentData'+type).val(JSON.stringify(policyObj));
	$('#agreeCondition'+type).attr('disabled','disabled');
	$('#agreeCondition'+type).attr('checked',false);
	$('#agreeCondition'+type).removeAttr('onclick');
	$('#agreeCondition'+type).siblings('span').removeAttr('onclick');
	if (typeof closeConsentManagementModal == 'function')  
		closeConsentManagementModal();
}
function checkDuplicate(){
	var loginId =$('#txtLoginId').val();
	var check;
	if(loginId!=null && loginId!=""){
		var params = [loginId];
		check=validateChkDuplicate(params); 
	}
	if(!check){
		return false;
	}
	else{
		return true ;
	}	
}
function validatePWD(pwd,txtPwd){
	var specialChars = "@!#$^*_:";
	var ntAllwdChars = "%()-=`~{}[]\|;'\",./<>\?&+";
	if(pwd.length<6 || pwd.length>10){
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('303','34'),100);
		                  /* Password should contain minimum 6 and maximum 10 letters.txt27 */
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if(pwd.length<6){
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('329','34'),100);
		                  /* Password should contain minimum 6 and maximum 10 letters.txt27 iHUB.multilingual.gmv('txt27')*/
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if(pwd.length>10){
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('330','34'),100);
		                  /* Password should contain minimum 6 and maximum 10 letters.txt27 iHUB.multilingual.gmv('txt27')*/
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	for(i = 0; i < ntAllwdChars.length;i++){
		if(pwd.indexOf(ntAllwdChars[i])>-1){
			iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('302','34')+" "+ntAllwdChars[i]+" "+iHUB.multilingual.gmv('txt29'),100);    /*  You can not use:txt28   character in your password.txt29 */
			$('[id="'+txtPwd+'"]').val("");
			$('.ConfirmPasswOrd').val("");
			validate=false;
			return false;
		}
		else{
			validate = true;
		}
	}
	validate=false;
	for(i = 0; i < specialChars.length;i++){
		if(pwd.indexOf(specialChars[i])>-1){
			validate = true;
			break;
		}
	}
	if(!validate){
           /* Password should contain at-least one special character among @!#$^*_:txt30 */
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('300','34')+" @!#$^*_+:",100);
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if(pwd.indexOf("@@")>-1){
		/*   You can not use @@ character in your password.txt31 */
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('299','34'),100);
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if (pwd.match(/\d+/g) == null) {
		 /*  Password should contain at least one Numeric Digit.txt32 */	
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('298','34'),100);
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if(pwd.match(/[a-z]/) == null){
		/* Password should contain at least one lower case Character.txt33 */
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('297','34'),100);
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	if(pwd.match(/[A-Z]/) == null){
		 /* Password should contain at least one upper case Character.txt34 */
		iHUB.validation.errorMessage(txtPwd,multilingualKeyValue('296','34'),100);
		$('[id="'+txtPwd+'"]').val("");
		$('.ConfirmPasswOrd').val("");
		validate=false;
		return false;
	}
	return true;
}
function AlphaNumWithoutCommaChar(key,e){
	if (navigator.appName =="Microsoft Internet Explorer"){
		var oKey = event.keyCode;
		
		

		if((oKey > 64 && oKey < 91) || (oKey > 96 && oKey < 123) || (oKey == 32)  || (oKey >= 45 && oKey <= 57))
		{
			return true;
		}
		else
		{
			return false;
		}
	}else{

		var oKey = e.charCode;
		
		
		if((oKey > 64 && oKey < 91) || (oKey > 96 && oKey < 123) || (oKey == 0) || (oKey == 32)  || (oKey >= 45 && oKey <= 57))
		{
			return true;
		}
		else
		{
			return false;		
		}
	}	
}
function onlyEmail(key,e){
	if (navigator.appName =="Microsoft Internet Explorer"){
		var oKey = event.keyCode;
		if(oKey == 45 || oKey == 46 || oKey == 95 || (oKey > 47 && oKey <58) || (oKey >= 64 && oKey < 91) || (oKey > 96 && oKey < 123)){
			return true;
		}
		else{
			
		}
	}else{
		var oKey = e.charCode;
		if(oKey == 45 || oKey == 46 || oKey == 95 || (oKey > 47 && oKey <58) || (oKey >= 64 && oKey < 91) || (oKey > 96 && oKey < 123 || oKey==0)){
			return true;
		}
		else{
			return false;//alert ('Only Alphanumeric in this field.');
		}
	}	
}
function validateChkDuplicate(arrValues)
{
var a="";
var check = false;
	for(i=0;i<arrValues.length;i++){
   		a=a+"-@@ion@@-"+arrValues[i];
  	}

	var http_request=fnGetXMLHttpObject();
	var orgID=document.getElementById("orgId").value;
	var formID=document.getElementById("formId").value;
	if(http_request!=null){
		var pValidationServlet ="/EForms/SecureCheckDuplicate"; 
		http_request.open('POST',pValidationServlet,false); 
		http_request.onreadystatechange = function() { 
			check = validateChkDuplicateResponse(http_request); }; 	 	
		var parameters = orgID + "-@@ion@@-" + formID + a;

		http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		http_request.send("Params="+parameters);
	}
	return check;
} 

function validateChkDuplicateResponse(http_request){
var check = false;
	if (http_request.readyState == 4){

		if (http_request.status == 200) {
			var i=http_request.responseText;
			if(http_request.responseText!="" || http_request.responseText!=null){
				check=http_request.responseText ;
				if(check=='invalid')
				{
					check = false;
				}
				else
				{
					check = true;

				}		

			}
		}
	}
	return check;
} 
function fnGetXMLHttpObject(){
	var http_req = null;	   
	if (window.XMLHttpRequest){ // Mozilla, Safari,...
		http_req = new XMLHttpRequest();
		if (http_req.overrideMimeType)
		{
			http_req.overrideMimeType('text/plain;charset=UTF-8');
		}
		return http_req;
	}else if (window.ActiveXObject){ // IE		           
		try {
			http_req = new ActiveXObject("Msxml2.XMLHTTP");
		}
		catch (e)
		{
			try {
				http_req = new ActiveXObject("Microsoft.XMLHTTP");
			} 
			catch(e){}
		}
		return http_req;
	}
	
	return http_req;
}
function init_captcha()
{
	var isAdmin= (document.getElementById('adminFlag')==undefined ||  document.getElementById('adminFlag')==null) ? "" : document.getElementById('adminFlag').value;
	var isListing=(document.getElementById('eicuListing')==undefined ||  document.getElementById('eicuListing')==null) ? "" : document.getElementById('eicuListing').value;
	if(isAdmin=='Y' || isListing=='true'){
}
else {
	/* added for job CR */
	if(typeof captchaService == 'object'){
		captchaService.setAppId(30);
		captchaService.createCaptcha(captchaDivId);
	}
	else if(typeof captchaService == 'undefined'){
		if(!($('head').html().indexOf('/captchaservice/css/captchaservice.css')>-1))
			$('head').append('<link href="/captchaservice/css/captchaservice.css?version='+$.trim(hubversion)+'" rel="stylesheet" type="text/css">');
		$.when(
			$.get('/captchaservice/js/captchaService.js?version='+$.trim(hubversion)),
			$.Deferred(function(deferred){
				$(deferred.resolve);
			})
		).done(function(succesResponse){
			log('captcha css js loaded');
			captchaService.setAppId(30);
			captchaService.createCaptcha(captchaDivId);
		}).fail(function(failedResponse){
			log('captcha css js loadinf failed');
			log(failedResponse.status+" "+failedResponse.statusText+" "+failedResponse.responseText);
		});
	}
}
	/* added for job CR */
}
function handleEFormsFWResponseForIonCaptchaForgotPWDNew(http_request,button_id,formId,orgId,key){
	if(typeof window.handleEFormsCustomResponseForIonCaptchaForgotPWDNew == 'function'){
		handleEFormsCustomResponseForIonCaptchaForgotPWDNew(http_request,button_id,formId,orgId,key);
	}
	else{
		var ERRORStr = new Array();
		var responseError='';	
		var fields;	
		var flag='';
		var check="";
		if (http_request.readyState == 4){
			if (http_request.status == 200) {
				if(http_request.responseText != null){
					check=http_request.responseText;
					if(check.indexOf('Valid')!=-1){	
						$('#myDiv').html(" ");
						var app_seq_no=$('#useridForgotPwd').val();
						if(app_seq_no!=""){
							app_seq_no=app_seq_no+"_"+formId+orgId+"_"+instanceId;
						}
						var http_request=fnGetXMLHttpObject();	
						if(http_request!=null){
							var pValidationServlet ="/EForms/ForgotPwd"; 
							init_captcha();
							var parameters=app_seq_no+","+formId+","+orgId+",NA,ForgotPwd";
							http_request.open('POST',pValidationServlet,true); 
							http_request.onreadystatechange = function() { fnEFormsFWForgotPWDNew(http_request,button_id); }; 	 	  
							http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
							http_request.send("Params="+parameters+"&identifier=Submit&captchaService_imageKey="+key);
						}
					}
					else{
						alert(multilingualKeyValue('295','34'));                /*  "Please enter correct text shown in image":alrt9 */
						$('#captchaService_answer').val("");
						init_captcha();
						document.getElementById(button_id).removeAttribute("disabled");
						return false;
					}
				}
			}
		}
	}
}
function fnEFormsFWForgotPWDNew(http_request,button_id){
	if (http_request.readyState == 4){
		if (http_request.status == 200) {
			if(http_request.responseText != null){
				check=http_request.responseText;
				$('#myDiv').html(http_request.responseText);
				if(http_request.responseText=='This is an invalid Application Sequence Number'){
					var custom_msg=multilingualKeyValue('331','34');
					$('#myDiv').html(custom_msg);
				}
				document.getElementById(button_id).removeAttribute("disabled"); 
				clicked="true";
			}
		}
	}
}
function openAllMandatoryColumnForUserSignUp(userSignupMandatoryColumnList){
	if($.trim(userSignupMandatoryColumnList)=="")
		userSignupMandatoryColumnList="txtAppName,txtEmail,txtPassword";
	var colArray=userSignupMandatoryColumnList.split(',');
	for(i=0;i<colArray.length;i++){
		$('#userRegistration').find('[name="'+$.trim(colArray[i])+'"]').parents('.form-group').removeClass('hidden');
		if(!$('#userRegistration').find('[name="'+$.trim(colArray[i])+'"]').parents('.form-group').hasClass('mandTxt'))
			$('#userRegistration').find('[name="'+$.trim(colArray[i])+'"]').parents('.form-group').addClass('mandTxt')
	}
}
function wrapWithRow(){
	var a=$('#userRegistration').find('.col-md-8').find('.form-group.posRel1:not(.hidden)');
	for(var i=0;i<a.length;i++){
		if(!$(a[i]).hasClass('wrapAdded') && $(a[i+1]).length!=0){
			a.slice(i, i + 2).wrapAll('<div class="row"></div>');
			a.slice(i, i + 2).addClass('wrapAdded');
		}
		else if(!$(a[i]).hasClass('wrapAdded')){
			$(a[i]).wrap('<div class="row"></div>');
			$(a[i]).addClass('wrapAdded');
		}
	}
}
function forgetPasswordData(){
//log("Inside forgetPasswordData()");
var masterform_id=$('[name="formId"]').val();
var orgID=$('[name="orgId"]').val();
var txtInstanceId=$.trim($('#txtInstanceId').val())=="" ? $.trim($('#instanceId').val()) : $.trim($('#txtInstanceId').val());
var txtEmail=$("#useridForgotPwd").val();
var txtloginId=txtEmail+"_"+masterform_id+""+orgID+"_"+txtInstanceId;
if(txtloginId==""||txtloginId=="null"||txtloginId==null||txtloginId=="undefined"||txtloginId==undefined){
	//log("Login id is null");
			//	iHUB.toaster.blackMessageToaster(x.readyState + " "+ x.status +" "+ e.msg);
}
	var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH*/
		$.ajax({ 
			type: "POST",
			url: url,
			data: {
				orgID:orgID,
				masterform_id:masterform_id,
				txtInstanceId:txtInstanceId,
				txtEmail:txtEmail,
				txtloginId:txtloginId,
				subAction:"forgetpasswordmail"
			},
			dataType: "json",
			/* async:false, */
			success: function(result){
				//log("Mail sent");
				forgetPasswordDataResponse(result);
			},
			error: function(x, e){
				iHUB.toaster.blackMessageToaster(x.readyState + " "+ x.status +" "+ e.msg);
			}
		});
} 
function forgetPasswordDataResponse(response){
	var newResponse=JSON.stringify(response);
	var obj = JSON.parse(newResponse);
	for(label in obj){
		if(label=="catalogue"){
			var val=obj[label];
			if(val=="login id does not exists with proper app_seq_no"){
				alert(multilingualKeyValue('332','34'));
				$("#useridForgotPwd").val("");
			}
		}
	}
}
function openFGmodal(){
	$('#useridForgotPwd').val('');
	iHUB.validation.resetValidationColourText();
	initiHUB("captchaHolderFG");	
	$('#ForgotPassmodal').modal();
}
function preValidationFG(){
	if($('#ForgotPassmodal #useridForgotPwd').val()==""){
		iHUB.validation.errorMessage("useridForgotPwd",""+multilingualKeyValue('333','34')+" "+multilingualKeyValue('4','34'),"0");/*  Please enter Name.mesg43 */
		return false;
	}
	else{
		iHUB.validation.resetValidationColourText();
		if(validateCaptchaiHUBWS("ForgotPassmodal")){
			forgetPasswordDataNew();
		}
	}
}
function forgetPasswordDataNew(){	
	//log("Inside forgetPasswordData()");
	var masterform_id=$.trim($('[name="formId"]').val())=="" ? $.trim($('[name="userFormId"]').val()) : $.trim($('[name="formId"]').val());
	var orgID=$('[name="orgId"]').val();
	var txtInstanceId=$.trim($('#txtInstanceId').val())=="" ? $.trim($('#instanceId').val()) : $.trim($('#txtInstanceId').val());
	var txtEmail=$("#useridForgotPwd").val();
	var txtloginId=txtEmail+"_"+masterform_id+""+orgID+"_"+txtInstanceId;
	var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH */
	$.ajax({ 
		type: "POST",
		url: url,
		data: {
			orgID:orgID,
			masterform_id:masterform_id,
			captchaService_imageKey:$('#captchaService_imageKey').val(),/* #ForgotPassmodal  */
			captchaService_answer: (isNewLoginSignUp ? $('.slide-nav-right:visible').find('#captchaService_answer').val() : $('#ForgotPassmodal #captchaService_answer').val()),
			appId:"30",
			txtInstanceId:txtInstanceId,
			txtloginId:txtloginId,
			subAction:"forgetpasswordmailnew"
		},
		dataType: "json",
		/* async:false, */
		success: function(result){
			//log("Mail sent");
			forgetPasswordDataResponseNew(result);
		},
		error: function(x, e){
			iHUB.toaster.blackMessageToaster(x.readyState + " "+ x.status +" "+ e.msg);
		}
	});
}
function forgetPasswordDataResponseNew(result){
	if(result.FG.captchaStatus!=undefined && result.FG.captchaStatus!=null){
		if($.trim(result.FG.captchaStatus).toLowerCase()!="true"){
			alert(multilingualKeyValue('295','34')); 
			initiHUB("captchaHolderFG");
			return false;
		}
		else{			
			if($.trim(result.FG.FGresult).indexOf('sent') > 0){				
				/* alert("Reset password link sent to your email Id \n\n. If you don't see the email in your inbox, please check your spam or junk email folder."); */				
				alert(multilingualKeyValue('334','34')+"\n\n"+multilingualKeyValue('335','34'));
				if(isNewLoginSignUp)
					closeAllSlide();
				else
					$('#ForgotPassmodal').modal('hide');
			}
			else{
				if($.trim(result.FG.FGresult)=="login id does not exists"){
					/* alert("Login id doesn't exist"); */
					alert(multilingualKeyValue('336','34'));
				}
				else{
					alert($.trim(result.FG.FGresult));
				}	
				initiHUB("captchaHolderFG");
			}
		}
	}
	else{
		return false;
	}
}

/* added for job CR */
var userTypesOrg="";
function signupAsCorporate(){
	userTypesOrg="Corporate";
	$("#signUpTypes").html("");
	$("#signUpTypes").append(multilingualKeyValue('337','34'));
	clearValues();
	/* showCountryStateCityDetails('India',false); */
	openNewOrgRegistrationModal();
	/* $('#socialSignUpOrg').addClass('hidden');
	$('#txtEmailOrg').parent().parent().removeClass('row');
	$('#txtFirstNameOrg').parent().parent().removeClass('row'); */
	$('#txtOrganizationWebsiteOrg').parent().addClass('mandTxt');
	$('.corpaggregator').removeClass('hidden');
	$('.controlChk a').removeAttr('href');
	$('#orgRegistration .controlChk').remove();
	$('#orgRegistration .controlChk').addClass('hidden');
	$('#orgRegistration .controlChk #agreeConditionOrg').removeAttr('disabled');
	$('#orgRegistration .controlChk #agreeConditionOrg').attr('checked','checked');
	setTimeout(function() {
		appendPasswordRules();
		checkCountryOrg(defaultCountry,false);
	}, 1500);
}
/* commented as its already present 
 function signupAsDistributer(){

	userTypesOrg="Distributor";
	$("#signUpTypes").html("");
	$("#signUpTypes").append('Sign Up as Distributor');
	clearValues();
	openNewOrgRegistrationModal();
	$('#txtOrganizationWebsiteOrg').parent().removeClass('mandTxt');	
	$('#orgRegistration .controlChk').remove();
	$('#orgRegistration .controlChk').addClass('hidden');
	$('#orgRegistration .controlChk #agreeConditionOrg').removeAttr('disabled');
	$('#orgRegistration .controlChk #agreeConditionOrg').attr('checked','checked');
	setTimeout(function() {
		appendPasswordRules();
		checkCountryOrg(defaultCountry,false);
	}, 1500);
}

function signupAsPublisher(){
	userTypesOrg="Publisher";
	$("#signUpTypes").html("");
	$("#signUpTypes").append("Sign Up as Publisher");
	clearValues();
	openNewOrgRegistrationModal();
	$('#txtOrganizationWebsiteOrg').parent().removeClass('mandTxt');
	$('#orgRegistration .controlChk').remove();
	$('#orgRegistration .controlChk').addClass('hidden');
	$('#orgRegistration .controlChk #agreeConditionOrg').removeAttr('disabled');
	$('#orgRegistration .controlChk #agreeConditionOrg').attr('checked','checked');
	setTimeout(function() {
		appendPasswordRules();
		checkCountryOrg(defaultCountry,false);
	}, 1500);
} */
/* commented as already present in marketPlaceJob
function openNewOrgRegistrationModal(){
	if($.trim(orgColNotReqArr)==""){
		moduleVisibilityColumnsUser();
	}
	$('#orgRegistration').find('.signCont').find('.successBodyNew').addClass('hidden');
	$('#orgRegistration').find('.signCont').find('.scroll_bar').removeClass('hidden');
	$('#orgRegistration').find('.modal-footer').removeClass('hidden');
	$('#orgRegistration').modal();	
	if(!($('#app_seq_no_div').length>0)){
		if (typeof initiHUB == 'function' && $('#OrgCaptchaHolder').length > 0){	
			initiHUB("captchaHolderUser");
			$('#OrgCaptchaHolder').html($('#captchaHolderUser').html());
		}	
	}
} */
function initiHUB(captchaDivId){
	if(typeof captchaService == 'object'){
		captchaService.setAppId(30);
		captchaService.createCaptcha(captchaDivId);
	}
	else if(typeof captchaService == 'undefined'){
		if($('link[href*="/captchaservice/css/captchaservice.css"]').length < 1)
			$('head').append('<link href="/captchaservice/css/captchaservice.css?version='+$.trim(hubversion)+'" rel="stylesheet" type="text/css">');
		$.when(
			$.get('/captchaservice/js/captchaService.js?version='+$.trim(hubversion)),
			$.Deferred(function(deferred){
				$(deferred.resolve);
			})
		).done(function(succesResponse){
			log('captcha css js loaded');
			captchaService.setAppId(30);
			captchaService.createCaptcha(captchaDivId);
		}).fail(function(failedResponse){
			log('captcha css js loadinf failed');
			log(failedResponse.status+" "+failedResponse.statusText+" "+failedResponse.responseText);
		});
	}
}
function validateCaptchaiHUBWS(captchaDivId){
	if ($('#'+captchaDivId).length) {
		var key = $('#captchaService_imageKey').val();
		/* var key = $('#'+captchaDivId+' #captchaService_imageKey').val(); */
		var answer = isNewLoginSignUp ? $('.slide-nav-right:visible').find('#captchaService_answer').val() : $('#'+captchaDivId+' #captchaService_answer').val();
		if (answer == '') {
			alert(multilingualKeyValue('338','34')); 
			return false; 
		}
		return true;
	}
	else{
		return false;
	}
}
function validateCaptchaiHUBWOS(captchaDivId){
	if ($('#'+captchaDivId).length) {
		var key = $('#captchaService_imageKey').val();
		/* var key = $('#'+captchaDivId+' #captchaService_imageKey').val(); */
		var answer = $('#'+captchaDivId+' #captchaService_answer').val(); 
		if (answer == '') {
			alert(multilingualKeyValue('338','34')); 
			return false; 
		}
		var url=iHUB.url.iDH();/* iHUB.url.get(); changed to iDH*/
		$.ajax({
			type: "POST",
			url: url,
			data: {
				orgID:orgID,
				captchaService_imageKey:key,
				captchaService_answer:answer,
				appId:'30',
				subAction:"captchaValidation"
			},
			dataType: "json",
			success: function(result){
				var newResponse=JSON.stringify(result);
				var obj = JSON.parse(newResponse);
				if (obj.status.toLowerCase()!="true") {
					alert(multilingualKeyValue('295','34')); 
					initiHUB(captchaDivId); 
					return false; 
				}
				return true;
			},
			error: function(x, e){
				if(e=="parsererror" && x.responseText=="session is not avaliable"){
					createIncorrectURLLoader();
					fnLogoutICMP('1');
					return false;
				}
			},
			complete: function(){
				hideLoader_iDH();
			}
		});
		/* setTimeout(loader,1000); */
		/* $.post("/EForms/IonCaptchaValidation",{ "captchaService_imageKey": key, "captchaService_answer": answer, 'appId': 30 })
		.done(function (check) {
			if (check.indexOf('Valid')=== -1) {
				alert("Please enter correct text shown in image"); 
				initiHUB(captchaDivId); 
				return false; 
			}
			return true;
		});  */
	}
	else{
		return false;
	}
}
function saveOrgData() {
	var userDetailsValidate = eval('validateOrganizationDetails()');
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),
		sURLVariables = sPageURL.split('&'),
		sParameterName,
		i;
	sParameterName = sURLVariables;
	for (var i = 0; i < sParameterName.length; i++) {
		if (sParameterName[i].split('=')[0] === 'instanceId') {
			instanceId = sParameterName[i].split('=')[1];
		}
	}
	$('#txtInstanceId').val(instanceId);
	$('#languageId').val(defaultLanguageId);
	$('#timezoneId').val(defaultTimeZone);
	if (userDetailsValidate){
		if (document.getElementById('NoOrg').checked) {
			if (eval('validatelogin()')) {
				var goAhead=false;
				if($('#agreeConditionOrg').length > 0){
					if($('#agreeConditionOrg:checked').length==0){ 
						alert(multilingualKeyValue('265','34'));        /* orgreg45:*/
					}
					else{
						goAhead=true;
					}
				}
				else{
					goAhead=true;
				}				
				if(goAhead){
					if($('#isMinor').val()==""){
						$('#isMinor').val("0");
					}
					$('#txtCountryOrg').removeAttr('disabled', 'disabled');
					$('#txtCountryOrg').selectpicker('refresh');
					$('#txtOrgCountryOrg').removeAttr("disabled","disabled");
					$('#txtOrgCountryOrg').selectpicker('refresh');
					if (window.parent.isNewOrgRegistration && typeof allowOrgSignUp == 'function'){ 
						allowOrgSignUp();
					}
					else{
						eval(validateIonCaptcha("saveFormData","Submit"));
					}
				}
			}else {
				iHUB.validation.errorMessage("txtLoginId_tempOrg",multilingualKeyValue('339','34'),220);   /* orgreg47: */
			}
		}
		else if (document.getElementById('YesOrg').checked) {
			//validateUserCredentials();
			dailyPswdChk();
		}
	}
}	
function dailyPswdChk(){
	var dailyPassword="";
	var url = iHUB.url.iDH();/* iHUB.url.get(); changed to iDH*/
	var txtInstanceId=$.trim($('#txtInstanceId').val())=="" ? $.trim($('#instanceId').val()) : $.trim($('#txtInstanceId').val());
	var orgID=$('#orgId').val();
	var formId=$('#formId').val();
	$.ajax({
		type : "POST",
		url : url,
		data : {
			masterform_id : formId,
			orgID :orgID,
			subAction : 'checkdailypasswordrequirement',
			txtInstanceId : txtInstanceId,
		},
		dataType : "json",
		success : function(result) {
			log('result'+result);
			var res = JSON.stringify(result);
			var obj = JSON.parse(res);
			//log(obj);
			if($.trim(obj.isdailypasswordrequired) == "true"){
				var password2 = prompt(multilingualKeyValue('340','34'));
				if (password2 == null || password2 == "") {
					log("no action");
				} else {
					dailyPassword= password2;
				}
			}
		},
		error: function(x, e){

		},
		complete: function(){
			validateUserCredentials(dailyPassword);
		}
	}); 
}
function validateOrgColumns(val){
	if(userColNotReqArr.indexOf(val)>-1)
		return false;
	else
		return true;
}
function alreadyUserYes(){
	$('.iamuser').removeClass('hidden');
	$('.iamuser').val() == "";
	$('.iamnotanuser').addClass('hidden');
	$('.iamnotanuser').val() == "";
}
function alreadyUserNo(){
	$('.iamuser').addClass('hidden');
	$('.iamuser').val() == "";
	$('.iamnotanuser').removeClass('hidden');
	$('.iamnotanuser').val() == "";
}
function validateWebsite(addr, db) {
	if (addr == '') return true;
	var invalidChars = '\/\'\\ ";:?!()[]\{\}^|<>#$!~`^';
	for (var i = 0; i < invalidChars.length; i++) {
		if (addr.indexOf(invalidChars.charAt(i), 0) > -1) {
			if (db) alert(multilingualKeyValue('341','34'));       /* orgreg73: */
			return false;
		}
	}
	for (var i = 0; i < addr.length; i++) {
		if (addr.charCodeAt(i) > 127) {
			if (db) alert(multilingualKeyValue('342','34'));  /* orgreg74: */
			return false;
		}
	}
	var atPos = addr.indexOf('.', 0);
	if (atPos == -1) {
		if (db) alert(multilingualKeyValue('343','34')); /* orgreg75: */
		return false;
	}
	if (atPos == 0) {
		if (db) alert(multilingualKeyValue('344','34'))   /* orgreg76:); */
		return false;
	}
	if (addr.indexOf('.', atPos + 1) < 0) {
		if (db) alert(multilingualKeyValue('345','34'));     /* orgreg77:); */
		return false;
	}
	if (addr.indexOf('..', 0) != -1) {
		if (db) alert(multilingualKeyValue('346','34'));  /* orgreg78: */
		return false;
	}
	var suffix = addr.substring(addr.lastIndexOf('.') + 1);
	if (suffix.length != 2 && suffix != 'com' && suffix != 'net' && suffix != 'org' && suffix != 'edu' && suffix != 'int' && suffix != 'mil' && suffix != 'gov' & suffix != 'arpa' && suffix != 'biz' && suffix != 'aero' && suffix != 'name' && suffix != 'coop' && suffix != 'info' && suffix != 'pro' && suffix != 'museum' && suffix != 'COM' && suffix != 'NET' && suffix != 'ORG' && suffix != 'EDU' && suffix != 'INT' && suffix != 'MIL' && suffix != 'GOV' & suffix != 'ARPA' && suffix != 'BIZ' && suffix != 'AERO' && suffix != 'NAME' && suffix != 'COOP' && suffix != 'INFO' && suffix != 'PRO' && suffix != 'MUSUEM') {
		if (db) alert(multilingualKeyValue('347','34'));   /* orgreg79: */
		return false;
	}
	return true;
}
function clearValues(){
	$(".form-control").val("");
	$('#txtCityOrg').selectpicker('refresh');
	$('#txtUserStateOrg').selectpicker('refresh');
	$('#txtOrganizationStateOrg').selectpicker('refresh');
	$('#institutionTypeOrg').selectpicker('refresh');
	$("#isMinorYes,#isMinorNo").prop("checked",false);
	$('.iamnotanuser').addClass('hidden');
	$('.iamuser').addClass('hidden');
	$(".iamminor").addClass("hidden");
	$(".instaData").addClass("hidden");
	$(".instituteType").addClass("hidden");
	$(".corpaggregator").addClass("hidden");
	/* initiHUB("OrgCaptchaHolder"); */ /* commenting as it is also getting called in next respective functions */
	$("#YesOrg,#NoOrg").prop("checked",false);
	$('#txtSalutationOrg').val('Dear');
	$(".text-danger").addClass("hidden");
	$('.form-control').css('border-color','');
	$('button.btn').css("border-color","");
	$(".selName ").removeClass("in");
	$("#YesAggr,#NoAggr").prop("checked",false);   /* added for JObs CR */
	if($('#orgId').val()=="1016"){
		$("#txtOrgCountryOrg").val("India");
		$('#txtCountry').val("India");
		$('#txtCountryOrg').val("India");
	}
	/* modified by Sunita for ticket 713261 */
	if (document.getElementById('agreeConditionUser').checked){
		$('#agreeConditionUser').attr('checked',false);
		$('#agreeConditionUser').attr('disabled','disabled');
	}
	else{$('#agreeConditionUser').attr('disabled','disabled');}
	if (document.getElementById('agreeConditionOrg').checked){
		$('#agreeConditionOrg').attr('checked',false);
		$('#agreeConditionOrg').attr('disabled','disabled');
	}
	else{$('#agreeConditionOrg').attr('disabled','disabled');}
	/* modified by Sunita for ticket 713261 */
}
function validateOrganizationDetails() {
/* 	log(window.parent.$('#signUpOrg').attr('src')); */
	 if(eval(validateOrgColumns("txtOrganizationName"))){ 
		if ($('#txtOrganizationNameOrg').val() == "") {
			iHUB.validation.errorMessage("txtOrganizationNameOrg",multilingualKeyValue('294','34'),0);   /* "Please enter the Organization Name."orgreg50:"*/
			validate = false;
			return false;
		} else {
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
	 }	
	if(eval(validateOrgColumns("txtOrganizationAddress"))){ 
		if ($('#txtOrganizationAddressOrg').val() == "") {
			iHUB.validation.errorMessage("txtOrganizationAddressOrg",multilingualKeyValue('293','34'),0); /* orgreg51: */
			validate = false;
			return false;
		} else {
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
	 }
	 if(eval(validateOrgColumns("txtOrgCountry"))){ 
		if ($('#txtOrgCountryOrg').val() == "" || $('#txtOrgCountryOrg').val() == "Country") {
			iHUB.validation.errorMessage("txtOrgCountryOrg",multilingualKeyValue('292','34'),0);  /* "Please Enter Country." orgreg52: */
			validate = false;
			return false;
		} else if ($('.txtOrgCountry').val() != "") {
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
	 }	
	if(eval(validateOrgColumns("txtOrganizationState"))){ 
		if(!$('#txtOrganizationStateOrg').parent('.form-group').hasClass("hidden")){
			if($('#txtOrganizationStateOrg').val()=="State" || $('#txtOrganizationStateOrg').val()==""){
				iHUB.validation.errorMessage('txtOrganizationStateOrg',multilingualKeyValue('291','34'),'100');              /*  mesg4 */
				validate=false;
				return false;
			}
			else{
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
		}
	 }	
	if(eval(validateOrgColumns("txtOrganizationWebsite"))){
		/* added for jobs CR */
		if($.trim(userTypesOrg)=="Corporate"){
			if ($('#txtOrganizationWebsiteOrg').val() == "") {
				iHUB.validation.errorMessage("txtOrganizationWebsiteOrg",multilingualKeyValue('348','34'),0);   /* orgreg50:"*/
				validate = false;
				return false;
			} else if (!validateWebsite($('#txtOrganizationWebsiteOrg').val(), false)) {
				iHUB.validation.errorMessage("txtOrganizationWebsiteOrg",multilingualKeyValue('349','34'),100);  /* (http://www.org.co.in.%27,100)  orgreg53: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		} /* added for jobs CR */
		else{
			if ($('#txtOrganizationWebsiteOrg').val() == "") {
				validate = true;
			} else if (!validateWebsite($('#txtOrganizationWebsiteOrg').val(), false)) {
				iHUB.validation.errorMessage("txtOrganizationWebsiteOrg",multilingualKeyValue('349','34'),100 );  /* (http://www.org.co.in.%27,100) orgreg53: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
	 } 
	if(eval(validateOrgColumns("txtPostcode"))){
		if ($('#txtPostcodeOrg').val() == "") {
			iHUB.validation.errorMessage("txtPostcodeOrg",multilingualKeyValue('290','34'),100);      /* "Please Enter the Organization Postal/Pincode."orgreg54: */
			validate = false;
			return false;
		}
		var zipCode = $('#txtPostcodeOrg').val();
		if (zipCode.length < 1 || zipCode.length > 10) {
			iHUB.validation.errorMessage("txtPostcodeOrg",multilingualKeyValue('289','34'),100);         /* "Please enter correct Organization Postal/Pincode."orgreg55: */
			validate = false;
			return false;
		} else {
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
	 }
	 /*validation for institute */
	if(isNewInstituteFieldRequired && userTypesOrg=="Distributor"){
	 if((eval(validateUserColumns("instituteContactNumber"))) && (!($('#instituteContactNumberOrg').parent().hasClass("hidden"))) && $('#instituteContactNumberOrg').val()!=""){	
				/* if($('#instituteContactNumberOrg').val()==""){
					iHUB.validation.errorMessage("instituteContactNumberOrg","Please enter institute's contact number",300);
					validate=false;
					return false;
				} */
				if(isNaN($('#instituteContactNumberOrg').val())){
					iHUB.validation.errorMessage("instituteContactNumberOrg",multilingualKeyValue('288','34'),300);
					validate=false;
					return false;
				}
				if(Number($('#instituteContactNumberOrg').val())==0){
					iHUB.validation.errorMessage("instituteContactNumberOrg",multilingualKeyValue('287','34'),300);
					validate=false;
					return false;
				}
				var phoneNo=$('#instituteContactNumberOrg').val();
				var getLength=getPhoneNumberLength().split("@~@");
				if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
					iHUB.validation.errorMessage("instituteContactNumberOrg",multilingualKeyValue('287','34'),300);
					validate=false;
					return false;
				}else{
					iHUB.validation.resetValidationColourText();
					validate=true;
				}
			}
	if((eval(validateUserColumns("instituteEmailId"))) && (!($('#instituteEmailIdOrg').parent().hasClass("hidden")))&& $('#instituteEmailIdOrg').val()!=""){ 
		/* if($('#instituteEmailIdOrg').val()==""){
			iHUB.validation.errorMessage("instituteEmailIdOrg",iHUB.multilingual.gmv('txt18'),100);
			validate=false;
			return false;
		} */
		if(!iHUB.validateEmail.validateEmailId($('#instituteEmailIdOrg').val(),false)){
			iHUB.validation.errorMessage("instituteEmailIdOrg",multilingualKeyValue('306','34'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
 
		if((eval(validateUserColumns("institutionType")) && $('[data-id="institutionTypeOrg"]:visible').length==1) && (!($('#institutionTypeOrg').parent().hasClass("hidden")))){ 
		if(($('#institutionTypeOrg').val()=="") ||($('#institutionTypeOrg').val()=="Select")){
			iHUB.validation.errorMessage("institutionTypeOrg",multilingualKeyValue('350','34'),300);
				validate=false;
				return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
		if ($("#institutionTypeOrg").val()!=0) {
	/* 		if((eval(validateUserColumns("instituteContactNumber"))) && (!($('#instituteContactNumberOrg').parent().hasClass("hidden")))){	
				if($('#instituteContactNumberOrg').val()==""){
					iHUB.validation.errorMessage("instituteContactNumberOrg","Please enter institute's contact number",300);
					validate=false;
					return false;
				}
				if(isNaN($('#instituteContactNumberOrg').val())){
					iHUB.validation.errorMessage("instituteContactNumberOrg",iHUB.multilingual.gmv('txt23'),300);
					validate=false;
					return false;
				}
				if(Number($('#instituteContactNumberOrg').val())==0){
					iHUB.validation.errorMessage("instituteContactNumberOrg",iHUB.multilingual.gmv('txt24'),300);
					validate=false;
					return false;
				}
				var phoneNo=$('#instituteContactNumberOrg').val();
				var getLength=getPhoneNumberLength().split("@~@");
				if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
					iHUB.validation.errorMessage("instituteContactNumberOrg",iHUB.multilingual.gmv('txt24'),300);
					validate=false;
					return false;
				}else{
					iHUB.validation.resetValidationColourText();
					validate=true;
				}
			}
	if((eval(validateUserColumns("instituteEmailId"))) && (!($('#instituteEmailIdOrg').parent().hasClass("hidden")))){ 
		if($('#instituteEmailIdOrg').val()==""){
			iHUB.validation.errorMessage("instituteEmailIdOrg",iHUB.multilingual.gmv('txt18'),100);
			validate=false;
			return false;
		}
		if(!iHUB.validateEmail.validateEmailId($('#instituteEmailIdOrg').val(),false)){
			iHUB.validation.errorMessage("instituteEmailIdOrg",iHUB.multilingual.gmv('txt19'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 } */
	 if((eval(validateUserColumns("affiliatingBody")) && $('[data-id="affiliatingBodyOrg"]:visible').length==1) && (!($('#affiliatingBodyOrg').parent().hasClass("hidden")))){ 
		if(($('#affiliatingBodyOrg').val()=="") ||($('#affiliatingBodyOrg').val()=="Select")){
			iHUB.validation.errorMessage("affiliatingBodyOrg",multilingualKeyValue('351','34'),300);
				validate=false;
				return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if((eval(validateUserColumns("principalName")) && $('#principalNameOrg:visible').length==1)&& (!($('#principalNameOrg').parent().hasClass("hidden")))){ 
		if($('#principalNameOrg').val()==""){
			/*Please Enter your Last Name.txt15 */
			iHUB.validation.errorMessage("principalNameOrg",multilingualKeyValue('352','34'),50);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if((eval(validateUserColumns("principalMobileNumber")))&& (!($('#principalMobileNumberOrg').parent().hasClass("hidden")))){	
		if($('#principalMobileNumberOrg').val()==""){
			iHUB.validation.errorMessage("principalMobileNumberOrg",multilingualKeyValue('353','34'),300);
			validate=false;
			return false;
		}
		if(isNaN($('#principalMobileNumberOrg').val())){
            /* Please enter Numeric Value as Mobile number.txt23 */	
		 	iHUB.validation.errorMessage("principalMobileNumberOrg",multilingualKeyValue('288','34'),300);
			validate=false;
			return false;
		}
		if(Number($('#principalMobileNumberOrg').val())==0){
			/* Please Enter a Correct Mobile Number.txt24 */	
		 	iHUB.validation.errorMessage("principalMobileNumberOrg",multilingualKeyValue('287','34'),300);
			validate=false;
			return false;
		}
		var phoneNo=$('#principalMobileNumberOrg').val();
		var getLength=getPhoneNumberLength().split("@~@");
		if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
			/* Please Enter a Correct Mobile Number.txt24 */	
			iHUB.validation.errorMessage("principalMobileNumberOrg",multilingualKeyValue('287','34'),300);
 			validate=false;
			return false;
		}else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if((eval(validateUserColumns("principalEmail")))&& (!($('#principalEmailOrg').parent().hasClass("hidden")))){ 
		if($('#principalEmailOrg').val()==""){
				   /*  Please Enter your Email Id.txt18 */
			iHUB.validation.errorMessage("principalEmailOrg",multilingualKeyValue('278','34'),100);
			validate=false;
			return false;
		}
		if(!iHUB.validateEmail.validateEmailId($('#principalEmailOrg').val(),false)){
			/* The Email ID format is invalid,the valid Email Id format is name@org.com or name@org.co.in.txt19 */
			iHUB.validation.errorMessage("principalEmailOrg",multilingualKeyValue('306','34'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if((eval(validateUserColumns("instituteCoordinatorName")) && $('#instituteCoordinatorNameOrg:visible').length==1)&& (!($('#instituteCoordinatorNameOrg').parent().hasClass("hidden")))){ 
		if($('#instituteCoordinatorNameOrg').val()==""){
			/*Please Enter your Last Name.txt15 */
			iHUB.validation.errorMessage("instituteCoordinatorNameOrg",multilingualKeyValue('354','34'),50);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if((eval(validateUserColumns("instituteCoordinatorMobileNumber")))&& (!($('#instituteCoordinatorMobileNumberOrg').parent().hasClass("hidden")))){	
		if($('#instituteCoordinatorMobileNumberOrg').val()==""){
			iHUB.validation.errorMessage("instituteCoordinatorMobileNumberOrg",multilingualKeyValue('355','34'),300);
			validate=false;
			return false;
		}
		if(isNaN($('#instituteCoordinatorMobileNumberOrg').val())){
            /* Please enter Numeric Value as Mobile number.txt23 */	
		 	iHUB.validation.errorMessage("instituteCoordinatorMobileNumberOrg",multilingualKeyValue('288','34'),300);
			validate=false;
			return false;
		}
		if(Number($('#instituteCoordinatorMobileNumberOrg').val())==0){
			/* Please Enter a Correct Mobile Number.txt24 */	
		 	iHUB.validation.errorMessage("instituteCoordinatorMobileNumberOrg",multilingualKeyValue('287','34'),300);
			validate=false;
			return false;
		}
		var phoneNo=$('#instituteCoordinatorMobileNumberOrg').val();
		var getLength=getPhoneNumberLength().split("@~@");
		if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
			/* Please Enter a Correct Mobile Number.txt24 */	
			iHUB.validation.errorMessage("instituteCoordinatorMobileNumberOrg",multilingualKeyValue('287','34'),300);
 			validate=false;
			return false;
		}else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if((eval(validateUserColumns("instituteCoordinatorEmail")))&& (!($('#instituteCoordinatorEmailOrg').parent().hasClass("hidden")))){ 
		if($('#instituteCoordinatorEmailOrg').val()==""){
				   /*  Please Enter your Email Id.txt18 */
			iHUB.validation.errorMessage("instituteCoordinatorEmailOrg",multilingualKeyValue('278','34'),100);
			validate=false;
			return false;
		}
		if(!iHUB.validateEmail.validateEmailId($('#instituteCoordinatorEmailOrg').val(),false)){
			/* The Email ID format is invalid,the valid Email Id format is name@org.com or name@org.co.in.txt19 */
			iHUB.validation.errorMessage("instituteCoordinatorEmailOrg",multilingualKeyValue('306','34'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if((eval(validateUserColumns("institutionCoordinatorDesignation")) && $('#institutionCoordinatorDesignationOrg:visible').length==1) && (!($('#institutionCoordinatorDesignationOrg').parent().hasClass("hidden")))){ 
		if(($('#institutionCoordinatorDesignationOrg').val()=="")){
			iHUB.validation.errorMessage("institutionCoordinatorDesignationOrg",multilingualKeyValue('356','34'),300);
				validate=false;
				return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
	if((eval(validateUserColumns("assessmentSpocName")) && $('#assessmentSpocNameOrg:visible').length==1)&& (!($('#assessmentSpocNameOrg').parent().hasClass("hidden")))){ 
		if($('#assessmentSpocNameOrg').val()==""){
			/*Please Enter your Last Name.txt15 */
			iHUB.validation.errorMessage("assessmentSpocNameOrg",multilingualKeyValue('357','34'),50);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	if((eval(validateUserColumns("assessmentSpocMobileNumber")))&& (!($('#assessmentSpocMobileNumberOrg').parent().hasClass("hidden")))){	
				if($('#assessmentSpocMobileNumberOrg').val()==""){
					iHUB.validation.errorMessage("assessmentSpocMobileNumberOrg",multilingualKeyValue('358','34'),300);
					validate=false;
					return false;
				}
				if(isNaN($('#assessmentSpocMobileNumberOrg').val())){
					/* Please enter Numeric Value as Mobile number.txt23 */	
					iHUB.validation.errorMessage("assessmentSpocMobileNumberOrg",multilingualKeyValue('288','34'),300);
					validate=false;
					return false;
				}
				if(Number($('#assessmentSpocMobileNumberOrg').val())==0){
				/* Please Enter a Correct Mobile Number.txt24 */	
					iHUB.validation.errorMessage("assessmentSpocMobileNumberOrg",multilingualKeyValue('287','34'),300);
					validate=false;
					return false;
				}
				var phoneNo=$('#assessmentSpocMobileNumberOrg').val();
				var getLength=getPhoneNumberLength().split("@~@");
				if($.trim(phoneNo).length < Number(getLength[1]) || $.trim(phoneNo).length > Number(getLength[0])){
					/* Please Enter a Correct Mobile Number.txt24 */	
					iHUB.validation.errorMessage("assessmentSpocMobileNumberOrg",multilingualKeyValue('287','34'),300);
					validate=false;
					return false;
				}else{
					iHUB.validation.resetValidationColourText();
					validate=true;
				}
			}
	if((eval(validateUserColumns("assessmentSpocEmail")))&& (!($('#assessmentSpocEmailOrg').parent().hasClass("hidden")))){ 
		if($('#assessmentSpocEmailOrg').val()==""){
				   /*  Please Enter your Email Id.txt18 */
			iHUB.validation.errorMessage("assessmentSpocEmailOrg",multilingualKeyValue('278','34'),100);
			validate=false;
			return false;
		}
		if(!iHUB.validateEmail.validateEmailId($('#assessmentSpocEmailOrg').val(),false)){
			/* The Email ID format is invalid,the valid Email Id format is name@org.com or name@org.co.in.txt19 */
			iHUB.validation.errorMessage("assessmentSpocEmailOrg",multilingualKeyValue('306','34'),100);
			validate=false;
			return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	 }
	 if((eval(validateUserColumns("internalTypeOfInstitute")) && $('[data-id="internalTypeOfInstituteOrg"]:visible').length==1)&& (!($('#internalTypeOfInstituteOrg').parent().hasClass("hidden")))){ 
		if(($('#internalTypeOfInstituteOrg').val()=="") ||($('#internalTypeOfInstituteOrg').val()=="Select")){
			iHUB.validation.errorMessage("internalTypeOfInstituteOrg",multilingualKeyValue('359','34'),300);
				validate=false;
				return false;
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate=true;
		}
	}
}	
	}
	 /*validation for institute */
	var registeredCheck = document.getElementsByName('userRegistered');
	var ischecked_method = false;
	for (var i = 0; i < registeredCheck.length; i++) {
		if (registeredCheck[i].checked) {
			ischecked_method = true;
			break;
		}
	}
	if (!ischecked_method) {
		iHUB.validation.errorMessage("userRegistered",multilingualKeyValue('286','34'),150); /*"Please Select if the the Primary user is already a Registered User or Not." orgreg56: */
		validate = false;
		return false;
	} else {
		iHUB.validation.resetValidationColourText();
		validate = true;
	}
	if (document.getElementById('YesOrg').checked) {
		if(eval(validateOrgColumns("userid_temp"))){
			if ($('#userid_tempOrg').val() == "") {
				iHUB.validation.errorMessage("userid_tempOrg",multilingualKeyValue('284','34'),220);   /*Please Enter Login Id. orgreg66: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}	
		if(eval(validateOrgColumns("confData"))){
			if ($('#confDataOrg').val() == "") {
				iHUB.validation.errorMessage("confDataOrg",multilingualKeyValue('276','34'),220);  /*"Please Enter Password." orgreg58: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
	}
	else if (document.getElementById('NoOrg').checked) {
		if(eval(validateOrgColumns("txtSalutation"))){
			if ($('#txtSalutationOrg').val() == "" || $('#txtSalutationOrg').val() == "Salutation") {
				iHUB.validation.errorMessage("txtSalutationOrg",multilingualKeyValue('283','34'),220);  /*"Please select Salutation." orgreg59: */
				validate = false;
				return false;
			} else if ($('#txtSalutationOrg').val() != "") {
				//$('#txtSalutation-H').text("");
				//$('.abc').hide();
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtFirstName"))){
			if ($('#txtFirstNameOrg').val() == "") {
				iHUB.validation.errorMessage("txtFirstNameOrg",multilingualKeyValue('282','34'),220);/*"Please Enter your First Name." orgreg60: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtLastName"))){
			if ($('#txtLastNameOrg').val() == "") {
				iHUB.validation.errorMessage("txtLastNameOrg",multilingualKeyValue('281','34'),270);  /*"Please Enter your Last Name." orgreg61: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtGender"))){
			if($(".gender-container .btn-group .active").length<1){
			/* txt16 "Please select Gender."*/
				iHUB.validation.errorMessage("txtGenderOrg",multilingualKeyValue('280','34'),100);
				validate=false;
				return false;
			}
			else{ /* if($('#txtGender').val()!="") */
				/* $("#txtGender").val($(".gender-container .btn-group .active").val()); */
				var str = $(".gender-container .btn-group .active").val();
				str = str.toLowerCase().replace(/\b[a-z]/g, function(letter) {
					return letter.toUpperCase();
				});
				$("#txtGender").val(str);
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
		}
		if(eval(validateOrgColumns("txtDisplayName"))){
			if ($('#txtDisplayNameOrg').val() == "") {
				iHUB.validation.errorMessage("txtDisplayNameOrg",multilingualKeyValue('279','34'),320);    /*"Please Enter Display Name." orgreg63: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtEmail"))){
			if($('#txtEmailOrg').val()==""){	
				iHUB.validation.errorMessage("txtEmailOrg",multilingualKeyValue('278','34'),100);          /*"Please Enter your Email Id." orgreg64:"" */
				validate=false;
				return false;
			}
			if (!iHUB.validateEmail.validateEmailId($('#txtEmailOrg').val(), false)) {
					//document.forms[0].emailId.focus();
					iHUB.validation.errorMessage("txtEmailOrg",multilingualKeyValue('306','34'),370);  /*'The Email ID format is invalid,the valid Email Id format is name@org.com or name@org.co.in ' orgreg65: */
					validate = false;
					return false;
				} else {
					//$('.abc6').hide(); 
					iHUB.validation.resetValidationColourText();
					validate = true;
				}
		}	

		if(eval(validateOrgColumns("txtLoginId_temp"))){
			if ($('#txtLoginId_tempOrg').val() == "") {
				iHUB.validation.errorMessage("txtLoginId_tempOrg",multilingualKeyValue('277','34'),370);   /*"Please Enter Login ID." orgreg66: */
				validate = false;
				return false;
			} else {
				//$('.abc61').hide();
				iHUB.validation.resetValidationColourText();
				var sPageURL = decodeURIComponent(window.location.search.substring(1)),
					sURLVariables = sPageURL.split('&'),
					sParameterName,
					i;
				sParameterName = sURLVariables;
				for (var i = 0; i < sParameterName.length; i++) {
					if (sParameterName[i].split('=')[0] === 'instanceId') {
						instanceId = sParameterName[i].split('=')[1];
					}
				}
				var masterform_id = $.trim(window.parent.$('input[name="formId"]').val())!=''?$.trim(window.parent.$('input[name="formId"]').val()):$.trim(window.parent.$('input[name="userFormId"]').val());
				var orgID = $('input[name="orgId"]').val();
				$('#txtLoginIdOrg').val($('#txtLoginId_tempOrg').val() + "_" + masterform_id + orgID + "_" + instanceId);
				$('#txtLoginIdForDisplay').val($('#txtLoginId_tempOrg').val());
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtPassword"))){
			if ($('#txtPasswordOrg').val() == "") {
				iHUB.validation.errorMessage("txtPasswordOrg",multilingualKeyValue('276','34'),420);           /*  orgreg67:"Please Enter your Password." */
				validate = false;
				return false;
			} else {
				var val = eval('validatePWD($("#txtPasswordOrg").val(),"txtPasswordOrg")');
				if (val) {
					iHUB.validation.resetValidationColourText();
					validate = true;
				} else {
					validate = false;
					return false;
				}
			}
		}
		if(eval(validateOrgColumns("ConfirmPasswOrd"))){
			if ($('#ConfirmPasswOrdOrg').val() == "") {
				iHUB.validation.errorMessage("ConfirmPasswOrdOrg",multilingualKeyValue('275','34'),420);  /*"Please Enter your Password to Confirm." orgreg68: */
				validate = false;
				return false;
			}
			if ($('#txtPasswordOrg').val() != $('#ConfirmPasswOrdOrg').val()) {
				iHUB.validation.errorMessage("ConfirmPasswOrdOrg",multilingualKeyValue('274','34'),420);  /*"The confirmed password entered does not match with your new password" orgreg69: */
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
		}
		if(eval(validateOrgColumns("txtCountry"))){ 
			if(($('#txtCountryOrg').val()=="") ||($('#txtCountryOrg').val()=="Country")){
				iHUB.validation.errorMessage("txtCountryOrg",multilingualKeyValue('273','34'),300);//"Please select Country"
					validate=false;
					return false;
			}
			else{
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
		}	
		if(eval(validateOrgColumns("txtUserState"))){
			if(!$('#txtUserStateOrg').parent('.form-group').hasClass("hidden")){
				if($('#txtUserStateOrg').val()=="State" || $('#txtUserStateOrg').val()==""){
					iHUB.validation.errorMessage("txtUserStateOrg",multilingualKeyValue('307','34'),100);              /*" Please select State." mesg4 */
					validate=false;
					return false;
				}
				else{
					iHUB.validation.resetValidationColourText();
					validate=true;
				}
			}	
		}
		if(eval(validateOrgColumns("mailCheck"))){
			if($('#mailCheckOrg').length < 0){
				iHUB.validation.errorMessage("isMailReqdOrg",multilingualKeyValue('271','34'),100);/* Please select State.mesg66 */
				validate=false;
				return false;
			}
			else{
				if($("#mailCheckOrg").attr('checked')){
				$('#isMailReqdOrg').val("1");
				}
				else{
					$('#isMailReqdOrg').val("0");
				}
				iHUB.validation.resetValidationColourText();
				validate=true;
			}
		}
		if(eval(validateOrgColumns("isMinor"))){
			var isMinorCheck = document.getElementsByName('isMinor');
			var isminorchecked_method = false;
			for (var i = 0; i < isMinorCheck.length; i++) {
				if (isMinorCheck[i].checked) {
					isminorchecked_method = true;
					break;
				}
			}
			if (!isminorchecked_method) {
				iHUB.validation.errorMessage("isMinor",multilingualKeyValue('270','34'),150); //"Please check if you are minor or not."
				validate = false;
				return false;
			} else {
				iHUB.validation.resetValidationColourText();
				validate = true;
			}
			if (document.getElementById('isMinorYes').checked) {
				if(eval(validateOrgColumns("parentName"))){
					if ($('#parentName').val() == "") {
						iHUB.validation.errorMessage("parentName",multilingualKeyValue('269','34'),220);   /*"Please Enter Parent Name." orgreg66:"" */
						validate = false;
						return false;
					} else {
						iHUB.validation.resetValidationColourText();
						validate = true;
					}
				}
				if(eval(validateOrgColumns("parentMobileNo"))){
					if ($('#parentMobileNoOrg').val() == "") {
						iHUB.validation.errorMessage("parentMobileNoOrg",multilingualKeyValue('268','34'),220);/*"Please Enter your Parent Mobile Number." orgreg60: */
						validate = false;
						return false;
					} else {
						iHUB.validation.resetValidationColourText();
						validate = true;
					}
				}
				if(eval(validateOrgColumns("parentEmailId"))){
					if($('#parentEmailIdOrg').val()==""){	
						iHUB.validation.errorMessage("parentEmailIdOrg",multilingualKeyValue('267','34') ,100);          /*"Please Enter your Parent Email Id." orgreg64:*/
						validate=false;
						return false;
					}
					if (!iHUB.validateEmail.validateEmailId($('#parentEmailIdOrg').val(), false)) {
							//document.forms[0].emailId.focus();
						iHUB.validation.errorMessage("parentEmailIdOrg",multilingualKeyValue('306','34')+'name@org.com or name@org.co.in ',370);  /* orgreg65:The Email ID format is invalid,the valid Email Id format is */
						validate = false;
						return false;
					}
					else if($.trim($('#parentEmailIdOrg').val().toLowerCase())==$.trim($('#txtEmailOrg').val().toLowerCase())){
						iHUB.validation.errorMessage("parentEmailIdOrg",multilingualKeyValue('360','34'),100);          /* "Please Enter your Parent Email Id." */
						validate=false;
						return false;
					}
					else {
							//$('.abc6').hide(); 
						iHUB.validation.resetValidationColourText();
						validate = true;
					}
				}
			}
			else if (document.getElementById('isMinorNo').checked) {
				
					iHUB.validation.resetValidationColourText();
					validate = true;
			}
			if($('#agreeConditionOrg').length > 0){
				if($('#agreeConditionOrg:checked').length==0){					
					alert(multilingualKeyValue('265','34') );  /* orgreg45:'Please accept iON Digital Hub\'s Terms of Use' */					
					return false;
				}
				else{
					validate=true;
				}
			}
			else{
				validate=true;
			}
		}
	}
	/* added for corporate signup */
	if($.trim(userTypesOrg)=="Corporate"){
		if($.trim($("input[name='isJobAggregator']:checked").val())==""){
			iHUB.validation.errorMessage("isJobAggregator",multilingualKeyValue('361','34'),100);
			validate=false;
			return false;
		}
		else if($.trim($("input[name='isJobAggregator']:checked").val())=="0"){
			if($.trim($('#companyName').val())==""){	
				iHUB.validation.errorMessage("companyName",multilingualKeyValue('362','34') ,100);
				validate=false;
				return false;
			}
		}
		else{
			iHUB.validation.resetValidationColourText();
			validate = true;
		}
	}
	/* added for corporate signup */
	return true;
}
/* $(document).on("focus","input.selectOpt",function(){
	$(this).parents(".form-group").find(".selName").addClass("in");
	$(this).parents(".datepicker").find(".selName").addClass("in");
}).on("blur","input.selectOpt",function(){
	var a = $(this).val();
	if(a.length==0){
		$(this).parents(".form-group").find(".selName").removeClass("in");
		$(this).parents(".datepicker").find(".selName").removeClass("in");
	}
});
$(document).on("change","select.selectpicker",function(){
	if($(this).val().toLowerCase()==$(this).find('option.bs-title-option').text().toLowerCase()){
		$(this).parents(".form-group").find(".selName").removeClass("in");
	}
	else{
		$(this).parents(".form-group").find(".selName").addClass("in");
	}
}); */
function validateUserCredentials(dailyPassword){
	var masterform_id = parent.$('[name="formId"]').val();
	if(masterform_id==undefined || $.trim(masterform_id)=="")
		masterform_id=parent.$('#userFormId').val();
	var orgID = $('#orgId').val();
	var instanceId;
	var sPageURL = decodeURIComponent(window.location.search.substring(1)),
		sURLVariables = sPageURL.split('&'),
		sParameterName,
		i;
	sParameterName = sURLVariables;
	for (var i = 0; i < sParameterName.length; i++) {
		if (sParameterName[i].split('=')[0] === 'instanceId') {
			instanceId = sParameterName[i].split('=')[1];
		}
	}
	if(instanceId==='' || instanceId===undefined){
		instanceId=$("#txtInstanceId_div").text()==""?$("#txtInstanceId").val():$("#txtInstanceId_div").text();
	}
	if(instanceId==='' || instanceId===undefined){
			instanceId=$.trim($('#instanceId').val());
	}
	var url = iHUB.url.iDH();/* iHUB.url.get(); changed to iDH*/
	var userid=$('#userid_tempOrg').val()+"_"+masterform_id+orgID+"_"+instanceId;
	$.ajax({
		type: "POST",
		url: url,
		data: {
			orgID:orgID,
			masterform_id:masterform_id,
			txtInstanceId:instanceId,
			userid:userid,
			dailyPassword:dailyPassword,
			confData:$('#confDataOrg').val(),
			subAction:"validateUser"
		},
		dataType: "text",
		success: function(responseTemp){
			var result=responseTemp.split('@~@')[0];
			if(result.toLowerCase()=="invalid"){
				iHUB.validation.errorMessage("userid_tempOrg",multilingualKeyValue('336','34'),220); 
				validate = false;
				return false;
			}
			else if(responseTemp.split('@~@')[1]=="0"){
				if(result.toLowerCase()=="on-hold"){
					$('#userid_tempOrg').val('');
					$('#confDataOrg').val('');
					alert(multilingualKeyValue('363','34'));
					validate = false;
					return false;
				}
				else if(result.toLowerCase()==userid.toLowerCase()){
					iHUB.validation.resetValidationColourText();
					$('#txtLoginIdOrg').val($('#userid_tempOrg').val()+"_"+masterform_id+orgID+"_"+instanceId);
					var goAhead=false;
					if($('#agreeConditionOrg').length > 0){
						if($('#agreeConditionOrg:checked').length==0){
							alert(multilingualKeyValue('265','34'));  
						}
						else{
							goAhead=true;
						}
					}
					else{
						goAhead=true;
					}				
					if(goAhead){
						if($('#isMinorOrg').val()==""){
							$('#isMinorOrg').val("0");
						}
						$('#txtCountryOrg').removeAttr('disabled', 'disabled');
						$('#txtCountryOrg').selectpicker('refresh');
						$('#txtOrgCountryOrg').removeAttr("disabled","disabled");
						$('#txtOrgCountryOrg').selectpicker('refresh');
						if (window.parent.isNewOrgRegistration && typeof allowOrgSignUp == 'function'){ 
							allowOrgSignUp();
						}
						else{
							eval(validateIonCaptcha("saveFormData","Submit"));
						}
					}
				}
			}
			else if(responseTemp.split('@~@')[1]=="1"){
				$('#userid_tempOrg').val('');
				$('#confDataOrg').val('');
				alert(multilingualKeyValue('363','34'));
				validate = false;
				return false;
			}
		},
		error: function(x, e){
			if(e=="parsererror" && x.responseText=="session is not avaliable"){
				createIncorrectURLLoader();
				return false;
			}
		},
		complete: function(){
			
		}
	});
} 
function validatelogin() {
	
	var loginId = document.getElementById("txtLoginIdOrg").value;
	var check;
	if (loginId != null && loginId != "") {
		var params = [loginId];
		check = validateChkDuplicateLogin(params);
	}
	if (!check) return false;
	else return true;
}
function validateChkDuplicateLogin(arrValues) {
	var a = "";
	var check = false;
	for (i = 0; i < arrValues.length; i++) {
		a = a + "-@@ion@@-" + arrValues[i];
	}
	var http_request = fnGetXMLHttpObject();
	var orgID = document.getElementById("orgId").value;
	var formID = window.parent.$('[name="formId"]').val();
	if (http_request != null) {
		var pValidationServlet = "/EForms/SecureCheckDuplicate";
		http_request.open('POST', pValidationServlet, false);
		http_request.onreadystatechange = function() {
			check = validateChkDuplicateResponse(http_request);
		};
		var parameters = orgID + "-@@ion@@-" + formID + a;
		http_request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		http_request.send("Params=" + parameters);
	}
	return check;
}
function allowOrgSignUp(){
	if(validateCaptchaiHUBWS("OrgCaptchaHolder")){
		var url="/iDH/iHUBWS";
		var orgID=$('#orgId').val();
		var formId=$('#formId').val();
		var isNewUser="",userRegistered="",existingUser="",txtLoginIdForDisplay="",txtLoginId="",txtPassword="";
		if(document.getElementById('NoOrg').checked){
			isNewUser="y";
			userRegistered="no";
			existingUser="no";
			txtLoginIdForDisplay=$.trim($('#txtLoginId_tempOrg').val());
			txtLoginId=$.trim($('#txtLoginId_tempOrg').val());
			txtPassword=$('#txtPasswordOrg').val();
		}
		else{
			isNewUser="n";
			userRegistered="yes";
			existingUser="yes";
			txtLoginIdForDisplay=$.trim($('#userid_tempOrg').val());
			txtLoginId=$.trim($('#userid_tempOrg').val());
			txtPassword=$('#confDataOrg').val();
		}
		var txtInstanceId=$.trim($('#txtInstanceId').val())==""?$.trim($('#instanceId').val()):$.trim($('#txtInstanceId').val());
		var txtOrgType = userTypesOrg;
		var entityOrgId="0";
		var instanceid=$.trim($('#txtInstanceId').val())==""?$.trim($('#instanceId').val()):$.trim($('#txtInstanceId').val());
		var languageId=$.trim($('#languageId').val());
		var timezoneId=$.trim($('#timezoneId').val());
		var isMailReqd=$('#isMailReqdOrg').val();
		var isMinor=$('#isMinorOrg').val();
		var txtOrganizationName=$('#txtOrganizationNameOrg').val();
		var txtOrganizationAddress=$('#txtOrganizationAddressOrg').val();
		var txtOrgAddress2=$('#txtOrgAddress2Org').val();
		var txtOrgAddress3=$('#txtOrgAddress3Org').val();
		var txtOrganizationWebsite=$('#txtOrganizationWebsiteOrg').val();
		var txtOrgCountry=$('#txtOrgCountryOrg').val();
		var txtOrganizationState=$('#txtOrganizationStateOrg').val();
		var txtPostcode=$('#txtPostcodeOrg').val();
		var stateCode=$.trim(giveMeStateCode($.trim($('#txtOrganizationStateOrg').val())));
		var txtSalutation= $('#txtSalutationOrg').val();
		var txtFirstName=$('#txtFirstNameOrg').val();
		var txtLastName=$('#txtLastNameOrg').val();
		var txtGender=$('#txtGenderOrg').val();
		var txtDisplayName=$('#txtDisplayNameOrg').val();
		var txtEmail=$('#txtEmailOrg').val();
		var txtLoginId_temp=$('#txtLoginId_tempOrg').val();
		var ConfirmPasswOrd=$('#ConfirmPasswOrdOrg').val();
		var txtCountry=$('#txtCountryOrg').val();
		var txtUserState=$('#txtUserStateOrg').val();
		var txtUserStateCode=$.trim(giveMeStateCode($.trim($('#txtUserStateOrg').val())));
		var userid_temp=$('#userid_tempOrg').val();
		var confData=$('#confDataOrg').val();
		var txtCity=$('#txtCityOrg').val();
		var isAggregator="0";
		/* var consentDataOrg=$('#consentDataOrg').val(); */
		var consentData=$('#consentData').val();  /* changed for new privacy policy modal */
		var isAggregatorChk = document.getElementsByName('isAggregator');
		var aggregator_method = false;
		var captchaService_imageKey=$.trim($('#captchaService_imageKey').val());/* #OrgCaptchaHolder  */
		var captchaService_answer=$.trim($('#OrgCaptchaHolder #captchaService_answer').val());
		/* added for corporate signup */
		if($.trim(userTypesOrg)=="Corporate")
			isAggregator=$.trim($("input[name='isJobAggregator']:checked").val());
		var companyName=$.trim($('#companyName').val());
		/* added for corporate signup */
		/* for (var i = 0; i < isAggregatorChk.length; i++) {
			if (isAggregatorChk[i].checked) {
				aggregator_method = true;
				isAggregator="1";
				break;
			}
		} 
		var isInstitute="";
		if (document.getElementById('YesIns').checked) {
			isInstitute="Y";
		}
		else{
			isInstitute="N";
		}*/
		var institutionType=$('#institutionTypeOrg').val();
		var instituteContactNumber=$('#instituteContactNumberOrg').val();
		var instituteEmailId=$('#instituteEmailIdOrg').val();
		var affiliatingBody=$('#affiliatingBodyOrg').val();
		var principalName=$('#principalNameOrg').val();
		var principalMobileNumber=$('#principalMobileNumberOrg').val();
		var principalEmail=$('#principalEmailOrg').val();
		var instituteCoordinatorName=$('#instituteCoordinatorNameOrg').val();
		var instituteCoordinatorMobileNumber=$('#instituteCoordinatorMobileNumberOrg').val();
		var instituteCoordinatorEmail=$('#instituteCoordinatorEmailOrg').val();
		var institutionCoordinatorDesignation=$('#institutionCoordinatorDesignationOrg').val();
		var assessmentSpocName=$('#assessmentSpocNameOrg').val();
		var assessmentSpocMobileNumber=$('#assessmentSpocMobileNumberOrg').val();
		var assessmentSpocEmail=$('#assessmentSpocEmailOrg').val();
		var agreeConditionOrg=$('#agreeConditionOrg').val();
		var internalTypeOfInstitute=$('#internalTypeOfInstituteOrg').val();
		var dailyPassword="";
		var url =iHUB.url.iDH(); /* iHUB.url.get(); changed to iDH */
			$.ajax({
				type : "POST",
				url : url,
				data : {
					masterform_id : formId,
					orgID : orgID,
					subAction : 'checkdailypasswordrequirement',
					txtInstanceId : txtInstanceId,
				},
				dataType : "json",
				success : function(result) {
					var res = JSON.stringify(result);
					var obj = JSON.parse(res);
					//log(obj);
					if($.trim(obj.isdailypasswordrequired) == "true"){
						var password2 = prompt(multilingualKeyValue('340','34'));
						if (password2 == null || password2 == "") {
							return false;
						} else {
							dailyPassword= password2;
						}
					}
					$.ajax({			
						type: "POST",		
						url: "/iDH/iHUBWS",		
						data: {		
							orgID: orgID,
							formId:formId,
							isNewUser: isNewUser,
							txtInstanceId: txtInstanceId,
							txtOrgType: txtOrgType,
							txtLoginIdForDisplay: txtLoginIdForDisplay,
							txtLoginId: txtLoginId,
							entityOrgId:entityOrgId,
							instanceid:instanceid,
							languageId: languageId,
							timezoneId:timezoneId,
							isMailReqd: isMailReqd,
							isMinor: isMinor,
							txtOrganizationName:txtOrganizationName,
							txtOrganizationAddress: txtOrganizationAddress,
							txtOrgAddress2: txtOrgAddress2,
							txtOrgAddress3: txtOrgAddress3,
							txtOrganizationWebsite:txtOrganizationWebsite,
							txtOrgCountry: txtOrgCountry,
							txtOrganizationState: txtOrganizationState,
							txtPostcode: txtPostcode,
							stateCode: stateCode,
							userRegistered: userRegistered,
							txtSalutation:txtSalutation,
							txtFirstName:txtFirstName,
							txtLastName: txtLastName,
							txtGender: txtGender,
							txtDisplayName: txtDisplayName,
							txtEmail: txtEmail,
							txtLoginId_temp: txtLoginId_temp,
							txtPassword: txtPassword,
							ConfirmPasswOrd: ConfirmPasswOrd,
							txtCountry: txtCountry,
							txtUserState: txtUserState,
							txtState:txtUserState,
							txtUserStateCode:txtUserStateCode,
							userid_temp: userid_temp,
							confData:confData,
							txtCity: txtCity,
							isMinor: isMinor,
							consentData:consentData,
							companyName: companyName,      /* added for corporate signup */
							isAggregator: isAggregator,
							institutionType:institutionType,
							instituteContactNumber:instituteContactNumber,
							instituteEmailId:instituteEmailId,
							affiliatingBody:affiliatingBody,
							principalName:principalName,
							principalMobileNumber:principalMobileNumber,
							principalEmail:principalEmail,
							instituteCoordinatorName:instituteCoordinatorName,
							instituteCoordinatorMobileNumber:instituteCoordinatorMobileNumber,
							instituteCoordinatorEmail:instituteCoordinatorEmail,
							institutionCoordinatorDesignation:institutionCoordinatorDesignation,
							assessmentSpocName:assessmentSpocName,
							assessmentSpocMobileNumber:assessmentSpocMobileNumber,
							assessmentSpocEmail:assessmentSpocEmail,
							internalTypeOfInstitute:internalTypeOfInstitute,
							agreeConditionOrg:agreeConditionOrg,
							captchaService_imageKey:captchaService_imageKey,
							captchaService_answer:captchaService_answer,
							subAction: "orgregistration",
							dailyPassword: dailyPassword,
							existingUser:existingUser
						},		
						dataType: "json",
						async:false,
						success: function(result){
							if(result.responseDetails.captchaStatus!=undefined && result.responseDetails.captchaStatus!=null){
								if($.trim(result.responseDetails.captchaStatus).toLowerCase()!="true"){
									alert(multilingualKeyValue('295','34')); 
									/* initiHUB("OrgCaptchaHolder"); changed as in jobs */
									initiHUB("captchaHolderUser");
									$('#OrgCaptchaHolder').html($('#captchaHolderUser').html());
									return false;
								}
								else if($.trim(result.responseDetails.ErrorStatus).toLowerCase()=="false" || $.trim(result.responseDetails.status).toLowerCase()=="false"){
									if($.trim(result.responseDetails.validateStatusCause)!="")
										alert(result.responseDetails.validateStatusCause);
									else
										alert(multilingualKeyValue('364','34'));
									return false;
								}
								else{
									$('#orgRegistration').find('.signCont').find('.successBodyNew').removeClass('hidden');
									$('#orgRegistration').find('.signCont').find('.scroll_bar').addClass('hidden');
									$('#orgRegistration').find('.modal-footer').addClass('hidden');
									$('#orgRegistration').find('input[type="text"],input[type="password"],select[id!="txtCountry"]').val('');
									$('#orgRegistration').find('#isMinorNo').click();
									$('#orgRegistration').find('.selectpicker').selectpicker('refresh');
									minorUser();
									if($.trim(result.responseDetails.app_seq_no)!="")
										callFromSuccessPage(sessChk,result.responseDetails.app_seq_no);
								}
							}
							else{
								return false;
							}
						},
						error: function(x, e){
							iHUB.toaster.blackMessageToaster(x.readyState + " "+ x.status +" "+ e.msg);
						}
					});
				}
			});
	}
}
var globalCMFormId="3090",applicabilityType="";
function openConsentManagementModalJob(type){
	var userType="";
	if($.trim(type.toLowerCase())=="org"){
		globalCMFormId="3097";
		var termsLink=$('#signUpOrg').attr('data-user');
		if(termsLink!=undefined && termsLink.toLowerCase()=="publisher"){
			
			applicabilityType="Publisher";
		}
		else{
			
			applicabilityType="Distributor";
		} 
	}
	else if($.trim(type.toLowerCase())=="user"){
		globalCMFormId="3090";
		applicabilityType="Learner";
	}
	else{
		globalCMFormId="3090";
		applicabilityType="Learner_Parent";
		type="User";
	}
	applicabilityType="Learner";/* Temporoary fix */
	$("#consentManagementModal").find('.modal-body').html('<iframe src="" id="iframe_CM" style="background : #fff url(\'/iDH/dashboard/images/iHUBLoader.gif\') no-repeat scroll 50% 27%;" frameborder="0" scrolling="scrolling"></iframe>');/* url(\'/iDH/dashboard/images/iHUBLoader.gif\') changed to iDH*/
	/* window.open(window.location.protocol+"//"+window.location.hostname+"/EForms/jsp/Consent.jsp?policyId=&orgId="+$('#orgId').val()+"&appId=9518&userId=&fromDB=&consentAlreadyProvided=No&isInsideSolution=No&policyOrPurpose=Policy","popupWindow", "width=600,height=600,scrollbars=yes"); */
	$('#consentManagementModal').modal();
	/* consentReady(); */
	$("#consentManagementModal").on('hidden.bs.modal', function () {
		$('body').css("overflow","hidden");
		$('body').addClass("modal-open");
	});
}
function homeCall() {
	var groupId=$.trim($('#group_id').val());
	var index='/per/'+groupId+'/pub/'+orgID+'/iDH/instance/'+instanceId+'/home/indexPage.html?version='+$.trim(hubversion);
	$('#IndexContent').load(index);
	setTimeout(function() {
		$('.dropdown-menu-right.searchdropdown li a').removeClass('currSelected');
		$('.bredcrum .container .pull-left').html('Home');
		$('#IndexContent').removeClass('hidden');
		$('#search1').addClass('hidden');
		hideLoader_iDH();
		/*setLinkHash(instanceId+'@IID@Home/');*/ /* commented as now no hash in jobs */	
		/* fnLoadUI(); */ /* commented this since this is als getting called from idhrouting micrositeSessionCheck */
		generateIndexPage();
	},1000);
}
/* added for job CR */
/* modified by Sunita for ticket 713261 */
function disableModalAfterFirstClickOrg(){
$('#spanAgreeConditionOrg').attr("onclick","return false;");
$("#controlIndicatorOrg").attr("onclick","$('#spanAgreeConditionOrg').click(function() {return false;});");

}
function disableModalAfterFirstClickUSer(){
$('#spanAgreeConditionUser').attr("onclick","return false;");
$("#controlIndicatorUser").attr("onclick","$('#spanAgreeConditionUser').click(function() {return false;});");

}
$("#privacyNoticeUser").click(function() {
$("#privacyNoticeUser").attr("onclick","openCMmodalFromParent('User');"); 
	if (document.getElementById('agreeConditionUser').checked){
		document.getElementById('agreeConditionUser').checked = true;
	}	
});
$("#privacyNoticeOrg").click(function() {
$("#privacyNoticeOrg").attr("onclick","openCMmodal('Org');"); 
	if (document.getElementById('agreeConditionOrg').checked){
		document.getElementById('agreeConditionOrg').checked = true;
	}	
});
/* modified by Sunita for ticket 713261 */